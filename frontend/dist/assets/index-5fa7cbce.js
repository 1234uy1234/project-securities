var tv=Object.defineProperty;var nv=(t,e,n)=>e in t?tv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Nn=(t,e,n)=>(nv(t,typeof e!="symbol"?e+"":e,n),n);function rv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function r1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i1={exports:{}},Xs={},o1={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),iv=Symbol.for("react.portal"),ov=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),lv=Symbol.for("react.provider"),cv=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),dv=Symbol.for("react.suspense"),fv=Symbol.for("react.memo"),hv=Symbol.for("react.lazy"),Cf=Symbol.iterator;function gv(t){return t===null||typeof t!="object"?null:(t=Cf&&t[Cf]||t["@@iterator"],typeof t=="function"?t:null)}var a1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s1=Object.assign,l1={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=l1,this.updater=n||a1}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c1(){}c1.prototype=Hi.prototype;function Zu(t,e,n){this.props=t,this.context=e,this.refs=l1,this.updater=n||a1}var Ju=Zu.prototype=new c1;Ju.constructor=Zu;s1(Ju,Hi.prototype);Ju.isPureReactComponent=!0;var Sf=Array.isArray,u1=Object.prototype.hasOwnProperty,ed={current:null},d1={key:!0,ref:!0,__self:!0,__source:!0};function f1(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)u1.call(e,r)&&!d1.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Jo,type:t,key:o,ref:a,props:i,_owner:ed.current}}function pv(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function td(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function mv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bf=/\/+/g;function kl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mv(""+t.key):e.toString(36)}function Fa(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Jo:case iv:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+kl(a,0):r,Sf(i)?(n="",t!=null&&(n=t.replace(bf,"$&/")+"/"),Fa(i,e,n,"",function(c){return c})):i!=null&&(td(i)&&(i=pv(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(bf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Sf(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+kl(o,s);a+=Fa(o,e,n,l,i)}else if(l=gv(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+kl(o,s++),a+=Fa(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ha(t,e,n){if(t==null)return t;var r=[],i=0;return Fa(t,r,"","",function(o){return e.call(n,o,i++)}),r}function vv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Ua={transition:null},xv={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Ua,ReactCurrentOwner:ed};function h1(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ha,forEach:function(t,e,n){ha(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ha(t,function(){e++}),e},toArray:function(t){return ha(t,function(e){return e})||[]},only:function(t){if(!td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Hi;de.Fragment=ov;de.Profiler=sv;de.PureComponent=Zu;de.StrictMode=av;de.Suspense=dv;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xv;de.act=h1;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=s1({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ed.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)u1.call(e,l)&&!d1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Jo,type:t.type,key:i,ref:o,props:r,_owner:a}};de.createContext=function(t){return t={$$typeof:cv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lv,_context:t},t.Consumer=t};de.createElement=f1;de.createFactory=function(t){var e=f1.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:uv,render:t}};de.isValidElement=td;de.lazy=function(t){return{$$typeof:hv,_payload:{_status:-1,_result:t},_init:vv}};de.memo=function(t,e){return{$$typeof:fv,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ua.transition;Ua.transition={};try{t()}finally{Ua.transition=e}};de.unstable_act=h1;de.useCallback=function(t,e){return Nt.current.useCallback(t,e)};de.useContext=function(t){return Nt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Nt.current.useEffect(t,e)};de.useId=function(){return Nt.current.useId()};de.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Nt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};de.useRef=function(t){return Nt.current.useRef(t)};de.useState=function(t){return Nt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Nt.current.useTransition()};de.version="18.3.1";o1.exports=de;var C=o1.exports;const nd=r1(C),yv=rv({__proto__:null,default:nd},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=C,_v=Symbol.for("react.element"),Ev=Symbol.for("react.fragment"),Cv=Object.prototype.hasOwnProperty,Sv=wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bv={key:!0,ref:!0,__self:!0,__source:!0};function g1(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Cv.call(e,r)&&!bv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_v,type:t,key:o,ref:a,props:i,_owner:Sv.current}}Xs.Fragment=Ev;Xs.jsx=g1;Xs.jsxs=g1;i1.exports=Xs;var u=i1.exports,Nc={},p1={exports:{}},Ht={},m1={exports:{}},v1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,B){var H=N.length;N.push(B);e:for(;0<H;){var F=H-1>>>1,L=N[F];if(0<i(L,B))N[F]=B,N[H]=L,H=F;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],H=N.pop();if(H!==B){N[0]=H;e:for(var F=0,L=N.length,z=L>>>1;F<z;){var G=2*(F+1)-1,re=N[G],Z=G+1,ye=N[Z];if(0>i(re,H))Z<L&&0>i(ye,re)?(N[F]=ye,N[Z]=H,F=Z):(N[F]=re,N[G]=H,F=G);else if(Z<L&&0>i(ye,H))N[F]=ye,N[Z]=H,F=Z;else break e}}return B}function i(N,B){var H=N.sortIndex-B.sortIndex;return H!==0?H:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],d=1,f=null,h=3,g=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=N)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function E(N){if(m=!1,y(N),!p)if(n(l)!==null)p=!0,W(b);else{var B=n(c);B!==null&&J(E,B.startTime-N)}}function b(N,B){p=!1,m&&(m=!1,x(_),_=-1),g=!0;var H=h;try{for(y(B),f=n(l);f!==null&&(!(f.expirationTime>B)||N&&!j());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var L=F(f.expirationTime<=B);B=t.unstable_now(),typeof L=="function"?f.callback=L:f===n(l)&&r(l),y(B)}else r(l);f=n(l)}if(f!==null)var z=!0;else{var G=n(c);G!==null&&J(E,G.startTime-B),z=!1}return z}finally{f=null,h=H,g=!1}}var I=!1,T=null,_=-1,k=5,O=-1;function j(){return!(t.unstable_now()-O<k)}function R(){if(T!==null){var N=t.unstable_now();O=N;var B=!0;try{B=T(!0,N)}finally{B?A():(I=!1,T=null)}}else I=!1}var A;if(typeof v=="function")A=function(){v(R)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,V=D.port2;D.port1.onmessage=R,A=function(){V.postMessage(null)}}else A=function(){w(R,0)};function W(N){T=N,I||(I=!0,A())}function J(N,B){_=w(function(){N(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,W(b))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var H=h;h=B;try{return N()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=h;h=N;try{return B()}finally{h=H}},t.unstable_scheduleCallback=function(N,B,H){var F=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?F+H:F):H=F,N){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,N={id:d++,callback:B,priorityLevel:N,startTime:H,expirationTime:L,sortIndex:-1},H>F?(N.sortIndex=H,e(c,N),n(l)===null&&N===n(c)&&(m?(x(_),_=-1):m=!0,J(E,H-F))):(N.sortIndex=L,e(l,N),p||g||(p=!0,W(b))),N},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(N){var B=h;return function(){var H=h;h=B;try{return N.apply(this,arguments)}finally{h=H}}}})(v1);m1.exports=v1;var Av=m1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv=C,$t=Av;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x1=new Set,Io={};function Qr(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(Io[t]=e,t=0;t<e.length;t++)x1.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=Object.prototype.hasOwnProperty,Tv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Af={},Nf={};function Iv(t){return Tc.call(Nf,t)?!0:Tc.call(Af,t)?!1:Tv.test(t)?Nf[t]=!0:(Af[t]=!0,!1)}function Ov(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kv(t,e,n,r){if(e===null||typeof e>"u"||Ov(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rd,id);ht[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rd,id);ht[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rd,id);ht[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function od(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kv(e,n,i,r)&&(n=null),r||i===null?Iv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=Nv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),ad=Symbol.for("react.strict_mode"),Ic=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),sd=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),_1=Symbol.for("react.offscreen"),Tf=Symbol.iterator;function Zi(t){return t===null||typeof t!="object"?null:(t=Tf&&t[Tf]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Rl;function uo(t){if(Rl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var Dl=!1;function Pl(t,e){if(!t||Dl)return"";Dl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{Dl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uo(t):""}function Rv(t){switch(t.tag){case 5:return uo(t.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return t=Pl(t.type,!1),t;case 11:return t=Pl(t.type.render,!1),t;case 1:return t=Pl(t.type,!0),t;default:return""}}function Rc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case Ic:return"Profiler";case ad:return"StrictMode";case Oc:return"Suspense";case kc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w1:return(t.displayName||"Context")+".Consumer";case y1:return(t._context.displayName||"Context")+".Provider";case sd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ld:return e=t.displayName||null,e!==null?e:Rc(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return Rc(t(e))}catch{}}return null}function Dv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rc(e);case 8:return e===ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pv(t){var e=E1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pa(t){t._valueTracker||(t._valueTracker=Pv(t))}function C1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dc(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function If(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S1(t,e){e=e.checked,e!=null&&od(t,"checked",e,!1)}function Pc(t,e){S1(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jc(t,e.type,n):e.hasOwnProperty("defaultValue")&&jc(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Of(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jc(t,e,n){(e!=="number"||ss(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fo=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(fo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function b1(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ma,N1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ma.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jv=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){jv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function T1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function I1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=T1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Mv=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bc(t,e){if(e){if(Mv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=null;function cd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $c=null,yi=null,wi=null;function Df(t){if(t=na(t)){if(typeof $c!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Zs(e),$c(t.stateNode,t.type,e))}}function O1(t){yi?wi?wi.push(t):wi=[t]:yi=t}function k1(){if(yi){var t=yi,e=wi;if(wi=yi=null,Df(t),e)for(t=0;t<e.length;t++)Df(e[t])}}function R1(t,e){return t(e)}function D1(){}var jl=!1;function P1(t,e,n){if(jl)return t(e,n);jl=!0;try{return R1(t,e,n)}finally{jl=!1,(yi!==null||wi!==null)&&(D1(),k1())}}function ko(t,e){var n=t.stateNode;if(n===null)return null;var r=Zs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Hc=!1;if(Pn)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Hc=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Hc=!1}function Lv(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var yo=!1,ls=null,cs=!1,Vc=null,Bv={onError:function(t){yo=!0,ls=t}};function Fv(t,e,n,r,i,o,a,s,l){yo=!1,ls=null,Lv.apply(Bv,arguments)}function Uv(t,e,n,r,i,o,a,s,l){if(Fv.apply(this,arguments),yo){if(yo){var c=ls;yo=!1,ls=null}else throw Error(K(198));cs||(cs=!0,Vc=c)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pf(t){if(Yr(t)!==t)throw Error(K(188))}function $v(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Pf(i),t;if(o===r)return Pf(i),e;o=o.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function M1(t){return t=$v(t),t!==null?L1(t):null}function L1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L1(t);if(e!==null)return e;t=t.sibling}return null}var B1=$t.unstable_scheduleCallback,jf=$t.unstable_cancelCallback,Hv=$t.unstable_shouldYield,Vv=$t.unstable_requestPaint,He=$t.unstable_now,zv=$t.unstable_getCurrentPriorityLevel,ud=$t.unstable_ImmediatePriority,F1=$t.unstable_UserBlockingPriority,us=$t.unstable_NormalPriority,Wv=$t.unstable_LowPriority,U1=$t.unstable_IdlePriority,Ks=null,En=null;function Gv(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Ks,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Qv,Xv=Math.log,Kv=Math.LN2;function Qv(t){return t>>>=0,t===0?32:31-(Xv(t)/Kv|0)|0}var va=64,xa=4194304;function ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ds(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=ho(s):(o&=a,o!==0&&(r=ho(o)))}else a=n&~i,a!==0?r=ho(a):o!==0&&(r=ho(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function Yv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-cn(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=Yv(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function zc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $1(){var t=va;return va<<=1,!(va&4194240)&&(va=64),t}function Ml(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function Zv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function dd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function H1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var V1,fd,z1,W1,G1,Wc=!1,ya=[],er=null,tr=null,nr=null,Ro=new Map,Do=new Map,Gn=[],Jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mf(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function eo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=na(e),e!==null&&fd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ex(t,e,n,r,i){switch(e){case"focusin":return er=eo(er,t,e,n,r,i),!0;case"dragenter":return tr=eo(tr,t,e,n,r,i),!0;case"mouseover":return nr=eo(nr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ro.set(o,eo(Ro.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Do.set(o,eo(Do.get(o)||null,t,e,n,r,i)),!0}return!1}function X1(t){var e=jr(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=j1(n),e!==null){t.blockedOn=e,G1(t.priority,function(){z1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uc=r,n.target.dispatchEvent(r),Uc=null}else return e=na(n),e!==null&&fd(e),t.blockedOn=n,!1;e.shift()}return!0}function Lf(t,e,n){$a(t)&&n.delete(e)}function tx(){Wc=!1,er!==null&&$a(er)&&(er=null),tr!==null&&$a(tr)&&(tr=null),nr!==null&&$a(nr)&&(nr=null),Ro.forEach(Lf),Do.forEach(Lf)}function to(t,e){t.blockedOn===e&&(t.blockedOn=null,Wc||(Wc=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,tx)))}function Po(t){function e(i){return to(i,t)}if(0<ya.length){to(ya[0],t);for(var n=1;n<ya.length;n++){var r=ya[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&to(er,t),tr!==null&&to(tr,t),nr!==null&&to(nr,t),Ro.forEach(e),Do.forEach(e),n=0;n<Gn.length;n++)r=Gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gn.length&&(n=Gn[0],n.blockedOn===null);)X1(n),n.blockedOn===null&&Gn.shift()}var _i=Fn.ReactCurrentBatchConfig,fs=!0;function nx(t,e,n,r){var i=Ce,o=_i.transition;_i.transition=null;try{Ce=1,hd(t,e,n,r)}finally{Ce=i,_i.transition=o}}function rx(t,e,n,r){var i=Ce,o=_i.transition;_i.transition=null;try{Ce=4,hd(t,e,n,r)}finally{Ce=i,_i.transition=o}}function hd(t,e,n,r){if(fs){var i=Gc(t,e,n,r);if(i===null)Gl(t,e,r,hs,n),Mf(t,r);else if(ex(i,t,e,n,r))r.stopPropagation();else if(Mf(t,r),e&4&&-1<Jv.indexOf(t)){for(;i!==null;){var o=na(i);if(o!==null&&V1(o),o=Gc(t,e,n,r),o===null&&Gl(t,e,r,hs,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Gl(t,e,r,null,n)}}var hs=null;function Gc(t,e,n,r){if(hs=null,t=cd(r),t=jr(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hs=t,null}function K1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zv()){case ud:return 1;case F1:return 4;case us:case Wv:return 16;case U1:return 536870912;default:return 16}default:return 16}}var Qn=null,gd=null,Ha=null;function Q1(){if(Ha)return Ha;var t,e=gd,n=e.length,r,i="value"in Qn?Qn.value:Qn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Ha=i.slice(t,1<r?1-r:void 0)}function Va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wa(){return!0}function Bf(){return!1}function Vt(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wa:Bf,this.isPropagationStopped=Bf,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=Vt(Vi),ta=Fe({},Vi,{view:0,detail:0}),ix=Vt(ta),Ll,Bl,no,Qs=Fe({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==no&&(no&&t.type==="mousemove"?(Ll=t.screenX-no.screenX,Bl=t.screenY-no.screenY):Bl=Ll=0,no=t),Ll)},movementY:function(t){return"movementY"in t?t.movementY:Bl}}),Ff=Vt(Qs),ox=Fe({},Qs,{dataTransfer:0}),ax=Vt(ox),sx=Fe({},ta,{relatedTarget:0}),Fl=Vt(sx),lx=Fe({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),cx=Vt(lx),ux=Fe({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dx=Vt(ux),fx=Fe({},Vi,{data:0}),Uf=Vt(fx),hx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},px={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=px[t])?!!e[t]:!1}function md(){return mx}var vx=Fe({},ta,{key:function(t){if(t.key){var e=hx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(t){return t.type==="keypress"?Va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xx=Vt(vx),yx=Fe({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=Vt(yx),wx=Fe({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),_x=Vt(wx),Ex=Fe({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cx=Vt(Ex),Sx=Fe({},Qs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=Vt(Sx),Ax=[9,13,27,32],vd=Pn&&"CompositionEvent"in window,wo=null;Pn&&"documentMode"in document&&(wo=document.documentMode);var Nx=Pn&&"TextEvent"in window&&!wo,Y1=Pn&&(!vd||wo&&8<wo&&11>=wo),Hf=String.fromCharCode(32),Vf=!1;function q1(t,e){switch(t){case"keyup":return Ax.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function Tx(t,e){switch(t){case"compositionend":return Z1(e);case"keypress":return e.which!==32?null:(Vf=!0,Hf);case"textInput":return t=e.data,t===Hf&&Vf?null:t;default:return null}}function Ix(t,e){if(ri)return t==="compositionend"||!vd&&q1(t,e)?(t=Q1(),Ha=gd=Qn=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y1&&e.locale!=="ko"?null:e.data;default:return null}}var Ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ox[t.type]:e==="textarea"}function J1(t,e,n,r){O1(r),e=gs(e,"onChange"),0<e.length&&(n=new pd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _o=null,jo=null;function kx(t){ug(t,0)}function Ys(t){var e=ai(t);if(C1(e))return t}function Rx(t,e){if(t==="change")return e}var eg=!1;if(Pn){var Ul;if(Pn){var $l="oninput"in document;if(!$l){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),$l=typeof Wf.oninput=="function"}Ul=$l}else Ul=!1;eg=Ul&&(!document.documentMode||9<document.documentMode)}function Gf(){_o&&(_o.detachEvent("onpropertychange",tg),jo=_o=null)}function tg(t){if(t.propertyName==="value"&&Ys(jo)){var e=[];J1(e,jo,t,cd(t)),P1(kx,e)}}function Dx(t,e,n){t==="focusin"?(Gf(),_o=e,jo=n,_o.attachEvent("onpropertychange",tg)):t==="focusout"&&Gf()}function Px(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ys(jo)}function jx(t,e){if(t==="click")return Ys(e)}function Mx(t,e){if(t==="input"||t==="change")return Ys(e)}function Lx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:Lx;function Mo(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tc.call(e,i)||!fn(t[i],e[i]))return!1}return!0}function Xf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kf(t,e){var n=Xf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xf(n)}}function ng(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ng(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rg(){for(var t=window,e=ss();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ss(t.document)}return e}function xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bx(t){var e=rg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ng(n.ownerDocument.documentElement,n)){if(r!==null&&xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Kf(n,o);var a=Kf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fx=Pn&&"documentMode"in document&&11>=document.documentMode,ii=null,Xc=null,Eo=null,Kc=!1;function Qf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||ii==null||ii!==ss(r)||(r=ii,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eo&&Mo(Eo,r)||(Eo=r,r=gs(Xc,"onSelect"),0<r.length&&(e=new pd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function _a(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Hl={},ig={};Pn&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function qs(t){if(Hl[t])return Hl[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ig)return Hl[t]=e[n];return t}var og=qs("animationend"),ag=qs("animationiteration"),sg=qs("animationstart"),lg=qs("transitionend"),cg=new Map,Yf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){cg.set(t,e),Qr(e,[t])}for(var Vl=0;Vl<Yf.length;Vl++){var zl=Yf[Vl],Ux=zl.toLowerCase(),$x=zl[0].toUpperCase()+zl.slice(1);gr(Ux,"on"+$x)}gr(og,"onAnimationEnd");gr(ag,"onAnimationIteration");gr(sg,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(lg,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hx=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function qf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Uv(r,e,void 0,t),t.currentTarget=null}function ug(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;qf(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;qf(i,s,c),o=l}}}if(cs)throw t=Vc,cs=!1,Vc=null,t}function Oe(t,e){var n=e[Jc];n===void 0&&(n=e[Jc]=new Set);var r=t+"__bubble";n.has(r)||(dg(e,t,2,!1),n.add(r))}function Wl(t,e,n){var r=0;e&&(r|=4),dg(n,t,r,e)}var Ea="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Ea]){t[Ea]=!0,x1.forEach(function(n){n!=="selectionchange"&&(Hx.has(n)||Wl(n,!1,t),Wl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ea]||(e[Ea]=!0,Wl("selectionchange",!1,e))}}function dg(t,e,n,r){switch(K1(e)){case 1:var i=nx;break;case 4:i=rx;break;default:i=hd}n=i.bind(null,e,n,t),i=void 0,!Hc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=jr(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}P1(function(){var c=o,d=cd(n),f=[];e:{var h=cg.get(t);if(h!==void 0){var g=pd,p=t;switch(t){case"keypress":if(Va(n)===0)break e;case"keydown":case"keyup":g=xx;break;case"focusin":p="focus",g=Fl;break;case"focusout":p="blur",g=Fl;break;case"beforeblur":case"afterblur":g=Fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=_x;break;case og:case ag:case sg:g=cx;break;case lg:g=Cx;break;case"scroll":g=ix;break;case"wheel":g=bx;break;case"copy":case"cut":case"paste":g=dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$f}var m=(e&4)!==0,w=!m&&t==="scroll",x=m?h!==null?h+"Capture":null:h;m=[];for(var v=c,y;v!==null;){y=v;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,x!==null&&(E=ko(v,x),E!=null&&m.push(Bo(v,E,y)))),w)break;v=v.return}0<m.length&&(h=new g(h,p,null,n,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Uc&&(p=n.relatedTarget||n.fromElement)&&(jr(p)||p[jn]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=c,p=p?jr(p):null,p!==null&&(w=Yr(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=c),g!==p)){if(m=Ff,E="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=$f,E="onPointerLeave",x="onPointerEnter",v="pointer"),w=g==null?h:ai(g),y=p==null?h:ai(p),h=new m(E,v+"leave",g,n,d),h.target=w,h.relatedTarget=y,E=null,jr(d)===c&&(m=new m(x,v+"enter",p,n,d),m.target=y,m.relatedTarget=w,E=m),w=E,g&&p)t:{for(m=g,x=p,v=0,y=m;y;y=Jr(y))v++;for(y=0,E=x;E;E=Jr(E))y++;for(;0<v-y;)m=Jr(m),v--;for(;0<y-v;)x=Jr(x),y--;for(;v--;){if(m===x||x!==null&&m===x.alternate)break t;m=Jr(m),x=Jr(x)}m=null}else m=null;g!==null&&Zf(f,h,g,m,!1),p!==null&&w!==null&&Zf(f,w,p,m,!0)}}e:{if(h=c?ai(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=Rx;else if(zf(h))if(eg)b=Mx;else{b=Px;var I=Dx}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=jx);if(b&&(b=b(t,c))){J1(f,b,n,d);break e}I&&I(t,h,c),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&jc(h,"number",h.value)}switch(I=c?ai(c):window,t){case"focusin":(zf(I)||I.contentEditable==="true")&&(ii=I,Xc=c,Eo=null);break;case"focusout":Eo=Xc=ii=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Qf(f,n,d);break;case"selectionchange":if(Fx)break;case"keydown":case"keyup":Qf(f,n,d)}var T;if(vd)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ri?q1(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Y1&&n.locale!=="ko"&&(ri||_!=="onCompositionStart"?_==="onCompositionEnd"&&ri&&(T=Q1()):(Qn=d,gd="value"in Qn?Qn.value:Qn.textContent,ri=!0)),I=gs(c,_),0<I.length&&(_=new Uf(_,t,null,n,d),f.push({event:_,listeners:I}),T?_.data=T:(T=Z1(n),T!==null&&(_.data=T)))),(T=Nx?Tx(t,n):Ix(t,n))&&(c=gs(c,"onBeforeInput"),0<c.length&&(d=new Uf("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=T))}ug(f,e)})}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ko(t,n),o!=null&&r.unshift(Bo(t,o,i)),o=ko(t,e),o!=null&&r.push(Bo(t,o,i))),t=t.return}return r}function Jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zf(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=ko(n,o),l!=null&&a.unshift(Bo(n,l,s))):i||(l=ko(n,o),l!=null&&a.push(Bo(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Vx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function Jf(t){return(typeof t=="string"?t:""+t).replace(Vx,`
`).replace(zx,"")}function Ca(t,e,n){if(e=Jf(e),Jf(t)!==e&&n)throw Error(K(425))}function ps(){}var Qc=null,Yc=null;function qc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zc=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(t){return eh.resolve(null).then(t).catch(Xx)}:Zc;function Xx(t){setTimeout(function(){throw t})}function Xl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Po(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Po(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function th(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zi=Math.random().toString(36).slice(2),xn="__reactFiber$"+zi,Fo="__reactProps$"+zi,jn="__reactContainer$"+zi,Jc="__reactEvents$"+zi,Kx="__reactListeners$"+zi,Qx="__reactHandles$"+zi;function jr(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=th(t);t!==null;){if(n=t[xn])return n;t=th(t)}return e}t=n,n=t.parentNode}return null}function na(t){return t=t[xn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Zs(t){return t[Fo]||null}var eu=[],si=-1;function pr(t){return{current:t}}function De(t){0>si||(t.current=eu[si],eu[si]=null,si--)}function Ne(t,e){si++,eu[si]=t.current,t.current=e}var hr={},wt=pr(hr),Dt=pr(!1),Vr=hr;function Ni(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pt(t){return t=t.childContextTypes,t!=null}function ms(){De(Dt),De(wt)}function nh(t,e,n){if(wt.current!==hr)throw Error(K(168));Ne(wt,e),Ne(Dt,n)}function fg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,Dv(t)||"Unknown",i));return Fe({},n,r)}function vs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Vr=wt.current,Ne(wt,t),Ne(Dt,Dt.current),!0}function rh(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=fg(t,e,Vr),r.__reactInternalMemoizedMergedChildContext=t,De(Dt),De(wt),Ne(wt,t)):De(Dt),Ne(Dt,n)}var On=null,Js=!1,Kl=!1;function hg(t){On===null?On=[t]:On.push(t)}function Yx(t){Js=!0,hg(t)}function mr(){if(!Kl&&On!==null){Kl=!0;var t=0,e=Ce;try{var n=On;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Js=!1}catch(i){throw On!==null&&(On=On.slice(t+1)),B1(ud,mr),i}finally{Ce=e,Kl=!1}}return null}var li=[],ci=0,xs=null,ys=0,Gt=[],Xt=0,zr=null,kn=1,Rn="";function Or(t,e){li[ci++]=ys,li[ci++]=xs,xs=t,ys=e}function gg(t,e,n){Gt[Xt++]=kn,Gt[Xt++]=Rn,Gt[Xt++]=zr,zr=t;var r=kn;t=Rn;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var o=32-cn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,kn=1<<32-cn(e)+i|n<<i|r,Rn=o+t}else kn=1<<o|n<<i|r,Rn=t}function yd(t){t.return!==null&&(Or(t,1),gg(t,1,0))}function wd(t){for(;t===xs;)xs=li[--ci],li[ci]=null,ys=li[--ci],li[ci]=null;for(;t===zr;)zr=Gt[--Xt],Gt[Xt]=null,Rn=Gt[--Xt],Gt[Xt]=null,kn=Gt[--Xt],Gt[Xt]=null}var Ut=null,Ft=null,Pe=!1,an=null;function pg(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ih(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Ft=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zr!==null?{id:kn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Ft=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(Pe){var e=Ft;if(e){var n=e;if(!ih(t,e)){if(tu(t))throw Error(K(418));e=rr(n.nextSibling);var r=Ut;e&&ih(t,e)?pg(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Ut=t)}}else{if(tu(t))throw Error(K(418));t.flags=t.flags&-4097|2,Pe=!1,Ut=t}}}function oh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Sa(t){if(t!==Ut)return!1;if(!Pe)return oh(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qc(t.type,t.memoizedProps)),e&&(e=Ft)){if(tu(t))throw mg(),Error(K(418));for(;e;)pg(t,e),e=rr(e.nextSibling)}if(oh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Ut?rr(t.stateNode.nextSibling):null;return!0}function mg(){for(var t=Ft;t;)t=rr(t.nextSibling)}function Ti(){Ft=Ut=null,Pe=!1}function _d(t){an===null?an=[t]:an.push(t)}var qx=Fn.ReactCurrentBatchConfig;function ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ah(t){var e=t._init;return e(t._payload)}function vg(t){function e(x,v){if(t){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function i(x,v){return x=sr(x,v),x.index=0,x.sibling=null,x}function o(x,v,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function s(x,v,y,E){return v===null||v.tag!==6?(v=tc(y,x.mode,E),v.return=x,v):(v=i(v,y),v.return=x,v)}function l(x,v,y,E){var b=y.type;return b===ni?d(x,v,y.props.children,E,y.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Vn&&ah(b)===v.type)?(E=i(v,y.props),E.ref=ro(x,v,y),E.return=x,E):(E=Ya(y.type,y.key,y.props,null,x.mode,E),E.ref=ro(x,v,y),E.return=x,E)}function c(x,v,y,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=nc(y,x.mode,E),v.return=x,v):(v=i(v,y.children||[]),v.return=x,v)}function d(x,v,y,E,b){return v===null||v.tag!==7?(v=$r(y,x.mode,E,b),v.return=x,v):(v=i(v,y),v.return=x,v)}function f(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=tc(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ga:return y=Ya(v.type,v.key,v.props,null,x.mode,y),y.ref=ro(x,null,v),y.return=x,y;case ti:return v=nc(v,x.mode,y),v.return=x,v;case Vn:var E=v._init;return f(x,E(v._payload),y)}if(fo(v)||Zi(v))return v=$r(v,x.mode,y,null),v.return=x,v;ba(x,v)}return null}function h(x,v,y,E){var b=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:s(x,v,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ga:return y.key===b?l(x,v,y,E):null;case ti:return y.key===b?c(x,v,y,E):null;case Vn:return b=y._init,h(x,v,b(y._payload),E)}if(fo(y)||Zi(y))return b!==null?null:d(x,v,y,E,null);ba(x,y)}return null}function g(x,v,y,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(y)||null,s(v,x,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ga:return x=x.get(E.key===null?y:E.key)||null,l(v,x,E,b);case ti:return x=x.get(E.key===null?y:E.key)||null,c(v,x,E,b);case Vn:var I=E._init;return g(x,v,y,I(E._payload),b)}if(fo(E)||Zi(E))return x=x.get(y)||null,d(v,x,E,b,null);ba(v,E)}return null}function p(x,v,y,E){for(var b=null,I=null,T=v,_=v=0,k=null;T!==null&&_<y.length;_++){T.index>_?(k=T,T=null):k=T.sibling;var O=h(x,T,y[_],E);if(O===null){T===null&&(T=k);break}t&&T&&O.alternate===null&&e(x,T),v=o(O,v,_),I===null?b=O:I.sibling=O,I=O,T=k}if(_===y.length)return n(x,T),Pe&&Or(x,_),b;if(T===null){for(;_<y.length;_++)T=f(x,y[_],E),T!==null&&(v=o(T,v,_),I===null?b=T:I.sibling=T,I=T);return Pe&&Or(x,_),b}for(T=r(x,T);_<y.length;_++)k=g(T,x,_,y[_],E),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?_:k.key),v=o(k,v,_),I===null?b=k:I.sibling=k,I=k);return t&&T.forEach(function(j){return e(x,j)}),Pe&&Or(x,_),b}function m(x,v,y,E){var b=Zi(y);if(typeof b!="function")throw Error(K(150));if(y=b.call(y),y==null)throw Error(K(151));for(var I=b=null,T=v,_=v=0,k=null,O=y.next();T!==null&&!O.done;_++,O=y.next()){T.index>_?(k=T,T=null):k=T.sibling;var j=h(x,T,O.value,E);if(j===null){T===null&&(T=k);break}t&&T&&j.alternate===null&&e(x,T),v=o(j,v,_),I===null?b=j:I.sibling=j,I=j,T=k}if(O.done)return n(x,T),Pe&&Or(x,_),b;if(T===null){for(;!O.done;_++,O=y.next())O=f(x,O.value,E),O!==null&&(v=o(O,v,_),I===null?b=O:I.sibling=O,I=O);return Pe&&Or(x,_),b}for(T=r(x,T);!O.done;_++,O=y.next())O=g(T,x,_,O.value,E),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?_:O.key),v=o(O,v,_),I===null?b=O:I.sibling=O,I=O);return t&&T.forEach(function(R){return e(x,R)}),Pe&&Or(x,_),b}function w(x,v,y,E){if(typeof y=="object"&&y!==null&&y.type===ni&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ga:e:{for(var b=y.key,I=v;I!==null;){if(I.key===b){if(b=y.type,b===ni){if(I.tag===7){n(x,I.sibling),v=i(I,y.props.children),v.return=x,x=v;break e}}else if(I.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Vn&&ah(b)===I.type){n(x,I.sibling),v=i(I,y.props),v.ref=ro(x,I,y),v.return=x,x=v;break e}n(x,I);break}else e(x,I);I=I.sibling}y.type===ni?(v=$r(y.props.children,x.mode,E,y.key),v.return=x,x=v):(E=Ya(y.type,y.key,y.props,null,x.mode,E),E.ref=ro(x,v,y),E.return=x,x=E)}return a(x);case ti:e:{for(I=y.key;v!==null;){if(v.key===I)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=i(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=nc(y,x.mode,E),v.return=x,x=v}return a(x);case Vn:return I=y._init,w(x,v,I(y._payload),E)}if(fo(y))return p(x,v,y,E);if(Zi(y))return m(x,v,y,E);ba(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=i(v,y),v.return=x,x=v):(n(x,v),v=tc(y,x.mode,E),v.return=x,x=v),a(x)):n(x,v)}return w}var Ii=vg(!0),xg=vg(!1),ws=pr(null),_s=null,ui=null,Ed=null;function Cd(){Ed=ui=_s=null}function Sd(t){var e=ws.current;De(ws),t._currentValue=e}function ru(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ei(t,e){_s=t,Ed=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Ed!==t)if(t={context:t,memoizedValue:e,next:null},ui===null){if(_s===null)throw Error(K(308));ui=t,_s.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return e}var Mr=null;function bd(t){Mr===null?Mr=[t]:Mr.push(t)}function yg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zn=!1;function Ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mn(t,n)}return i=r.interleaved,i===null?(e.next=e,bd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mn(t,n)}function za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}function sh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Es(t,e,n,r){var i=t.updateQueue;zn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;a=0,d=c=l=null,s=o;do{var h=s.lane,g=s.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,m=s;switch(h=e,g=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(g,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(g,f,h):p,h==null)break e;f=Fe({},f,h);break e;case 2:zn=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Gr|=a,t.lanes=a,t.memoizedState=f}}function lh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var ra={},Cn=pr(ra),Uo=pr(ra),$o=pr(ra);function Lr(t){if(t===ra)throw Error(K(174));return t}function Nd(t,e){switch(Ne($o,e),Ne(Uo,t),Ne(Cn,ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lc(e,t)}De(Cn),Ne(Cn,e)}function Oi(){De(Cn),De(Uo),De($o)}function _g(t){Lr($o.current);var e=Lr(Cn.current),n=Lc(e,t.type);e!==n&&(Ne(Uo,t),Ne(Cn,n))}function Td(t){Uo.current===t&&(De(Cn),De(Uo))}var Le=pr(0);function Cs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ql=[];function Id(){for(var t=0;t<Ql.length;t++)Ql[t]._workInProgressVersionPrimary=null;Ql.length=0}var Wa=Fn.ReactCurrentDispatcher,Yl=Fn.ReactCurrentBatchConfig,Wr=0,Be=null,Qe=null,rt=null,Ss=!1,Co=!1,Ho=0,Zx=0;function pt(){throw Error(K(321))}function Od(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function kd(t,e,n,r,i,o){if(Wr=o,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wa.current=t===null||t.memoizedState===null?n2:r2,t=n(r,i),Co){o=0;do{if(Co=!1,Ho=0,25<=o)throw Error(K(301));o+=1,rt=Qe=null,e.updateQueue=null,Wa.current=i2,t=n(r,i)}while(Co)}if(Wa.current=bs,e=Qe!==null&&Qe.next!==null,Wr=0,rt=Qe=Be=null,Ss=!1,e)throw Error(K(300));return t}function Rd(){var t=Ho!==0;return Ho=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Be.memoizedState=rt=t:rt=rt.next=t,rt}function Jt(){if(Qe===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Be.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(K(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Be.memoizedState=rt=t:rt=rt.next=t}return rt}function Vo(t,e){return typeof e=="function"?e(t):e}function ql(t){var e=Jt(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var d=c.lane;if((Wr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,a=r):l=l.next=f,Be.lanes|=d,Gr|=d}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,fn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Be.lanes|=o,Gr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zl(t){var e=Jt(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);fn(o,e.memoizedState)||(Rt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Eg(){}function Cg(t,e){var n=Be,r=Jt(),i=e(),o=!fn(r.memoizedState,i);if(o&&(r.memoizedState=i,Rt=!0),r=r.queue,Dd(Ag.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,zo(9,bg.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(K(349));Wr&30||Sg(n,e,i)}return i}function Sg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bg(t,e,n,r){e.value=n,e.getSnapshot=r,Ng(e)&&Tg(t)}function Ag(t,e,n){return n(function(){Ng(e)&&Tg(t)})}function Ng(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function Tg(t){var e=Mn(t,1);e!==null&&un(e,t,1,-1)}function ch(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},e.queue=t,t=t.dispatch=t2.bind(null,Be,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ig(){return Jt().memoizedState}function Ga(t,e,n,r){var i=vn();Be.flags|=t,i.memoizedState=zo(1|e,n,void 0,r===void 0?null:r)}function el(t,e,n,r){var i=Jt();r=r===void 0?null:r;var o=void 0;if(Qe!==null){var a=Qe.memoizedState;if(o=a.destroy,r!==null&&Od(r,a.deps)){i.memoizedState=zo(e,n,o,r);return}}Be.flags|=t,i.memoizedState=zo(1|e,n,o,r)}function uh(t,e){return Ga(8390656,8,t,e)}function Dd(t,e){return el(2048,8,t,e)}function Og(t,e){return el(4,2,t,e)}function kg(t,e){return el(4,4,t,e)}function Rg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dg(t,e,n){return n=n!=null?n.concat([t]):null,el(4,4,Rg.bind(null,e,t),n)}function Pd(){}function Pg(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jg(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mg(t,e,n){return Wr&21?(fn(n,e)||(n=$1(),Be.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function Jx(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Yl.transition;Yl.transition={};try{t(!1),e()}finally{Ce=n,Yl.transition=r}}function Lg(){return Jt().memoizedState}function e2(t,e,n){var r=ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bg(t))Fg(e,n);else if(n=yg(t,e,n,r),n!==null){var i=At();un(n,t,r,i),Ug(n,e,r)}}function t2(t,e,n){var r=ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bg(t))Fg(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,fn(s,a)){var l=e.interleaved;l===null?(i.next=i,bd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=yg(t,e,i,r),n!==null&&(i=At(),un(n,t,r,i),Ug(n,e,r))}}function Bg(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function Fg(t,e){Co=Ss=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ug(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}var bs={readContext:Zt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},n2={readContext:Zt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:uh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ga(4194308,4,Rg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ga(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=e2.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:ch,useDebugValue:Pd,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=ch(!1),e=t[0];return t=Jx.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,i=vn();if(Pe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),ot===null)throw Error(K(349));Wr&30||Sg(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,uh(Ag.bind(null,r,o,t),[t]),r.flags|=2048,zo(9,bg.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=vn(),e=ot.identifierPrefix;if(Pe){var n=Rn,r=kn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r2={readContext:Zt,useCallback:Pg,useContext:Zt,useEffect:Dd,useImperativeHandle:Dg,useInsertionEffect:Og,useLayoutEffect:kg,useMemo:jg,useReducer:ql,useRef:Ig,useState:function(){return ql(Vo)},useDebugValue:Pd,useDeferredValue:function(t){var e=Jt();return Mg(e,Qe.memoizedState,t)},useTransition:function(){var t=ql(Vo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Cg,useId:Lg,unstable_isNewReconciler:!1},i2={readContext:Zt,useCallback:Pg,useContext:Zt,useEffect:Dd,useImperativeHandle:Dg,useInsertionEffect:Og,useLayoutEffect:kg,useMemo:jg,useReducer:Zl,useRef:Ig,useState:function(){return Zl(Vo)},useDebugValue:Pd,useDeferredValue:function(t){var e=Jt();return Qe===null?e.memoizedState=t:Mg(e,Qe.memoizedState,t)},useTransition:function(){var t=Zl(Vo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Cg,useId:Lg,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function iu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tl={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),i=ar(t),o=Dn(r,i);o.payload=e,n!=null&&(o.callback=n),e=ir(t,o,i),e!==null&&(un(e,t,i,r),za(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),i=ar(t),o=Dn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ir(t,o,i),e!==null&&(un(e,t,i,r),za(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=ar(t),i=Dn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ir(t,i,r),e!==null&&(un(e,t,r,n),za(e,t,r))}};function dh(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Mo(n,r)||!Mo(i,o):!0}function $g(t,e,n){var r=!1,i=hr,o=e.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(i=Pt(e)?Vr:wt.current,r=e.contextTypes,o=(r=r!=null)?Ni(t,i):hr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function fh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tl.enqueueReplaceState(e,e.state,null)}function ou(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ad(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Zt(o):(o=Pt(e)?Vr:wt.current,i.context=Ni(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(iu(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tl.enqueueReplaceState(i,i.state,null),Es(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=Rv(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Jl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function au(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o2=typeof WeakMap=="function"?WeakMap:Map;function Hg(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ns||(Ns=!0,mu=r),au(t,e)},n}function Vg(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){au(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){au(t,e),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function hh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=y2.bind(null,t,e,n),e.then(t,t))}function gh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ph(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,ir(n,e,1))),n.lanes|=1),t)}var a2=Fn.ReactCurrentOwner,Rt=!1;function bt(t,e,n,r){e.child=t===null?xg(e,null,n,r):Ii(e,t.child,n,r)}function mh(t,e,n,r,i){n=n.render;var o=e.ref;return Ei(e,i),r=kd(t,e,n,r,o,i),n=Rd(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Pe&&n&&yd(e),e.flags|=1,bt(t,e,r,i),e.child)}function vh(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Hd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,zg(t,e,o,r,i)):(t=Ya(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Mo,n(a,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=sr(o,r),t.ref=e.ref,t.return=e,e.child=t}function zg(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Mo(o,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return su(t,e,n,r,i)}function Wg(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(fi,Bt),Bt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(fi,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(fi,Bt),Bt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ne(fi,Bt),Bt|=r;return bt(t,e,i,n),e.child}function Gg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function su(t,e,n,r,i){var o=Pt(n)?Vr:wt.current;return o=Ni(e,o),Ei(e,i),n=kd(t,e,n,r,o,i),r=Rd(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Pe&&r&&yd(e),e.flags|=1,bt(t,e,n,i),e.child)}function xh(t,e,n,r,i){if(Pt(n)){var o=!0;vs(e)}else o=!1;if(Ei(e,i),e.stateNode===null)Xa(t,e),$g(e,n,r),ou(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=Pt(n)?Vr:wt.current,c=Ni(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&fh(e,a,r,c),zn=!1;var h=e.memoizedState;a.state=h,Es(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Dt.current||zn?(typeof d=="function"&&(iu(e,n,d,r),l=e.memoizedState),(s=zn||dh(e,n,s,r,h,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,wg(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:rn(e.type,s),a.props=c,f=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zt(l):(l=Pt(n)?Vr:wt.current,l=Ni(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&fh(e,a,r,l),zn=!1,h=e.memoizedState,a.state=h,Es(e,r,a,i);var p=e.memoizedState;s!==f||h!==p||Dt.current||zn?(typeof g=="function"&&(iu(e,n,g,r),p=e.memoizedState),(c=zn||dh(e,n,c,r,h,p,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return lu(t,e,n,r,o,i)}function lu(t,e,n,r,i,o){Gg(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&rh(e,n,!1),Ln(t,e,o);r=e.stateNode,a2.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ii(e,t.child,null,o),e.child=Ii(e,null,s,o)):bt(t,e,s,o),e.memoizedState=r.state,i&&rh(e,n,!0),e.child}function Xg(t){var e=t.stateNode;e.pendingContext?nh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nh(t,e.context,!1),Nd(t,e.containerInfo)}function yh(t,e,n,r,i){return Ti(),_d(i),e.flags|=256,bt(t,e,n,r),e.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kg(t,e,n){var r=e.pendingProps,i=Le.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Le,i&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=il(a,r,0,null),t=$r(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=uu(n),e.memoizedState=cu,t):jd(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return s2(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=sr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=sr(s,o):(o=$r(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?uu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=cu,r}return o=t.child,t=o.sibling,r=sr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jd(t,e){return e=il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Aa(t,e,n,r){return r!==null&&_d(r),Ii(e,t.child,null,n),t=jd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s2(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Jl(Error(K(422))),Aa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=il({mode:"visible",children:r.children},i,0,null),o=$r(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ii(e,t.child,null,a),e.child.memoizedState=uu(a),e.memoizedState=cu,o);if(!(e.mode&1))return Aa(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(K(419)),r=Jl(o,r,void 0),Aa(t,e,a,r)}if(s=(a&t.childLanes)!==0,Rt||s){if(r=ot,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mn(t,i),un(r,t,i,-1))}return $d(),r=Jl(Error(K(421))),Aa(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=w2.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ft=rr(i.nextSibling),Ut=e,Pe=!0,an=null,t!==null&&(Gt[Xt++]=kn,Gt[Xt++]=Rn,Gt[Xt++]=zr,kn=t.id,Rn=t.overflow,zr=e),e=jd(e,r.children),e.flags|=4096,e)}function wh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ru(t.return,e,n)}function ec(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Qg(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wh(t,n,e);else if(t.tag===19)wh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ec(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ec(e,!0,n,null,o);break;case"together":ec(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function l2(t,e,n){switch(e.tag){case 3:Xg(e),Ti();break;case 5:_g(e);break;case 1:Pt(e.type)&&vs(e);break;case 4:Nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(ws,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?Kg(t,e,n):(Ne(Le,Le.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);Ne(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,Wg(t,e,n)}return Ln(t,e,n)}var Yg,du,qg,Zg;Yg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};qg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lr(Cn.current);var o=null;switch(n){case"input":i=Dc(t,i),r=Dc(t,r),o=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),o=[];break;case"textarea":i=Mc(t,i),r=Mc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ps)}Bc(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Io.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Io.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Zg=function(t,e,n,r){n!==r&&(e.flags|=4)};function io(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function c2(t,e,n){var r=e.pendingProps;switch(wd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Pt(e.type)&&ms(),mt(e),null;case 3:return r=e.stateNode,Oi(),De(Dt),De(wt),Id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(yu(an),an=null))),du(t,e),mt(e),null;case 5:Td(e);var i=Lr($o.current);if(n=e.type,t!==null&&e.stateNode!=null)qg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return mt(e),null}if(t=Lr(Cn.current),Sa(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[xn]=e,r[Fo]=o,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<go.length;i++)Oe(go[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":If(r,o),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oe("invalid",r);break;case"textarea":kf(r,o),Oe("invalid",r)}Bc(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Ca(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Ca(r.textContent,s,t),i=["children",""+s]):Io.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Oe("scroll",r)}switch(n){case"input":pa(r),Of(r,o,!0);break;case"textarea":pa(r),Rf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ps)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[xn]=e,t[Fo]=r,Yg(t,e,!1,!1),e.stateNode=t;e:{switch(a=Fc(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<go.length;i++)Oe(go[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":If(t,r),i=Dc(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":kf(t,r),i=Mc(t,r),Oe("invalid",t);break;default:i=r}Bc(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?I1(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&N1(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oo(t,l):typeof l=="number"&&Oo(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Io.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Oe("scroll",t):l!=null&&od(t,o,l,a))}switch(n){case"input":pa(t),Of(t,r,!1);break;case"textarea":pa(t),Rf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?xi(t,!!r.multiple,o,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ps)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Zg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Lr($o.current),Lr(Cn.current),Sa(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(o=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:Ca(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return mt(e),null;case 13:if(De(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Ft!==null&&e.mode&1&&!(e.flags&128))mg(),Ti(),e.flags|=98560,o=!1;else if(o=Sa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[xn]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else an!==null&&(yu(an),an=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Je===0&&(Je=3):$d())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Oi(),du(t,e),t===null&&Lo(e.stateNode.containerInfo),mt(e),null;case 10:return Sd(e.type._context),mt(e),null;case 17:return Pt(e.type)&&ms(),mt(e),null;case 19:if(De(Le),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)io(o,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Cs(t),a!==null){for(e.flags|=128,io(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Le,Le.current&1|2),e.child}t=t.sibling}o.tail!==null&&He()>Ri&&(e.flags|=128,r=!0,io(o,!1),e.lanes=4194304)}else{if(!r)if(t=Cs(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),io(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Pe)return mt(e),null}else 2*He()-o.renderingStartTime>Ri&&n!==1073741824&&(e.flags|=128,r=!0,io(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=He(),e.sibling=null,n=Le.current,Ne(Le,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Ud(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function u2(t,e){switch(wd(e),e.tag){case 1:return Pt(e.type)&&ms(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),De(Dt),De(wt),Id(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Td(e),null;case 13:if(De(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Le),null;case 4:return Oi(),null;case 10:return Sd(e.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var Na=!1,xt=!1,d2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function fu(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var _h=!1;function f2(t,e){if(Qc=fs,t=rg(),xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===t)break t;if(h===n&&++c===i&&(s=a),h===o&&++d===r&&(l=a),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:t,selectionRange:n},fs=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?m:rn(e.type,m),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(E){Ue(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return p=_h,_h=!1,p}function So(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&fu(e,n,o)}i=i.next}while(i!==r)}}function nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jg(t){var e=t.alternate;e!==null&&(t.alternate=null,Jg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[Fo],delete e[Jc],delete e[Kx],delete e[Qx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ep(t){return t.tag===5||t.tag===3||t.tag===4}function Eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ps));else if(r!==4&&(t=t.child,t!==null))for(gu(t,e,n),t=t.sibling;t!==null;)gu(t,e,n),t=t.sibling}function pu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pu(t,e,n),t=t.sibling;t!==null;)pu(t,e,n),t=t.sibling}var ut=null,on=!1;function Un(t,e,n){for(n=n.child;n!==null;)tp(t,e,n),n=n.sibling}function tp(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:xt||di(n,e);case 6:var r=ut,i=on;ut=null,Un(t,e,n),ut=r,on=i,ut!==null&&(on?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(on?(t=ut,n=n.stateNode,t.nodeType===8?Xl(t.parentNode,n):t.nodeType===1&&Xl(t,n),Po(t)):Xl(ut,n.stateNode));break;case 4:r=ut,i=on,ut=n.stateNode.containerInfo,on=!0,Un(t,e,n),ut=r,on=i;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&fu(n,e,a),i=i.next}while(i!==r)}Un(t,e,n);break;case 1:if(!xt&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ue(n,e,s)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Un(t,e,n),xt=r):Un(t,e,n);break;default:Un(t,e,n)}}function Ch(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new d2),e.forEach(function(r){var i=_2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:ut=s.stateNode,on=!1;break e;case 3:ut=s.stateNode.containerInfo,on=!0;break e;case 4:ut=s.stateNode.containerInfo,on=!0;break e}s=s.return}if(ut===null)throw Error(K(160));tp(o,a,i),ut=null,on=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ue(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)np(e,t),e=e.sibling}function np(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),pn(t),r&4){try{So(3,t,t.return),nl(3,t)}catch(m){Ue(t,t.return,m)}try{So(5,t,t.return)}catch(m){Ue(t,t.return,m)}}break;case 1:tn(e,t),pn(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(tn(e,t),pn(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var i=t.stateNode;try{Oo(i,"")}catch(m){Ue(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&S1(i,o),Fc(s,a);var c=Fc(s,o);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?I1(i,f):d==="dangerouslySetInnerHTML"?N1(i,f):d==="children"?Oo(i,f):od(i,d,f,c)}switch(s){case"input":Pc(i,o);break;case"textarea":b1(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?xi(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?xi(i,!!o.multiple,o.defaultValue,!0):xi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Fo]=o}catch(m){Ue(t,t.return,m)}}break;case 6:if(tn(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Ue(t,t.return,m)}}break;case 3:if(tn(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Po(e.containerInfo)}catch(m){Ue(t,t.return,m)}break;case 4:tn(e,t),pn(t);break;case 13:tn(e,t),pn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Bd=He())),r&4&&Ch(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(c=xt)||d,tn(e,t),xt=c):tn(e,t),pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(f=ee=d;ee!==null;){switch(h=ee,g=h.child,h.tag){case 0:case 11:case 14:case 15:So(4,h,h.return);break;case 1:di(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ue(r,n,m)}}break;case 5:di(h,h.return);break;case 22:if(h.memoizedState!==null){bh(f);continue}}g!==null?(g.return=h,ee=g):bh(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=T1("display",a))}catch(m){Ue(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Ue(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tn(e,t),pn(t),r&4&&Ch(t);break;case 21:break;default:tn(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ep(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Oo(i,""),r.flags&=-33);var o=Eh(t);pu(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Eh(t);gu(t,s,a);break;default:throw Error(K(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h2(t,e,n){ee=t,rp(t)}function rp(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Na;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||xt;s=Na;var c=xt;if(Na=a,(xt=l)&&!c)for(ee=i;ee!==null;)a=ee,l=a.child,a.tag===22&&a.memoizedState!==null?Ah(i):l!==null?(l.return=a,ee=l):Ah(i);for(;o!==null;)ee=o,rp(o),o=o.sibling;ee=i,Na=s,xt=c}Sh(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ee=o):Sh(t)}}function Sh(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lh(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lh(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Po(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}xt||e.flags&512&&hu(e)}catch(h){Ue(e,e.return,h)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function bh(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Ah(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nl(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ue(e,i,l)}}var o=e.return;try{hu(e)}catch(l){Ue(e,o,l)}break;case 5:var a=e.return;try{hu(e)}catch(l){Ue(e,a,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){ee=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ee=s;break}ee=e.return}}var g2=Math.ceil,As=Fn.ReactCurrentDispatcher,Md=Fn.ReactCurrentOwner,Yt=Fn.ReactCurrentBatchConfig,pe=0,ot=null,ze=null,ft=0,Bt=0,fi=pr(0),Je=0,Wo=null,Gr=0,rl=0,Ld=0,bo=null,Ot=null,Bd=0,Ri=1/0,In=null,Ns=!1,mu=null,or=null,Ta=!1,Yn=null,Ts=0,Ao=0,vu=null,Ka=-1,Qa=0;function At(){return pe&6?He():Ka!==-1?Ka:Ka=He()}function ar(t){return t.mode&1?pe&2&&ft!==0?ft&-ft:qx.transition!==null?(Qa===0&&(Qa=$1()),Qa):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:K1(t.type)),t):1}function un(t,e,n,r){if(50<Ao)throw Ao=0,vu=null,Error(K(185));ea(t,n,r),(!(pe&2)||t!==ot)&&(t===ot&&(!(pe&2)&&(rl|=n),Je===4&&Xn(t,ft)),jt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Ri=He()+500,Js&&mr()))}function jt(t,e){var n=t.callbackNode;qv(t,e);var r=ds(t,t===ot?ft:0);if(r===0)n!==null&&jf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jf(n),e===1)t.tag===0?Yx(Nh.bind(null,t)):hg(Nh.bind(null,t)),Gx(function(){!(pe&6)&&mr()}),n=null;else{switch(H1(r)){case 1:n=ud;break;case 4:n=F1;break;case 16:n=us;break;case 536870912:n=U1;break;default:n=us}n=dp(n,ip.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ip(t,e){if(Ka=-1,Qa=0,pe&6)throw Error(K(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=ds(t,t===ot?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Is(t,r);else{e=r;var i=pe;pe|=2;var o=ap();(ot!==t||ft!==e)&&(In=null,Ri=He()+500,Ur(t,e));do try{v2();break}catch(s){op(t,s)}while(1);Cd(),As.current=o,pe=i,ze!==null?e=0:(ot=null,ft=0,e=Je)}if(e!==0){if(e===2&&(i=zc(t),i!==0&&(r=i,e=xu(t,i))),e===1)throw n=Wo,Ur(t,0),Xn(t,r),jt(t,He()),n;if(e===6)Xn(t,r);else{if(i=t.current.alternate,!(r&30)&&!p2(i)&&(e=Is(t,r),e===2&&(o=zc(t),o!==0&&(r=o,e=xu(t,o))),e===1))throw n=Wo,Ur(t,0),Xn(t,r),jt(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:kr(t,Ot,In);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=Bd+500-He(),10<e)){if(ds(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zc(kr.bind(null,t,Ot,In),e);break}kr(t,Ot,In);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-cn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g2(r/1960))-r,10<r){t.timeoutHandle=Zc(kr.bind(null,t,Ot,In),r);break}kr(t,Ot,In);break;case 5:kr(t,Ot,In);break;default:throw Error(K(329))}}}return jt(t,He()),t.callbackNode===n?ip.bind(null,t):null}function xu(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(Ur(t,e).flags|=256),t=Is(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&yu(e)),t}function yu(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function p2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!fn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~Ld,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function Nh(t){if(pe&6)throw Error(K(327));Ci();var e=ds(t,0);if(!(e&1))return jt(t,He()),null;var n=Is(t,e);if(t.tag!==0&&n===2){var r=zc(t);r!==0&&(e=r,n=xu(t,r))}if(n===1)throw n=Wo,Ur(t,0),Xn(t,e),jt(t,He()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,Ot,In),jt(t,He()),null}function Fd(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Ri=He()+500,Js&&mr())}}function Xr(t){Yn!==null&&Yn.tag===0&&!(pe&6)&&Ci();var e=pe;pe|=1;var n=Yt.transition,r=Ce;try{if(Yt.transition=null,Ce=1,t)return t()}finally{Ce=r,Yt.transition=n,pe=e,!(pe&6)&&mr()}}function Ud(){Bt=fi.current,De(fi)}function Ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wx(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ms();break;case 3:Oi(),De(Dt),De(wt),Id();break;case 5:Td(r);break;case 4:Oi();break;case 13:De(Le);break;case 19:De(Le);break;case 10:Sd(r.type._context);break;case 22:case 23:Ud()}n=n.return}if(ot=t,ze=t=sr(t.current,null),ft=Bt=e,Je=0,Wo=null,Ld=rl=Gr=0,Ot=bo=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Mr=null}return t}function op(t,e){do{var n=ze;try{if(Cd(),Wa.current=bs,Ss){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ss=!1}if(Wr=0,rt=Qe=Be=null,Co=!1,Ho=0,Md.current=null,n===null||n.return===null){Je=1,Wo=e,ze=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=ft,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=gh(a);if(g!==null){g.flags&=-257,ph(g,a,s,o,e),g.mode&1&&hh(o,c,e),e=g,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){hh(o,c,e),$d();break e}l=Error(K(426))}}else if(Pe&&s.mode&1){var w=gh(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ph(w,a,s,o,e),_d(ki(l,s));break e}}o=l=ki(l,s),Je!==4&&(Je=2),bo===null?bo=[o]:bo.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=Hg(o,l,e);sh(o,x);break e;case 1:s=l;var v=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(or===null||!or.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Vg(o,s,e);sh(o,E);break e}}o=o.return}while(o!==null)}lp(n)}catch(b){e=b,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(1)}function ap(){var t=As.current;return As.current=bs,t===null?bs:t}function $d(){(Je===0||Je===3||Je===2)&&(Je=4),ot===null||!(Gr&268435455)&&!(rl&268435455)||Xn(ot,ft)}function Is(t,e){var n=pe;pe|=2;var r=ap();(ot!==t||ft!==e)&&(In=null,Ur(t,e));do try{m2();break}catch(i){op(t,i)}while(1);if(Cd(),pe=n,As.current=r,ze!==null)throw Error(K(261));return ot=null,ft=0,Je}function m2(){for(;ze!==null;)sp(ze)}function v2(){for(;ze!==null&&!Hv();)sp(ze)}function sp(t){var e=up(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?lp(t):ze=e,Md.current=null}function lp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=u2(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,ze=null;return}}else if(n=c2(n,e,Bt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Je===0&&(Je=5)}function kr(t,e,n){var r=Ce,i=Yt.transition;try{Yt.transition=null,Ce=1,x2(t,e,n,r)}finally{Yt.transition=i,Ce=r}return null}function x2(t,e,n,r){do Ci();while(Yn!==null);if(pe&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Zv(t,o),t===ot&&(ze=ot=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ta||(Ta=!0,dp(us,function(){return Ci(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yt.transition,Yt.transition=null;var a=Ce;Ce=1;var s=pe;pe|=4,Md.current=null,f2(t,n),np(n,t),Bx(Yc),fs=!!Qc,Yc=Qc=null,t.current=n,h2(n),Vv(),pe=s,Ce=a,Yt.transition=o}else t.current=n;if(Ta&&(Ta=!1,Yn=t,Ts=i),o=t.pendingLanes,o===0&&(or=null),Gv(n.stateNode),jt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ns)throw Ns=!1,t=mu,mu=null,t;return Ts&1&&t.tag!==0&&Ci(),o=t.pendingLanes,o&1?t===vu?Ao++:(Ao=0,vu=t):Ao=0,mr(),null}function Ci(){if(Yn!==null){var t=H1(Ts),e=Yt.transition,n=Ce;try{if(Yt.transition=null,Ce=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Ts=0,pe&6)throw Error(K(331));var i=pe;for(pe|=4,ee=t.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:So(8,d,o)}var f=d.child;if(f!==null)f.return=d,ee=f;else for(;ee!==null;){d=ee;var h=d.sibling,g=d.return;if(Jg(d),d===c){ee=null;break}if(h!==null){h.return=g,ee=h;break}ee=g}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:So(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ee=x;break e}ee=o.return}}var v=t.current;for(ee=v;ee!==null;){a=ee;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,ee=y;else e:for(a=v;ee!==null;){if(s=ee,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:nl(9,s)}}catch(b){Ue(s,s.return,b)}if(s===a){ee=null;break e}var E=s.sibling;if(E!==null){E.return=s.return,ee=E;break e}ee=s.return}}if(pe=i,mr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Ks,t)}catch{}r=!0}return r}finally{Ce=n,Yt.transition=e}}return!1}function Th(t,e,n){e=ki(n,e),e=Hg(t,e,1),t=ir(t,e,1),e=At(),t!==null&&(ea(t,1,e),jt(t,e))}function Ue(t,e,n){if(t.tag===3)Th(t,t,n);else for(;e!==null;){if(e.tag===3){Th(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(or===null||!or.has(r))){t=ki(n,t),t=Vg(e,t,1),e=ir(e,t,1),t=At(),e!==null&&(ea(e,1,t),jt(e,t));break}}e=e.return}}function y2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ft&n)===n&&(Je===4||Je===3&&(ft&130023424)===ft&&500>He()-Bd?Ur(t,0):Ld|=n),jt(t,e)}function cp(t,e){e===0&&(t.mode&1?(e=xa,xa<<=1,!(xa&130023424)&&(xa=4194304)):e=1);var n=At();t=Mn(t,e),t!==null&&(ea(t,e,n),jt(t,n))}function w2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cp(t,n)}function _2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),cp(t,n)}var up;up=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,l2(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Pe&&e.flags&1048576&&gg(e,ys,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var i=Ni(e,wt.current);Ei(e,n),i=kd(null,e,r,t,i,n);var o=Rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(o=!0,vs(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ad(e),i.updater=tl,e.stateNode=i,i._reactInternals=e,ou(e,r,t,n),e=lu(null,e,r,!0,o,n)):(e.tag=0,Pe&&o&&yd(e),bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=C2(r),t=rn(r,t),i){case 0:e=su(null,e,r,t,n);break e;case 1:e=xh(null,e,r,t,n);break e;case 11:e=mh(null,e,r,t,n);break e;case 14:e=vh(null,e,r,rn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),su(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),xh(t,e,r,i,n);case 3:e:{if(Xg(e),t===null)throw Error(K(387));r=e.pendingProps,o=e.memoizedState,i=o.element,wg(t,e),Es(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ki(Error(K(423)),e),e=yh(t,e,r,n,i);break e}else if(r!==i){i=ki(Error(K(424)),e),e=yh(t,e,r,n,i);break e}else for(Ft=rr(e.stateNode.containerInfo.firstChild),Ut=e,Pe=!0,an=null,n=xg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===i){e=Ln(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return _g(e),t===null&&nu(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,qc(r,i)?a=null:o!==null&&qc(r,o)&&(e.flags|=32),Gg(t,e),bt(t,e,a,n),e.child;case 6:return t===null&&nu(e),null;case 13:return Kg(t,e,n);case 4:return Nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ii(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),mh(t,e,r,i,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ne(ws,r._currentValue),r._currentValue=a,o!==null)if(fn(o.value,a)){if(o.children===i.children&&!Dt.current){e=Ln(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Dn(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ru(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(K(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),ru(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ei(e,n),i=Zt(i),r=r(i),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),vh(t,e,r,i,n);case 15:return zg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Xa(t,e),e.tag=1,Pt(r)?(t=!0,vs(e)):t=!1,Ei(e,n),$g(e,r,i),ou(e,r,i,n),lu(null,e,r,!0,t,n);case 19:return Qg(t,e,n);case 22:return Wg(t,e,n)}throw Error(K(156,e.tag))};function dp(t,e){return B1(t,e)}function E2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new E2(t,e,n,r)}function Hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C2(t){if(typeof t=="function")return Hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sd)return 11;if(t===ld)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ya(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")Hd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ni:return $r(n.children,i,o,e);case ad:a=8,i|=8;break;case Ic:return t=Kt(12,n,e,i|2),t.elementType=Ic,t.lanes=o,t;case Oc:return t=Kt(13,n,e,i),t.elementType=Oc,t.lanes=o,t;case kc:return t=Kt(19,n,e,i),t.elementType=kc,t.lanes=o,t;case _1:return il(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y1:a=10;break e;case w1:a=9;break e;case sd:a=11;break e;case ld:a=14;break e;case Vn:a=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Kt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function $r(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function il(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=_1,t.lanes=n,t.stateNode={isHidden:!1},t}function tc(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function nc(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function S2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ml(0),this.expirationTimes=Ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vd(t,e,n,r,i,o,a,s,l){return t=new S2(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ad(o),t}function b2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fp(t){if(!t)return hr;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Pt(n))return fg(t,n,e)}return e}function hp(t,e,n,r,i,o,a,s,l){return t=Vd(n,r,!0,t,i,o,a,s,l),t.context=fp(null),n=t.current,r=At(),i=ar(n),o=Dn(r,i),o.callback=e??null,ir(n,o,i),t.current.lanes=i,ea(t,i,r),jt(t,r),t}function ol(t,e,n,r){var i=e.current,o=At(),a=ar(i);return n=fp(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ir(i,e,a),t!==null&&(un(t,i,a,o),za(t,i,a)),a}function Os(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ih(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zd(t,e){Ih(t,e),(t=t.alternate)&&Ih(t,e)}function A2(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}al.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));ol(t,e,null,null)};al.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){ol(null,t,null,null)}),e[jn]=null}};function al(t){this._internalRoot=t}al.prototype.unstable_scheduleHydration=function(t){if(t){var e=W1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gn.length&&e!==0&&e<Gn[n].priority;n++);Gn.splice(n,0,t),n===0&&X1(t)}};function Gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Oh(){}function N2(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Os(a);o.call(c)}}var a=hp(e,r,t,0,null,!1,!1,"",Oh);return t._reactRootContainer=a,t[jn]=a.current,Lo(t.nodeType===8?t.parentNode:t),Xr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=Os(l);s.call(c)}}var l=Vd(t,0,!1,null,null,!1,!1,"",Oh);return t._reactRootContainer=l,t[jn]=l.current,Lo(t.nodeType===8?t.parentNode:t),Xr(function(){ol(e,l,n,r)}),l}function ll(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Os(a);s.call(l)}}ol(e,a,t,i)}else a=N2(n,e,t,i,r);return Os(a)}V1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ho(e.pendingLanes);n!==0&&(dd(e,n|1),jt(e,He()),!(pe&6)&&(Ri=He()+500,mr()))}break;case 13:Xr(function(){var r=Mn(t,1);if(r!==null){var i=At();un(r,t,1,i)}}),zd(t,1)}};fd=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=At();un(e,t,134217728,n)}zd(t,134217728)}};z1=function(t){if(t.tag===13){var e=ar(t),n=Mn(t,e);if(n!==null){var r=At();un(n,t,e,r)}zd(t,e)}};W1=function(){return Ce};G1=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};$c=function(t,e,n){switch(e){case"input":if(Pc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zs(r);if(!i)throw Error(K(90));C1(r),Pc(r,i)}}}break;case"textarea":b1(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};R1=Fd;D1=Xr;var T2={usingClientEntryPoint:!1,Events:[na,ai,Zs,O1,k1,Fd]},oo={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I2={bundleType:oo.bundleType,version:oo.version,rendererPackageName:oo.rendererPackageName,rendererConfig:oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M1(t),t===null?null:t.stateNode},findFiberByHostInstance:oo.findFiberByHostInstance||A2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{Ks=Ia.inject(I2),En=Ia}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T2;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(e))throw Error(K(200));return b2(t,e,null,n)};Ht.createRoot=function(t,e){if(!Gd(t))throw Error(K(299));var n=!1,r="",i=gp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vd(t,1,!1,null,null,n,!1,r,i),t[jn]=e.current,Lo(t.nodeType===8?t.parentNode:t),new Wd(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=M1(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Xr(t)};Ht.hydrate=function(t,e,n){if(!sl(e))throw Error(K(200));return ll(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Gd(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=gp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=hp(e,null,t,1,n??null,i,!1,o,a),t[jn]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new al(e)};Ht.render=function(t,e,n){if(!sl(e))throw Error(K(200));return ll(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!sl(t))throw Error(K(40));return t._reactRootContainer?(Xr(function(){ll(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Ht.unstable_batchedUpdates=Fd;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sl(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return ll(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pp)}catch(t){console.error(t)}}pp(),p1.exports=Ht;var O2=p1.exports,kh=O2;Nc.createRoot=kh.createRoot,Nc.hydrateRoot=kh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Go(){return Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Go.apply(this,arguments)}var qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qn||(qn={}));const Rh="popstate";function k2(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return wu("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ks(i)}return D2(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R2(){return Math.random().toString(36).substr(2,8)}function Dh(t,e){return{usr:t.state,key:t.key,idx:e}}function wu(t,e,n,r){return n===void 0&&(n=null),Go({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wi(e):e,{state:n,key:e&&e.key||r||R2()})}function ks(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function D2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=qn.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(Go({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function f(){s=qn.Pop;let w=d(),x=w==null?null:w-c;c=w,l&&l({action:s,location:m.location,delta:x})}function h(w,x){s=qn.Push;let v=wu(m.location,w,x);n&&n(v,w),c=d()+1;let y=Dh(v,c),E=m.createHref(v);try{a.pushState(y,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(E)}o&&l&&l({action:s,location:m.location,delta:1})}function g(w,x){s=qn.Replace;let v=wu(m.location,w,x);n&&n(v,w),c=d();let y=Dh(v,c),E=m.createHref(v);a.replaceState(y,"",E),o&&l&&l({action:s,location:m.location,delta:0})}function p(w){let x=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof w=="string"?w:ks(w);return v=v.replace(/ $/,"%20"),Ve(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let m={get action(){return s},get location(){return t(i,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Rh,f),l=w,()=>{i.removeEventListener(Rh,f),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let x=p(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(w){return a.go(w)}};return m}var Ph;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ph||(Ph={}));function P2(t,e,n){return n===void 0&&(n="/"),j2(t,e,n,!1)}function j2(t,e,n,r){let i=typeof e=="string"?Wi(e):e,o=Xd(i.pathname||"/",n);if(o==null)return null;let a=vp(t);M2(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=X2(o);s=W2(a[l],c,r)}return s}function vp(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=lr([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Ve(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vp(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:V2(c,o.index),routesMeta:d})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of xp(o.path))i(o,a,l)}),e}function xp(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=xp(r.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function M2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L2=/^:[\w-]+$/,B2=3,F2=2,U2=1,$2=10,H2=-2,jh=t=>t==="*";function V2(t,e){let n=t.split("/"),r=n.length;return n.some(jh)&&(r+=H2),e&&(r+=F2),n.filter(i=>!jh(i)).reduce((i,o)=>i+(L2.test(o)?B2:o===""?U2:$2),r)}function z2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function W2(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=Mh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Mh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:lr([o,f.pathname]),pathnameBase:q2(lr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=lr([o,f.pathnameBase]))}return a}function Mh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=G2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let m=s[f]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[f];return g&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function G2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function X2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function K2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wi(t):t;return{pathname:n?n.startsWith("/")?n:Q2(n,e):e,search:Z2(r),hash:J2(i)}}function Q2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kd(t,e){let n=Y2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wi(t):(i=Go({},t),Ve(!i.pathname||!i.pathname.includes("?"),rc("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),rc("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),rc("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}s=f>=0?e[f]:"/"}let l=K2(i,s),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const lr=t=>t.join("/").replace(/\/\/+/g,"/"),q2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ey(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yp=["post","put","patch","delete"];new Set(yp);const ty=["get",...yp];new Set(ty);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xo.apply(this,arguments)}const Yd=C.createContext(null),ny=C.createContext(null),vr=C.createContext(null),cl=C.createContext(null),xr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),wp=C.createContext(null);function ry(t,e){let{relative:n}=e===void 0?{}:e;Gi()||Ve(!1);let{basename:r,navigator:i}=C.useContext(vr),{hash:o,pathname:a,search:s}=Ep(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:lr([r,a])),i.createHref({pathname:l,search:s,hash:o})}function Gi(){return C.useContext(cl)!=null}function yr(){return Gi()||Ve(!1),C.useContext(cl).location}function _p(t){C.useContext(vr).static||C.useLayoutEffect(t)}function bn(){let{isDataRoute:t}=C.useContext(xr);return t?my():iy()}function iy(){Gi()||Ve(!1);let t=C.useContext(Yd),{basename:e,future:n,navigator:r}=C.useContext(vr),{matches:i}=C.useContext(xr),{pathname:o}=yr(),a=JSON.stringify(Kd(i,n.v7_relativeSplatPath)),s=C.useRef(!1);return _p(()=>{s.current=!0}),C.useCallback(function(c,d){if(d===void 0&&(d={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let f=Qd(c,JSON.parse(a),o,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:lr([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,a,o,t])}function Ep(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(vr),{matches:i}=C.useContext(xr),{pathname:o}=yr(),a=JSON.stringify(Kd(i,r.v7_relativeSplatPath));return C.useMemo(()=>Qd(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function oy(t,e){return ay(t,e)}function ay(t,e,n,r){Gi()||Ve(!1);let{navigator:i}=C.useContext(vr),{matches:o}=C.useContext(xr),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=yr(),d;if(e){var f;let w=typeof e=="string"?Wi(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Ve(!1),d=w}else d=c;let h=d.pathname||"/",g=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=P2(t,{pathname:g}),m=dy(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},s,w.params),pathname:lr([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:lr([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&m?C.createElement(cl.Provider,{value:{location:Xo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qn.Pop}},m):m}function sy(){let t=py(),e=ey(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,o)}const ly=C.createElement(sy,null);class cy extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(xr.Provider,{value:this.props.routeContext},C.createElement(wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uy(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(Yd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(xr.Provider,{value:e},r)}function dy(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let d=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);d>=0||Ve(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:g}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let g,p=!1,m=null,w=null;n&&(g=s&&f.route.id?s[f.route.id]:void 0,m=f.route.errorElement||ly,l&&(c<0&&h===0?(vy("route-fallback",!1),p=!0,w=null):c===h&&(p=!0,w=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,h+1)),v=()=>{let y;return g?y=m:p?y=w:f.route.Component?y=C.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,C.createElement(uy,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?C.createElement(cy,{location:n.location,revalidation:n.revalidation,component:m,error:g,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var Cp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cp||{}),Rs=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rs||{});function fy(t){let e=C.useContext(Yd);return e||Ve(!1),e}function hy(t){let e=C.useContext(ny);return e||Ve(!1),e}function gy(t){let e=C.useContext(xr);return e||Ve(!1),e}function Sp(t){let e=gy(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function py(){var t;let e=C.useContext(wp),n=hy(Rs.UseRouteError),r=Sp(Rs.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function my(){let{router:t}=fy(Cp.UseNavigateStable),e=Sp(Rs.UseNavigateStable),n=C.useRef(!1);return _p(()=>{n.current=!0}),C.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Xo({fromRouteId:e},o)))},[t,e])}const Lh={};function vy(t,e,n){!e&&!Lh[t]&&(Lh[t]=!0)}function xy(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Bh(t){let{to:e,replace:n,state:r,relative:i}=t;Gi()||Ve(!1);let{future:o,static:a}=C.useContext(vr),{matches:s}=C.useContext(xr),{pathname:l}=yr(),c=bn(),d=Qd(e,Kd(s,o.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return C.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function st(t){Ve(!1)}function yy(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qn.Pop,navigator:o,static:a=!1,future:s}=t;Gi()&&Ve(!1);let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:o,static:a,future:Xo({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof r=="string"&&(r=Wi(r));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:p="default"}=r,m=C.useMemo(()=>{let w=Xd(d,l);return w==null?null:{location:{pathname:w,search:f,hash:h,state:g,key:p},navigationType:i}},[l,d,f,h,g,p,i]);return m==null?null:C.createElement(vr.Provider,{value:c},C.createElement(cl.Provider,{children:n,value:m}))}function wy(t){let{children:e,location:n}=t;return oy(_u(e),n)}new Promise(()=>{});function _u(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let o=[...e,i];if(r.type===C.Fragment){n.push.apply(n,_u(r.props.children,o));return}r.type!==st&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=_u(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eu.apply(this,arguments)}function _y(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ey(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cy(t,e){return t.button===0&&(!e||e==="_self")&&!Ey(t)}function Cu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Sy(t,e){let n=Cu(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const by=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ay="6";try{window.__reactRouterVersion=Ay}catch{}const Ny="startTransition",Fh=yv[Ny];function Ty(t){let{basename:e,children:n,future:r,window:i}=t,o=C.useRef();o.current==null&&(o.current=k2({window:i,v5Compat:!0}));let a=o.current,[s,l]=C.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=C.useCallback(f=>{c&&Fh?Fh(()=>l(f)):l(f)},[l,c]);return C.useLayoutEffect(()=>a.listen(d),[a,d]),C.useEffect(()=>xy(r),[r]),C.createElement(yy,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const Iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Oy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Su=C.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,h=_y(e,by),{basename:g}=C.useContext(vr),p,m=!1;if(typeof c=="string"&&Oy.test(c)&&(p=c,Iy))try{let y=new URL(window.location.href),E=c.startsWith("//")?new URL(y.protocol+c):new URL(c),b=Xd(E.pathname,g);E.origin===y.origin&&b!=null?c=b+E.search+E.hash:m=!0}catch{}let w=ry(c,{relative:i}),x=ky(c,{replace:a,state:s,target:l,preventScrollReset:d,relative:i,viewTransition:f});function v(y){r&&r(y),y.defaultPrevented||x(y)}return C.createElement("a",Eu({},h,{href:p||w,onClick:m||o?r:v,ref:n,target:l}))});var Uh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uh||(Uh={}));var $h;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($h||($h={}));function ky(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=e===void 0?{}:e,l=bn(),c=yr(),d=Ep(t,{relative:a});return C.useCallback(f=>{if(Cy(f,n)){f.preventDefault();let h=r!==void 0?r:ks(c)===ks(d);l(t,{replace:h,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,d,r,i,n,t,o,a,s])}function ul(t){let e=C.useRef(Cu(t)),n=C.useRef(!1),r=yr(),i=C.useMemo(()=>Sy(r.search,n.current?null:e.current),[r.search]),o=bn(),a=C.useCallback((s,l)=>{const c=Cu(typeof s=="function"?s(i):s);n.current=!0,o("?"+c,l)},[o,i]);return[i,a]}const Hh=t=>{let e;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},Ry=t=>t?Hh(t):Hh;var bp={exports:{}},Ap={},Np={exports:{}},Tp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=C;function Dy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Py=typeof Object.is=="function"?Object.is:Dy,jy=Di.useState,My=Di.useEffect,Ly=Di.useLayoutEffect,By=Di.useDebugValue;function Fy(t,e){var n=e(),r=jy({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return Ly(function(){i.value=n,i.getSnapshot=e,ic(i)&&o({inst:i})},[t,n,e]),My(function(){return ic(i)&&o({inst:i}),t(function(){ic(i)&&o({inst:i})})},[t]),By(n),n}function ic(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Py(t,n)}catch{return!0}}function Uy(t,e){return e()}var $y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uy:Fy;Tp.useSyncExternalStore=Di.useSyncExternalStore!==void 0?Di.useSyncExternalStore:$y;Np.exports=Tp;var Hy=Np.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=C,Vy=Hy;function zy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wy=typeof Object.is=="function"?Object.is:zy,Gy=Vy.useSyncExternalStore,Xy=dl.useRef,Ky=dl.useEffect,Qy=dl.useMemo,Yy=dl.useDebugValue;Ap.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=Xy(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Qy(function(){function l(g){if(!c){if(c=!0,d=g,g=r(g),i!==void 0&&a.hasValue){var p=a.value;if(i(p,g))return f=p}return f=g}if(p=f,Wy(d,g))return p;var m=r(g);return i!==void 0&&i(p,m)?(d=g,p):(d=g,f=m)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var s=Gy(t,o[0],o[1]);return Ky(function(){a.hasValue=!0,a.value=s},[s]),Yy(s),s};bp.exports=Ap;var qy=bp.exports;const Zy=r1(qy),{useDebugValue:Jy}=nd,{useSyncExternalStoreWithSelector:ew}=Zy;const tw=t=>t;function nw(t,e=tw,n){const r=ew(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Jy(r),r}const Vh=t=>{const e=typeof t=="function"?Ry(t):t,n=(r,i)=>nw(e,r,i);return Object.assign(n,e),n},rw=t=>t?Vh(t):Vh;function iw(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var o;const a=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),s=(o=n.getItem(i))!=null?o:null;return s instanceof Promise?s.then(a):a(s)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const Ko=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ko(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ko(r)(n)}}}},ow=(t,e)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,x)=>({...x,...w}),...e},a=!1;const s=new Set,l=new Set;let c;try{c=o.getStorage()}catch{}if(!c)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...w)},r,i);const d=Ko(o.serialize),f=()=>{const w=o.partialize({...r()});let x;const v=d({state:w,version:o.version}).then(y=>c.setItem(o.name,y)).catch(y=>{x=y});if(x)throw x;return v},h=i.setState;i.setState=(w,x)=>{h(w,x),f()};const g=t((...w)=>{n(...w),f()},r,i);let p;const m=()=>{var w;if(!c)return;a=!1,s.forEach(v=>v(r()));const x=((w=o.onRehydrateStorage)==null?void 0:w.call(o,r()))||void 0;return Ko(c.getItem.bind(c))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var y;return p=o.merge(v,(y=r())!=null?y:g),n(p,!0),f()}).then(()=>{x==null||x(p,void 0),a=!0,l.forEach(v=>v(p))}).catch(v=>{x==null||x(void 0,v)})};return i.persist={setOptions:w=>{o={...o,...w},w.getStorage&&(c=w.getStorage())},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:w=>(s.add(w),()=>{s.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},m(),p||g},aw=(t,e)=>(n,r,i)=>{let o={storage:iw(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},a=!1;const s=new Set,l=new Set;let c=o.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...m)},r,i);const d=()=>{const m=o.partialize({...r()});return c.setItem(o.name,{state:m,version:o.version})},f=i.setState;i.setState=(m,w)=>{f(m,w),d()};const h=t((...m)=>{n(...m),d()},r,i);i.getInitialState=()=>h;let g;const p=()=>{var m,w;if(!c)return;a=!1,s.forEach(v=>{var y;return v((y=r())!=null?y:h)});const x=((w=o.onRehydrateStorage)==null?void 0:w.call(o,(m=r())!=null?m:h))||void 0;return Ko(c.getItem.bind(c))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var y;const[E,b]=v;if(g=o.merge(b,(y=r())!=null?y:h),n(g,!0),E)return d()}).then(()=>{x==null||x(g,void 0),g=r(),a=!0,l.forEach(v=>v(g))}).catch(v=>{x==null||x(void 0,v)})};return i.persist={setOptions:m=>{o={...o,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:m=>(s.add(m),()=>{s.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},o.skipHydration||p(),g||h},sw=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?ow(t,e):aw(t,e),lw=sw;function Ip(t,e){return function(){return t.apply(e,arguments)}}const{toString:cw}=Object.prototype,{getPrototypeOf:qd}=Object,{iterator:fl,toStringTag:Op}=Symbol,hl=(t=>e=>{const n=cw.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hn=t=>(t=t.toLowerCase(),e=>hl(e)===t),gl=t=>e=>typeof e===t,{isArray:Xi}=Array,Pi=gl("undefined");function ia(t){return t!==null&&!Pi(t)&&t.constructor!==null&&!Pi(t.constructor)&&Mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kp=hn("ArrayBuffer");function uw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kp(t.buffer),e}const dw=gl("string"),Mt=gl("function"),Rp=gl("number"),oa=t=>t!==null&&typeof t=="object",fw=t=>t===!0||t===!1,qa=t=>{if(hl(t)!=="object")return!1;const e=qd(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Op in t)&&!(fl in t)},hw=t=>{if(!oa(t)||ia(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},gw=hn("Date"),pw=hn("File"),mw=hn("Blob"),vw=hn("FileList"),xw=t=>oa(t)&&Mt(t.pipe),yw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mt(t.append)&&((e=hl(t))==="formdata"||e==="object"&&Mt(t.toString)&&t.toString()==="[object FormData]"))},ww=hn("URLSearchParams"),[_w,Ew,Cw,Sw]=["ReadableStream","Request","Response","Headers"].map(hn),bw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function aa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Xi(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(ia(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function Dp(t,e){if(ia(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Br=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Pp=t=>!Pi(t)&&t!==Br;function bu(){const{caseless:t,skipUndefined:e}=Pp(this)&&this||{},n={},r=(i,o)=>{const a=t&&Dp(n,o)||o;qa(n[a])&&qa(i)?n[a]=bu(n[a],i):qa(i)?n[a]=bu({},i):Xi(i)?n[a]=i.slice():(!e||!Pi(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&aa(arguments[i],r);return n}const Aw=(t,e,n,{allOwnKeys:r}={})=>(aa(e,(i,o)=>{n&&Mt(i)?t[o]=Ip(i,n):t[o]=i},{allOwnKeys:r}),t),Nw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Tw=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Iw=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&qd(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ow=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},kw=t=>{if(!t)return null;if(Xi(t))return t;let e=t.length;if(!Rp(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Rw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qd(Uint8Array)),Dw=(t,e)=>{const r=(t&&t[fl]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},Pw=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},jw=hn("HTMLFormElement"),Mw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),zh=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Lw=hn("RegExp"),jp=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};aa(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},Bw=t=>{jp(t,(e,n)=>{if(Mt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Fw=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Xi(t)?r(t):r(String(t).split(e)),n},Uw=()=>{},$w=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Hw(t){return!!(t&&Mt(t.append)&&t[Op]==="FormData"&&t[fl])}const Vw=t=>{const e=new Array(10),n=(r,i)=>{if(oa(r)){if(e.indexOf(r)>=0)return;if(ia(r))return r;if(!("toJSON"in r)){e[i]=r;const o=Xi(r)?[]:{};return aa(r,(a,s)=>{const l=n(a,i+1);!Pi(l)&&(o[s]=l)}),e[i]=void 0,o}}return r};return n(t,0)},zw=hn("AsyncFunction"),Ww=t=>t&&(oa(t)||Mt(t))&&Mt(t.then)&&Mt(t.catch),Mp=((t,e)=>t?setImmediate:e?((n,r)=>(Br.addEventListener("message",({source:i,data:o})=>{i===Br&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Br.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mt(Br.postMessage)),Gw=typeof queueMicrotask<"u"?queueMicrotask.bind(Br):typeof process<"u"&&process.nextTick||Mp,Xw=t=>t!=null&&Mt(t[fl]),U={isArray:Xi,isArrayBuffer:kp,isBuffer:ia,isFormData:yw,isArrayBufferView:uw,isString:dw,isNumber:Rp,isBoolean:fw,isObject:oa,isPlainObject:qa,isEmptyObject:hw,isReadableStream:_w,isRequest:Ew,isResponse:Cw,isHeaders:Sw,isUndefined:Pi,isDate:gw,isFile:pw,isBlob:mw,isRegExp:Lw,isFunction:Mt,isStream:xw,isURLSearchParams:ww,isTypedArray:Rw,isFileList:vw,forEach:aa,merge:bu,extend:Aw,trim:bw,stripBOM:Nw,inherits:Tw,toFlatObject:Iw,kindOf:hl,kindOfTest:hn,endsWith:Ow,toArray:kw,forEachEntry:Dw,matchAll:Pw,isHTMLForm:jw,hasOwnProperty:zh,hasOwnProp:zh,reduceDescriptors:jp,freezeMethods:Bw,toObjectSet:Fw,toCamelCase:Mw,noop:Uw,toFiniteNumber:$w,findKey:Dp,global:Br,isContextDefined:Pp,isSpecCompliantForm:Hw,toJSONObject:Vw,isAsyncFn:zw,isThenable:Ww,setImmediate:Mp,asap:Gw,isIterable:Xw};function se(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}U.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const Lp=se.prototype,Bp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Bp[t]={value:t}});Object.defineProperties(se,Bp);Object.defineProperty(Lp,"isAxiosError",{value:!0});se.from=(t,e,n,r,i,o)=>{const a=Object.create(Lp);U.toFlatObject(t,a,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const s=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return se.call(a,s,l,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",o&&Object.assign(a,o),a};const Kw=null;function Au(t){return U.isPlainObject(t)||U.isArray(t)}function Fp(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function Wh(t,e,n){return t?t.concat(e).map(function(i,o){return i=Fp(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function Qw(t){return U.isArray(t)&&!t.some(Au)}const Yw=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function pl(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!U.isUndefined(w[m])});const r=n.metaTokens,i=n.visitor||d,o=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(U.isDate(p))return p.toISOString();if(U.isBoolean(p))return p.toString();if(!l&&U.isBlob(p))throw new se("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(p)||U.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,m,w){let x=p;if(p&&!w&&typeof p=="object"){if(U.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(U.isArray(p)&&Qw(p)||(U.isFileList(p)||U.endsWith(m,"[]"))&&(x=U.toArray(p)))return m=Fp(m),x.forEach(function(y,E){!(U.isUndefined(y)||y===null)&&e.append(a===!0?Wh([m],E,o):a===null?m:m+"[]",c(y))}),!1}return Au(p)?!0:(e.append(Wh(w,m,o),c(p)),!1)}const f=[],h=Object.assign(Yw,{defaultVisitor:d,convertValue:c,isVisitable:Au});function g(p,m){if(!U.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),U.forEach(p,function(x,v){(!(U.isUndefined(x)||x===null)&&i.call(e,x,U.isString(v)?v.trim():v,m,h))===!0&&g(x,m?m.concat(v):[v])}),f.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Gh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Zd(t,e){this._pairs=[],t&&pl(t,this,e)}const Up=Zd.prototype;Up.append=function(e,n){this._pairs.push([e,n])};Up.toString=function(e){const n=e?function(r){return e.call(this,r,Gh)}:Gh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function qw(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $p(t,e,n){if(!e)return t;const r=n&&n.encode||qw;U.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=U.isURLSearchParams(e)?e.toString():new Zd(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Zw{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Xh=Zw,Hp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jw=typeof URLSearchParams<"u"?URLSearchParams:Zd,e_=typeof FormData<"u"?FormData:null,t_=typeof Blob<"u"?Blob:null,n_={isBrowser:!0,classes:{URLSearchParams:Jw,FormData:e_,Blob:t_},protocols:["http","https","file","blob","url","data"]},Jd=typeof window<"u"&&typeof document<"u",Nu=typeof navigator=="object"&&navigator||void 0,r_=Jd&&(!Nu||["ReactNative","NativeScript","NS"].indexOf(Nu.product)<0),i_=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),o_=Jd&&window.location.href||"http://localhost",a_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jd,hasStandardBrowserEnv:r_,hasStandardBrowserWebWorkerEnv:i_,navigator:Nu,origin:o_},Symbol.toStringTag,{value:"Module"})),yt={...a_,...n_};function s_(t,e){return pl(t,new yt.classes.URLSearchParams,{visitor:function(n,r,i,o){return yt.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function l_(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function c_(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function Vp(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),l=o>=n.length;return a=!a&&U.isArray(i)?i.length:a,l?(U.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!U.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&U.isArray(i[a])&&(i[a]=c_(i[a])),!s)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,i)=>{e(l_(r),i,n,0)}),n}return null}function u_(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ef={transitional:Hp,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=U.isObject(e);if(o&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return i?JSON.stringify(Vp(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return s_(e,this.formSerializer).toString();if((s=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return pl(s?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),u_(e)):e}],transformResponse:[function(e){const n=this.transitional||ef.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(a)throw s.name==="SyntaxError"?se.from(s,se.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{ef.headers[t]={}});const tf=ef,d_=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f_=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&d_[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Kh=Symbol("internals");function ao(t){return t&&String(t).trim().toLowerCase()}function Za(t){return t===!1||t==null?t:U.isArray(t)?t.map(Za):String(t)}function h_(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const g_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function oc(t,e,n,r,i){if(U.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function p_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function m_(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}class ml{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,l,c){const d=ao(l);if(!d)throw new Error("header name must be a non-empty string");const f=U.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=Za(s))}const a=(s,l)=>U.forEach(s,(c,d)=>o(c,d,l));if(U.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(U.isString(e)&&(e=e.trim())&&!g_(e))a(f_(e),n);else if(U.isObject(e)&&U.isIterable(e)){let s={},l,c;for(const d of e){if(!U.isArray(d))throw TypeError("Object iterator must return a key-value pair");s[c=d[0]]=(l=s[c])?U.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}a(s,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=ao(e),e){const r=U.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return h_(i);if(U.isFunction(n))return n.call(this,i,r);if(U.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ao(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||oc(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=ao(a),a){const s=U.findKey(r,a);s&&(!n||oc(r,r[s],s,n))&&(delete r[s],i=!0)}}return U.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||oc(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return U.forEach(this,(i,o)=>{const a=U.findKey(r,o);if(a){n[a]=Za(i),delete n[o];return}const s=e?p_(o):String(o).trim();s!==o&&delete n[o],n[s]=Za(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Kh]=this[Kh]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=ao(a);r[s]||(m_(i,a),r[s]=!0)}return U.isArray(e)?e.forEach(o):o(e),this}}ml.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(ml.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(ml);const dn=ml;function ac(t,e){const n=this||tf,r=e||n,i=dn.from(r.headers);let o=r.data;return U.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function zp(t){return!!(t&&t.__CANCEL__)}function Ki(t,e,n){se.call(this,t??"canceled",se.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(Ki,se,{__CANCEL__:!0});function Wp(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new se("Request failed with status code "+n.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function v_(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function x_(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[o];a||(a=c),n[i]=l,r[i]=c;let f=o,h=0;for(;f!==i;)h+=n[f++],f=f%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-a<e)return;const g=d&&c-d;return g?Math.round(h*1e3/g):void 0}}function y_(t,e){let n=0,r=1e3/e,i,o;const a=(c,d=Date.now())=>{n=d,i=null,o&&(clearTimeout(o),o=null),t(...c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=r?a(c,d):(i=c,o||(o=setTimeout(()=>{o=null,a(i)},r-f)))},()=>i&&a(i)]}const Ds=(t,e,n=3)=>{let r=0;const i=x_(50,250);return y_(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,l=a-r,c=i(l),d=a<=s;r=a;const f={loaded:a,total:s,progress:s?a/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&d?(s-a)/c:void 0,event:o,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(f)},n)},Qh=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Yh=t=>(...e)=>U.asap(()=>t(...e)),w_=yt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,yt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(yt.origin),yt.navigator&&/(msie|trident)/i.test(yt.navigator.userAgent)):()=>!0,__=yt.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const a=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),U.isString(r)&&a.push("path="+r),U.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function E_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function C_(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Gp(t,e,n){let r=!E_(e);return t&&(r||n==!1)?C_(t,e):e}const qh=t=>t instanceof dn?{...t}:t;function Kr(t,e){e=e||{};const n={};function r(c,d,f,h){return U.isPlainObject(c)&&U.isPlainObject(d)?U.merge.call({caseless:h},c,d):U.isPlainObject(d)?U.merge({},d):U.isArray(d)?d.slice():d}function i(c,d,f,h){if(U.isUndefined(d)){if(!U.isUndefined(c))return r(void 0,c,f,h)}else return r(c,d,f,h)}function o(c,d){if(!U.isUndefined(d))return r(void 0,d)}function a(c,d){if(U.isUndefined(d)){if(!U.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function s(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,d,f)=>i(qh(c),qh(d),f,!0)};return U.forEach(Object.keys({...t,...e}),function(d){const f=l[d]||i,h=f(t[d],e[d],d);U.isUndefined(h)&&f!==s||(n[d]=h)}),n}const Xp=t=>{const e=Kr({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=e;if(e.headers=a=dn.from(a),e.url=$p(Gp(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),U.isFormData(n)){if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(U.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&a.set(d,f)})}}if(yt.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&w_(e.url))){const l=i&&o&&__.read(o);l&&a.set(i,l)}return e},S_=typeof XMLHttpRequest<"u",b_=S_&&function(t){return new Promise(function(n,r){const i=Xp(t);let o=i.data;const a=dn.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,d,f,h,g,p;function m(){g&&g(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function x(){if(!w)return;const y=dn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),b={data:!s||s==="text"||s==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:y,config:t,request:w};Wp(function(T){n(T),m()},function(T){r(T),m()},b),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(r(new se("Request aborted",se.ECONNABORTED,t,w)),w=null)},w.onerror=function(E){const b=E&&E.message?E.message:"Network Error",I=new se(b,se.ERR_NETWORK,t,w);I.event=E||null,r(I),w=null},w.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||Hp;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new se(E,b.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,t,w)),w=null},o===void 0&&a.setContentType(null),"setRequestHeader"in w&&U.forEach(a.toJSON(),function(E,b){w.setRequestHeader(b,E)}),U.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),s&&s!=="json"&&(w.responseType=i.responseType),c&&([h,p]=Ds(c,!0),w.addEventListener("progress",h)),l&&w.upload&&([f,g]=Ds(l),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=y=>{w&&(r(!y||y.type?new Ki(null,t,w):y),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const v=v_(i.url);if(v&&yt.protocols.indexOf(v)===-1){r(new se("Unsupported protocol "+v+":",se.ERR_BAD_REQUEST,t));return}w.send(o||null)})},A_=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(c){if(!i){i=!0,s();const d=c instanceof Error?c:this.reason;r.abort(d instanceof se?d:new Ki(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,o(new se(`timeout ${e} of ms exceeded`,se.ETIMEDOUT))},e);const s=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),t=null)};t.forEach(c=>c.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>U.asap(s),l}},N_=A_,T_=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},I_=async function*(t,e){for await(const n of O_(t))yield*T_(n,e)},O_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Zh=(t,e,n,r)=>{const i=I_(t,e);let o=0,a,s=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){s(),l.close();return}let f=d.byteLength;if(n){let h=o+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},Jh=64*1024,{isFunction:Oa}=U,k_=(({Request:t,Response:e})=>({Request:t,Response:e}))(U.global),{ReadableStream:e0,TextEncoder:t0}=U.global,n0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},R_=t=>{t=U.merge.call({skipUndefined:!0},k_,t);const{fetch:e,Request:n,Response:r}=t,i=e?Oa(e):typeof fetch=="function",o=Oa(n),a=Oa(r);if(!i)return!1;const s=i&&Oa(e0),l=i&&(typeof t0=="function"?(p=>m=>p.encode(m))(new t0):async p=>new Uint8Array(await new n(p).arrayBuffer())),c=o&&s&&n0(()=>{let p=!1;const m=new n(yt.origin,{body:new e0,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),d=a&&s&&n0(()=>U.isReadableStream(new r("").body)),f={stream:d&&(p=>p.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(m,w)=>{let x=m&&m[p];if(x)return x.call(m);throw new se(`Response type '${p}' is not supported`,se.ERR_NOT_SUPPORT,w)})});const h=async p=>{if(p==null)return 0;if(U.isBlob(p))return p.size;if(U.isSpecCompliantForm(p))return(await new n(yt.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(U.isArrayBufferView(p)||U.isArrayBuffer(p))return p.byteLength;if(U.isURLSearchParams(p)&&(p=p+""),U.isString(p))return(await l(p)).byteLength},g=async(p,m)=>{const w=U.toFiniteNumber(p.getContentLength());return w??h(m)};return async p=>{let{url:m,method:w,data:x,signal:v,cancelToken:y,timeout:E,onDownloadProgress:b,onUploadProgress:I,responseType:T,headers:_,withCredentials:k="same-origin",fetchOptions:O}=Xp(p),j=e||fetch;T=T?(T+"").toLowerCase():"text";let R=N_([v,y&&y.toAbortSignal()],E),A=null;const D=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let V;try{if(I&&c&&w!=="get"&&w!=="head"&&(V=await g(_,x))!==0){let F=new n(m,{method:"POST",body:x,duplex:"half"}),L;if(U.isFormData(x)&&(L=F.headers.get("content-type"))&&_.setContentType(L),F.body){const[z,G]=Qh(V,Ds(Yh(I)));x=Zh(F.body,Jh,z,G)}}U.isString(k)||(k=k?"include":"omit");const W=o&&"credentials"in n.prototype,J={...O,signal:R,method:w.toUpperCase(),headers:_.normalize().toJSON(),body:x,duplex:"half",credentials:W?k:void 0};A=o&&new n(m,J);let N=await(o?j(A,O):j(m,J));const B=d&&(T==="stream"||T==="response");if(d&&(b||B&&D)){const F={};["status","statusText","headers"].forEach(re=>{F[re]=N[re]});const L=U.toFiniteNumber(N.headers.get("content-length")),[z,G]=b&&Qh(L,Ds(Yh(b),!0))||[];N=new r(Zh(N.body,Jh,z,()=>{G&&G(),D&&D()}),F)}T=T||"text";let H=await f[U.findKey(f,T)||"text"](N,p);return!B&&D&&D(),await new Promise((F,L)=>{Wp(F,L,{data:H,headers:dn.from(N.headers),status:N.status,statusText:N.statusText,config:p,request:A})})}catch(W){throw D&&D(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new se("Network Error",se.ERR_NETWORK,p,A),{cause:W.cause||W}):se.from(W,W&&W.code,p,A)}}},D_=new Map,Kp=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,s=a,l,c,d=D_;for(;s--;)l=o[s],c=d.get(l),c===void 0&&d.set(l,c=s?new Map:R_(e)),d=c;return c};Kp();const Tu={http:Kw,xhr:b_,fetch:{get:Kp}};U.forEach(Tu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const r0=t=>`- ${t}`,P_=t=>U.isFunction(t)||t===null||t===!1,Qp={getAdapter:(t,e)=>{t=U.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let s;if(i=r,!P_(r)&&(i=Tu[(s=String(r)).toLowerCase()],i===void 0))throw new se(`Unknown adapter '${s}'`);if(i&&(U.isFunction(i)||(i=i.get(e))))break;o[s||"#"+a]=i}if(!i){const a=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(r0).join(`
`):" "+r0(a[0]):"as no adapter specified";throw new se("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:Tu};function sc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ki(null,t)}function i0(t){return sc(t),t.headers=dn.from(t.headers),t.data=ac.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Qp.getAdapter(t.adapter||tf.adapter,t)(t).then(function(r){return sc(t),r.data=ac.call(t,t.transformResponse,r),r.headers=dn.from(r.headers),r},function(r){return zp(r)||(sc(t),r&&r.response&&(r.response.data=ac.call(t,t.transformResponse,r.response),r.response.headers=dn.from(r.response.headers))),Promise.reject(r)})}const Yp="1.12.2",vl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vl[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const o0={};vl.transitional=function(e,n,r){function i(o,a){return"[Axios v"+Yp+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new se(i(a," has been removed"+(n?" in "+n:"")),se.ERR_DEPRECATED);return n&&!o0[a]&&(o0[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};vl.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function j_(t,e,n){if(typeof t!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],l=s===void 0||a(s,o,t);if(l!==!0)throw new se("option "+o+" must be "+l,se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new se("Unknown option "+o,se.ERR_BAD_OPTION)}}const Ja={assertOptions:j_,validators:vl},mn=Ja.validators;class Ps{constructor(e){this.defaults=e||{},this.interceptors={request:new Xh,response:new Xh}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Kr(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Ja.assertOptions(r,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),i!=null&&(U.isFunction(i)?n.paramsSerializer={serialize:i}:Ja.assertOptions(i,{encode:mn.function,serialize:mn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ja.assertOptions(n,{baseUrl:mn.spelling("baseURL"),withXsrfToken:mn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&U.merge(o.common,o[n.method]);o&&U.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=dn.concat(a,o);const s=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,s.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,f=0,h;if(!l){const p=[i0.bind(this),void 0];for(p.unshift(...s),p.push(...c),h=p.length,d=Promise.resolve(n);f<h;)d=d.then(p[f++],p[f++]);return d}h=s.length;let g=n;for(;f<h;){const p=s[f++],m=s[f++];try{g=p(g)}catch(w){m.call(this,w);break}}try{d=i0.call(this,g)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Kr(this.defaults,e);const n=Gp(e.baseURL,e.url,e.allowAbsoluteUrls);return $p(n,e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){Ps.prototype[e]=function(n,r){return this.request(Kr(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(Kr(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Ps.prototype[e]=n(),Ps.prototype[e+"Form"]=n(!0)});const es=Ps;class nf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new Ki(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new nf(function(i){e=i}),cancel:e}}}const M_=nf;function L_(t){return function(n){return t.apply(null,n)}}function B_(t){return U.isObject(t)&&t.isAxiosError===!0}const Iu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iu).forEach(([t,e])=>{Iu[e]=t});const F_=Iu;function qp(t){const e=new es(t),n=Ip(es.prototype.request,e);return U.extend(n,es.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return qp(Kr(t,i))},n}const Ge=qp(tf);Ge.Axios=es;Ge.CanceledError=Ki;Ge.CancelToken=M_;Ge.isCancel=zp;Ge.VERSION=Yp;Ge.toFormData=pl;Ge.AxiosError=se;Ge.Cancel=Ge.CanceledError;Ge.all=function(e){return Promise.all(e)};Ge.spread=L_;Ge.isAxiosError=B_;Ge.mergeConfig=Kr;Ge.AxiosHeaders=dn;Ge.formToJSON=t=>Vp(U.isHTMLForm(t)?new FormData(t):t);Ge.getAdapter=Qp.getAdapter;Ge.HttpStatusCode=F_;Ge.default=Ge;const U_=Ge,Zp="https://rolanda-skinless-sue.ngrok-free.dev/api",ne=U_.create({baseURL:Zp,headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},withCredentials:!0});ne.interceptors.request.use(t=>{const e=Ae.getState().token,n=localStorage.getItem("access_token"),r=e||n;return console.log(" NUCLEAR API REQUEST:",t.url),console.log(" NUCLEAR API BASE URL:",Zp),console.log(" NUCLEAR API TOKEN:",r?`Present (${r.substring(0,20)}...)`:"Missing"),console.log(" Store token:",e?"Present":"Missing"),console.log(" Local token:",n?"Present":"Missing"),t.data instanceof FormData&&delete t.headers["Content-Type"],r?(t.headers.Authorization=`Bearer ${r}`,console.log(" Authorization header set:",`Bearer ${r.substring(0,20)}...`)):console.warn(" No token available for request:",t.url),t},t=>Promise.reject(t));ne.interceptors.response.use(t=>(console.log(" NUCLEAR API RESPONSE:",t.status,t.config.url),t),t=>{var e,n,r,i;return console.error(" NUCLEAR API RESPONSE ERROR:",(e=t.response)==null?void 0:e.status,(n=t.config)==null?void 0:n.url),console.error("NUCLEAR Load error:",t),(((r=t.response)==null?void 0:r.status)===401||((i=t.response)==null?void 0:i.status)===403)&&(console.log(" Authentication error, redirecting to home"),Ae.getState().logout(),window.location.pathname.includes("/")||(window.location.href="/")),Promise.reject(t)});const Jp=Object.freeze(Object.defineProperty({__proto__:null,api:ne,default:ne},Symbol.toStringTag,{value:"Module"})),Ae=rw()(lw((t,e)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(n,r)=>{t({isLoading:!0});try{const i=await ne.post("/auth/login",{username:n,password:r}),{access_token:o,user:a}=i.data;ne.defaults.headers.common.Authorization=`Bearer ${o}`,localStorage.setItem("access_token",o),localStorage.setItem("user_data",JSON.stringify(a)),t({user:a,token:o,isAuthenticated:!0,isLoading:!1})}catch(i){throw t({isLoading:!1}),i}},logout:()=>{delete ne.defaults.headers.common.Authorization,localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),t({user:null,token:null,isAuthenticated:!1})},refreshToken:async()=>{try{const n=await ne.post("/auth/refresh"),{access_token:r,user:i}=n.data;ne.defaults.headers.common.Authorization=`Bearer ${r}`,t({user:i,token:r,isAuthenticated:!0})}catch(n){throw e().logout(),n}},setUser:n=>{t({user:n})}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,isAuthenticated:t.isAuthenticated})}));try{const t=localStorage.getItem("access_token");if(t)ne.defaults.headers.common.Authorization=`Bearer ${t}`,console.log(" Token loaded from localStorage:",t.substring(0,20)+"...");else{const e=JSON.parse(localStorage.getItem("auth-storage")||"null");e&&e.token&&(ne.defaults.headers.common.Authorization=`Bearer ${e.token}`,console.log(" Token loaded from zustand storage:",e.token.substring(0,20)+"..."))}}catch(t){console.error(" Error loading token:",t)}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:l,...c},d)=>C.createElement("svg",{ref:d,...$_,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${H_(t)}`,s].join(" "),...c},[...e.map(([f,h])=>C.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=fe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=fe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=fe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=fe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=fe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=fe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=fe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=fe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=fe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=fe("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=fe("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i3=()=>{const t=yr(),{user:e}=Ae(),n=[{to:"/dashboard",label:"Trang ch",icon:tm},{to:(e==null?void 0:e.role)==="employee"?"/employee-dashboard":"/tasks",label:"Nhim v",icon:bi},{to:"/qr-scan",label:"Qut QR",icon:ji},{to:"/profile",label:"C nhn",icon:qo}],r=i=>t.pathname===i;return u.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40 safe-bottom",children:u.jsx("div",{className:"flex justify-around",children:n.map(i=>{const o=i.icon;return u.jsxs(Su,{to:i.to,className:`flex flex-col items-center py-2 px-3 flex-1 transition-colors ${r(i.to)?"text-green-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx(o,{size:20,className:"mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.to)})})})},o3=({children:t})=>{const{user:e,logout:n}=Ae(),r=yr(),i=bn(),[o,a]=C.useState(!1),s=()=>{n(),i("/")},l=()=>{a(!o)},c=()=>{a(!1)},d=[{to:"/dashboard",label:"Dashboard",icon:tm},{to:"/tasks",label:"Nhim v",icon:bi},{to:"/qr-scan",label:"Qut QR",icon:ji},{to:"/push-notifications",label:"Thng bo",icon:ku},...(e==null?void 0:e.role)==="manager"||(e==null?void 0:e.role)==="admin"?[{to:"/admin-dashboard",label:"Admin Dashboard",icon:Ou},{to:"/reports",label:"Bo co",icon:Ou},{to:"/users",label:"Nhn vin",icon:ns}]:[{to:"/employee-dashboard",label:"Nhim v ca ti",icon:bi}]],f=h=>r.pathname===h;return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsxs("div",{className:"lg:hidden bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between safe-top",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 via-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-white font-bold text-base",children:"MT"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-lg font-bold text-gray-900",children:"MANHTOAN"}),u.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Smart Patrol"})]})]}),u.jsx("button",{onClick:l,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:o?u.jsx(Zn,{size:24}):u.jsx(X_,{size:24})})]}),o&&u.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:c,children:u.jsx("div",{className:"fixed inset-y-0 right-0 w-64 bg-white shadow-lg",onClick:h=>h.stopPropagation(),children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 via-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"MT"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-lg font-bold text-gray-900",children:"MANHTOAN"}),u.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Smart Patrol"})]})]}),u.jsx("nav",{className:"space-y-2",children:d.map(h=>{const g=h.icon;return u.jsxs(Su,{to:h.to,onClick:c,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${f(h.to)?"bg-green-100 text-green-700 border-l-4 border-green-500":"text-gray-700 hover:bg-gray-100"}`,children:[u.jsx(g,{size:20}),u.jsx("span",{children:h.label})]},h.to)})}),u.jsxs("div",{className:"mt-8 border-t pt-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 px-4 py-3 mb-3",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:u.jsx(qo,{size:16})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:(e==null?void 0:e.full_name)||(e==null?void 0:e.username)}),u.jsx("p",{className:"text-sm text-gray-500",children:e==null?void 0:e.role})]})]}),u.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(a0,{size:16}),u.jsx("span",{className:"font-medium",children:"ng xut"})]})]})]})})}),u.jsx("div",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:z-50",children:u.jsxs("div",{className:"flex flex-col flex-grow bg-gray-900 pt-5 pb-4 overflow-y-auto",children:[u.jsx("div",{className:"flex items-center flex-shrink-0 px-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 via-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-white font-bold text-xl",children:"MT"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-white",children:"MANHTOAN"}),u.jsx("p",{className:"text-xs text-green-400 font-medium",children:"Smart Patrol System"})]})]})}),u.jsx("nav",{className:"mt-8 flex-1 px-2 space-y-1",children:d.map(h=>{const g=h.icon;return u.jsxs(Su,{to:h.to,className:`nav-link ${f(h.to)?"active":""}`,children:[u.jsx(g,{className:"w-5 h-5"}),h.label]},h.to)})}),u.jsxs("div",{className:"flex-shrink-0 px-4 py-4 border-t border-gray-700",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:u.jsx(qo,{className:"w-6 h-6 text-gray-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-medium",children:(e==null?void 0:e.full_name)||(e==null?void 0:e.username)}),u.jsx("p",{className:"text-gray-400 text-sm",children:e==null?void 0:e.role})]})]}),u.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx(a0,{className:"w-4 h-4"}),u.jsx("span",{className:"font-medium",children:"ng xut"})]})]})]})}),u.jsx("div",{className:"lg:pl-64",children:u.jsx("main",{className:"min-h-screen pb-20 lg:pb-0",children:t})}),u.jsx(i3,{})]})};let a3={data:""},s3=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||a3,l3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,c3=/\/\*[^]*?\*\/|  +/g,c0=/\n+/g,Kn=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+a+";":r+=o[1]=="f"?Kn(a,o):o+"{"+Kn(a,o[1]=="k"?"":e)+"}":typeof a=="object"?r+=Kn(a,e?e.replace(/([^,])+/g,s=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Kn.p?Kn.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Tn={},rm=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+rm(t[n]);return e}return t},u3=(t,e,n,r,i)=>{let o=rm(t),a=Tn[o]||(Tn[o]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(o));if(!Tn[a]){let l=o!==t?t:(c=>{let d,f,h=[{}];for(;d=l3.exec(c.replace(c3,""));)d[4]?h.shift():d[3]?(f=d[3].replace(c0," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(c0," ").trim();return h[0]})(t);Tn[a]=Kn(i?{["@keyframes "+a]:l}:l,n?"":"."+a)}let s=n&&Tn.g?Tn.g:null;return n&&(Tn.g=Tn[a]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Tn[a],e,r,s),a},d3=(t,e,n)=>t.reduce((r,i,o)=>{let a=e[o];if(a&&a.call){let s=a(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;a=l?"."+l:s&&typeof s=="object"?s.props?"":Kn(s,""):s===!1?"":s}return r+i+(a??"")},"");function xl(t){let e=this||{},n=t.call?t(e.p):t;return u3(n.unshift?n.raw?d3(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,s3(e.target),e.g,e.o,e.k)}let im,Du,Pu;xl.bind({g:1});let Bn=xl.bind({k:1});function f3(t,e,n,r){Kn.p=e,im=t,Du=n,Pu=r}function wr(t,e){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),l=s.className||i.className;n.p=Object.assign({theme:Du&&Du()},s),n.o=/ *go\d+/.test(l),s.className=xl.apply(n,r)+(l?" "+l:""),e&&(s.ref=a);let c=t;return t[0]&&(c=s.as||t,delete s.as),Pu&&c[0]&&Pu(s),im(c,s)}return e?e(i):i}}var h3=t=>typeof t=="function",Ms=(t,e)=>h3(t)?t(e):t,g3=(()=>{let t=0;return()=>(++t).toString()})(),om=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),p3=20,of="default",am=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return am(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},rs=[],sm={toasts:[],pausedAt:void 0,settings:{toastLimit:p3}},wn={},lm=(t,e=of)=>{wn[e]=am(wn[e]||sm,t),rs.forEach(([n,r])=>{n===e&&r(wn[e])})},cm=t=>Object.keys(wn).forEach(e=>lm(t,e)),m3=t=>Object.keys(wn).find(e=>wn[e].toasts.some(n=>n.id===t)),yl=(t=of)=>e=>{lm(e,t)},v3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},x3=(t={},e=of)=>{let[n,r]=C.useState(wn[e]||sm),i=C.useRef(wn[e]);C.useEffect(()=>(i.current!==wn[e]&&r(wn[e]),rs.push([e,r]),()=>{let a=rs.findIndex(([s])=>s===e);a>-1&&rs.splice(a,1)}),[e]);let o=n.toasts.map(a=>{var s,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((s=t[a.type])==null?void 0:s.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||v3[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...n,toasts:o}},y3=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||g3()}),sa=t=>(e,n)=>{let r=y3(e,t,n);return yl(r.toasterId||m3(r.id))({type:2,toast:r}),r.id},le=(t,e)=>sa("blank")(t,e);le.error=sa("error");le.success=sa("success");le.loading=sa("loading");le.custom=sa("custom");le.dismiss=(t,e)=>{let n={type:3,toastId:t};e?yl(e)(n):cm(n)};le.dismissAll=t=>le.dismiss(void 0,t);le.remove=(t,e)=>{let n={type:4,toastId:t};e?yl(e)(n):cm(n)};le.removeAll=t=>le.remove(void 0,t);le.promise=(t,e,n)=>{let r=le.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let o=e.success?Ms(e.success,i):void 0;return o?le.success(o,{id:r,...n,...n==null?void 0:n.success}):le.dismiss(r),i}).catch(i=>{let o=e.error?Ms(e.error,i):void 0;o?le.error(o,{id:r,...n,...n==null?void 0:n.error}):le.dismiss(r)}),t};var w3=1e3,_3=(t,e="default")=>{let{toasts:n,pausedAt:r}=x3(t,e),i=C.useRef(new Map).current,o=C.useCallback((f,h=w3)=>{if(i.has(f))return;let g=setTimeout(()=>{i.delete(f),a({type:4,toastId:f})},h);i.set(f,g)},[]);C.useEffect(()=>{if(r)return;let f=Date.now(),h=n.map(g=>{if(g.duration===1/0)return;let p=(g.duration||0)+g.pauseDuration-(f-g.createdAt);if(p<0){g.visible&&le.dismiss(g.id);return}return setTimeout(()=>le.dismiss(g.id,e),p)});return()=>{h.forEach(g=>g&&clearTimeout(g))}},[n,r,e]);let a=C.useCallback(yl(e),[e]),s=C.useCallback(()=>{a({type:5,time:Date.now()})},[a]),l=C.useCallback((f,h)=>{a({type:1,toast:{id:f,height:h}})},[a]),c=C.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),d=C.useCallback((f,h)=>{let{reverseOrder:g=!1,gutter:p=8,defaultPosition:m}=h||{},w=n.filter(y=>(y.position||m)===(f.position||m)&&y.height),x=w.findIndex(y=>y.id===f.id),v=w.filter((y,E)=>E<x&&y.visible).length;return w.filter(y=>y.visible).slice(...g?[v+1]:[0,v]).reduce((y,E)=>y+(E.height||0)+p,0)},[n]);return C.useEffect(()=>{n.forEach(f=>{if(f.dismissed)o(f.id,f.removeDelay);else{let h=i.get(f.id);h&&(clearTimeout(h),i.delete(f.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:l,startPause:s,endPause:c,calculateOffset:d}}},E3=Bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,C3=Bn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,S3=Bn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,b3=wr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${E3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${C3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${S3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,A3=Bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,N3=wr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${A3} 1s linear infinite;
`,T3=Bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,I3=Bn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,O3=wr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${T3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${I3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,k3=wr("div")`
  position: absolute;
`,R3=wr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,D3=Bn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,P3=wr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${D3} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,j3=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?C.createElement(P3,null,e):e:n==="blank"?null:C.createElement(R3,null,C.createElement(N3,{...r}),n!=="loading"&&C.createElement(k3,null,n==="error"?C.createElement(b3,{...r}):C.createElement(O3,{...r})))},M3=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,L3=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,B3="0%{opacity:0;} 100%{opacity:1;}",F3="0%{opacity:1;} 100%{opacity:0;}",U3=wr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$3=wr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,H3=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=om()?[B3,F3]:[M3(n),L3(n)];return{animation:e?`${Bn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},V3=C.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?H3(t.position||e||"top-center",t.visible):{opacity:0},o=C.createElement(j3,{toast:t}),a=C.createElement($3,{...t.ariaProps},Ms(t.message,t));return C.createElement(U3,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:o,message:a}):C.createElement(C.Fragment,null,o,a))});f3(C.createElement);var z3=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let o=C.useCallback(a=>{if(a){let s=()=>{let l=a.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return C.createElement("div",{ref:o,className:e,style:n},i)},W3=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:om()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},G3=xl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ka=16,X3=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:a,containerClassName:s})=>{let{toasts:l,handlers:c}=_3(n,o);return C.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:ka,left:ka,right:ka,bottom:ka,pointerEvents:"none",...a},className:s,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=W3(f,h);return C.createElement(z3,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?G3:"",style:g},d.type==="custom"?Ms(d.message,d):i?i(d):C.createElement(V3,{toast:d,position:f}))}))},X=le;const K3=()=>{const{user:t}=Ae(),e=bn(),[n,r]=C.useState({totalUsers:0,totalTasks:0,totalLocations:0,totalQRCodes:0,completedTasks:0,pendingTasks:0,activeUsers:0,recentActivity:[]}),[i,o]=C.useState(!0),[a,s]=C.useState([]),[l,c]=C.useState(0);C.useEffect(()=>{f(),(t==null?void 0:t.role)==="employee"&&(h(),d())},[t]),C.useEffect(()=>{if((t==null?void 0:t.role)==="employee"){const m=setInterval(()=>{h()},3e4);return()=>clearInterval(m)}},[t]),C.useEffect(()=>{const m=()=>{(t==null?void 0:t.role)==="employee"&&(f(),h(),d())};return window.addEventListener("taskCompleted",m),()=>window.removeEventListener("taskCompleted",m)},[t]);const d=async()=>{try{if((t==null?void 0:t.role)==="employee"&&t.id){const w=(await ne.get(`/patrol-tasks/user/${t.id}/new-tasks`)).data;c(w?w.length:0)}}catch(m){console.error("Error checking new tasks:",m)}},f=async()=>{try{console.log("Fetching dashboard stats..."),console.log("Auth token:",Ae.getState().token),console.log("Is authenticated:",Ae.getState().isAuthenticated);let m=0,w=0,x=0;if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager"){try{const _=(await ne.get("/users/")).data||[];m=_.length,x=_.filter(k=>k.is_active).length}catch(T){console.log("Cannot fetch users (403 expected for employee):",T)}try{w=((await ne.get("/qr-codes/")).data||[]).length}catch(T){console.log("Cannot fetch QR codes (403 expected for employee):",T)}}let v=[];if((t==null?void 0:t.role)==="employee")try{v=(await ne.get("/patrol-tasks/my-tasks")).data||[]}catch(T){console.log("Cannot fetch my-tasks (expected for employee):",T),v=[]}else try{v=(await ne.get("/patrol-tasks/")).data||[]}catch(T){console.log("Cannot fetch all tasks (403 expected for employee):",T),v=[]}let y=[];try{y=(await ne.get("/locations/")).data||[]}catch(T){console.log("Cannot fetch locations:",T),y=[]}const E=v.filter(T=>T.status==="completed").length,b=v.filter(T=>T.status==="pending").length,I=[{id:1,type:"task_created",description:"To nhim v mi: Tun tra khu vc A",timestamp:new Date().toISOString(),user:"Admin"},{id:2,type:"qr_generated",description:"To m QR cho v tr: Cng chnh",timestamp:new Date(Date.now()-36e5).toISOString(),user:"Manager"},{id:3,type:"user_registered",description:"ng k nhn vin mi: Nguyn Vn A",timestamp:new Date(Date.now()-72e5).toISOString(),user:"Admin"}];console.log("Dashboard data:",{totalUsers:m,tasks:v,locations:y,totalQRCodes:w,activeUsers:x}),r({totalUsers:m,totalTasks:v.length,totalLocations:y.length,totalQRCodes:w,completedTasks:E,pendingTasks:b,activeUsers:x,recentActivity:I})}catch(m){console.error("Error fetching dashboard stats:",m),le.error("Khng th ti thng k dashboard")}finally{o(!1)}},h=async()=>{try{console.log("Fetching my tasks...");const m=await ne.get("/patrol-tasks/my-tasks");console.log("API response:",m.data);const w=m.data||[];console.log("Tasks found:",w.length);const x=w.map(v=>{const y=p(v);return{...v,status:y.status,statusText:y.text,statusColor:y.color}});console.log("Updated tasks:",x),s(x)}catch(m){console.error("Error fetching my tasks:",m)}},g=async m=>{var w,x;try{console.log("Completing task:",m);const v=await ne.post(`/patrol-tasks/${m}/complete`);console.log("Task completed:",v.data),await h(),alert("Nhim v  c hon thnh thnh cng!")}catch(v){console.error("Error completing task:",v),alert("Li khi hon thnh nhim v: "+(((x=(w=v.response)==null?void 0:w.data)==null?void 0:x.detail)||v.message))}},p=m=>{const w=new Date,x=new Date(w.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),v=x.toISOString().split("T")[0],y=x.getHours()*60+x.getMinutes();console.log("=== TASK STATUS DEBUG ==="),console.log("Task:",m.title),console.log("Current time (Vietnam):",x.toLocaleString("vi-VN")),console.log("Current time (minutes):",y),console.log("Current date:",v);let E=null;try{E=JSON.parse(m.schedule_week).date}catch{}const b=E===v,I=E&&E<v,T=E&&E>v;if(m.status==="completed")return{status:"completed",text:" Hon thnh",color:"green"};if(I)return m.status==="completed"?{status:"completed",text:" Hon thnh",color:"green"}:{status:"overdue",text:" Qu hn",color:"red"};if(T)return{status:"pending",text:" Cha n ngy",color:"gray"};if(b){let _=null,k=null;if(m.stops&&m.stops.length>0){const O=m.stops.reduce((R,A)=>{if(A.scheduled_time){const[D,V]=A.scheduled_time.split(":").map(Number),W=D*60+V;if(!R||W<R.time)return{time:W,stop:A}}return R},null),j=m.stops.reduce((R,A)=>{if(A.scheduled_time){const[D,V]=A.scheduled_time.split(":").map(Number),W=D*60+V;if(!R||W>R.time)return{time:W,stop:A}}return R},null);O&&(_=O.time),j&&(k=j.time)}if(_&&k){const O=k+30;return console.log("Start time (minutes):",_),console.log("End time (minutes):",k),console.log("End time with buffer:",O),console.log("Current < Start?",y<_),console.log("Current >= Start && <= End?",y>=_&&y<=O),console.log("Current > End?",y>O),m.status==="completed"?(console.log("Status: COMPLETED"),{status:"completed",text:" Hon thnh",color:"green"}):y<_?(console.log("Status: PENDING (cha n gi)"),{status:"pending",text:" Ch thc hin",color:"blue"}):y>=_&&y<=O?(console.log("Status: IN_PROGRESS (trong gi lm vic)"),{status:"in_progress",text:" ang thc hin",color:"yellow"}):(console.log("Status: OVERDUE (qu hn)"),{status:"overdue",text:" Qu hn",color:"red"})}else return m.status==="completed"?{status:"completed",text:" Hon thnh",color:"green"}:{status:"pending",text:" Ch thc hin",color:"blue"}}return{status:m.status,text:m.status==="completed"?" Hon thnh":m.status==="in_progress"?" ang thc hin":" ang ch",color:m.status==="completed"?"green":m.status==="in_progress"?"blue":"yellow"}};return i?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),u.jsxs("p",{className:"text-gray-600",children:["Cho mng bn tr li, ",(t==null?void 0:t.full_name)||(t==null?void 0:t.username),"!"]}),(t==null?void 0:t.role)==="employee"&&l>0&&u.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Si,{className:"w-5 h-5 text-blue-600 mr-2"}),u.jsxs("span",{className:"text-blue-800 font-medium",children:["Bn c ",l," nhim v mi cn thc hin!"]})]})})]})})}),(t==null?void 0:t.role)==="employee"?u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:u.jsx(bi,{className:"w-6 h-6 text-green-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng nhim v"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalTasks})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:u.jsx(ts,{className:"w-6 h-6 text-purple-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng v tr"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalLocations})]})]})})]}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:u.jsx(ns,{className:"w-6 h-6 text-blue-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng ngi dng"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalUsers})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:u.jsx(bi,{className:"w-6 h-6 text-green-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng nhim v"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalTasks})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:u.jsx(ts,{className:"w-6 h-6 text-purple-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng v tr"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalLocations})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:u.jsx(ji,{className:"w-6 h-6 text-orange-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng m QR"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.totalQRCodes})]})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trng thi nhim v"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(yn,{className:"w-5 h-5 text-green-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"Hon thnh"})]}),u.jsx("span",{className:"text-lg font-semibold text-green-600",children:n.completedTasks})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(js,{className:"w-5 h-5 text-yellow-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"ang ch"})]}),u.jsx("span",{className:"text-lg font-semibold text-yellow-600",children:n.pendingTasks})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Si,{className:"w-5 h-5 text-blue-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"ang thc hin"})]}),u.jsx("span",{className:"text-lg font-semibold text-blue-600",children:n.totalTasks-n.completedTasks-n.pendingTasks})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thng k ngi dng"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(t3,{className:"w-5 h-5 text-green-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"ang hot ng"})]}),u.jsx("span",{className:"text-lg font-semibold text-green-600",children:n.activeUsers})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(ns,{className:"w-5 h-5 text-gray-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"Tng cng"})]}),u.jsx("span",{className:"text-lg font-semibold text-gray-600",children:n.totalUsers})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(e3,{className:"w-5 h-5 text-blue-500 mr-2"}),u.jsx("span",{className:"text-gray-700",children:"T l hot ng"})]}),u.jsxs("span",{className:"text-lg font-semibold text-blue-600",children:[n.totalUsers>0?Math.round(n.activeUsers/n.totalUsers*100):0,"%"]})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hot ng gn y"}),u.jsx("div",{className:"space-y-4",children:n.recentActivity.map(m=>u.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[u.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:u.jsx(Ou,{className:"w-4 h-4 text-blue-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.description}),u.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(m.timestamp).toLocaleString("vi-VN"),"  ",m.user]})]})]},m.id))})]}),((t==null?void 0:t.role)==="manager"||(t==null?void 0:t.role)==="admin")&&u.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-8",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thao tc nhanh"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>window.location.href="/tasks",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[u.jsx(bi,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"To nhim v mi"})]}),u.jsxs("button",{onClick:()=>window.location.href="/tasks?tab=qr",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[u.jsx(ji,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"To m QR"})]}),u.jsxs("button",{onClick:()=>window.location.href="/users",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[u.jsx(ns,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Qun l ngi dng"})]})]})]}),(t==null?void 0:t.role)==="employee"&&u.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:" Nhim v c giao"}),u.jsx("div",{className:"space-y-6",children:a.length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-lg text-gray-500",children:"Bn cha c nhim v no c giao."})}):a.map(m=>u.jsxs("div",{className:`rounded-lg p-6 border-2 ${m.statusColor==="green"?"bg-green-50 border-green-200":m.statusColor==="red"?"bg-red-50 border-red-200":m.statusColor==="yellow"?"bg-yellow-50 border-yellow-200":m.statusColor==="blue"?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-xl font-bold text-gray-900",children:m.title}),u.jsx("span",{className:`px-4 py-2 rounded-full text-lg font-bold ${m.statusColor==="green"?"bg-green-500 text-white":m.statusColor==="red"?"bg-red-500 text-white":m.statusColor==="yellow"?"bg-yellow-500 text-white":m.statusColor==="blue"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,children:m.statusText||" ang ch"})]}),(()=>{var y;const w=m.status==="completed",x=m.status==="overdue"||((y=m.statusText)==null?void 0:y.includes("Qu hn")),v=!w&&!x;return console.log("Task:",m.title,"Status:",m.status,"StatusText:",m.statusText,"IsOverdue:",x,"Should show button:",v),v})()&&u.jsx("div",{className:"mb-4",children:u.jsx("button",{onClick:()=>g(m.id),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:" Hon thnh"})}),m.description&&u.jsx("p",{className:"text-lg text-gray-700 mb-3",children:m.description}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx(ts,{className:"w-6 h-6 text-gray-500 mr-3 mt-1"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"V tr cn tun tra:"}),m.stops&&m.stops.length>0?u.jsxs("div",{className:"space-y-2",children:[console.log("Task stops:",m.stops),m.stops.sort((w,x)=>w.sequence-x.sequence).map((w,x)=>(console.log("Stop data:",w,"Scheduled time:",w.scheduled_time),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm mr-3 ${w.visited?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:w.visited?"":x+1}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`text-sm font-medium ${w.visited?"text-green-700":"text-gray-900"}`,children:[w.location_name,w.scheduled_time&&u.jsxs("span",{className:"ml-2 text-green-600 font-medium",children:["(",w.scheduled_time,")"]})]}),w.visited_at&&u.jsxs("p",{className:"text-xs text-gray-500",children:["  chm cng: ",new Date(w.visited_at).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),w.scheduled_time&&u.jsxs("span",{className:"ml-2 text-blue-600 font-medium",children:["(Giao: ",w.scheduled_time,")"]})]})]})]},w.location_id)))]}):u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m.location_name||"Cha xc nh"})]})]}),m.schedule_week&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(js,{className:"w-6 h-6 text-gray-500 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Thi gian:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(()=>{try{const w=JSON.parse(m.schedule_week),x=w.date,v=w.startTime,y=w.endTime;return`${new Date(x).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})} | ${v} - ${y}`}catch{return m.schedule_week}})()})]})]})]}),m.due_date&&u.jsxs("div",{className:"mt-4 flex items-center",children:[u.jsx(rf,{className:"w-6 h-6 text-gray-500 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Ngy hn:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(m.due_date).toLocaleDateString("vi-VN")})]})]})]},m.id))})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Xc thc khun mt"}),u.jsxs("button",{onClick:()=>e("/face-auth-settings"),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 transition-colors",children:[u.jsx(nm,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:"Ci t"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[u.jsx(Qo,{className:"w-6 h-6 text-blue-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-blue-800",children:"ng nhp nhanh"}),u.jsx("p",{className:"text-sm text-blue-600",children:"S dng khun mt  ng nhp"})]})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx(yn,{className:"w-6 h-6 text-green-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-800",children:"Bo mt cao"}),u.jsx("p",{className:"text-sm text-green-600",children:"D liu c m ha an ton"})]})]})]})]})]})},Q3="https://rolanda-skinless-sue.ngrok-free.dev",um=()=>Q3,No=t=>{const e=um();return t?t.startsWith("data:image/")||t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/uploads/")?`${e}${t}`:`${e}/uploads/${t}`:""},u0=t=>`${um()}/api/qr-codes/${t}/image`,Y3=({value:t,onChange:e,placeholder:n="Chn ngy v khong thi gian",className:r="",disabled:i=!1})=>{const[o,a]=C.useState(""),[s,l]=C.useState(""),[c,d]=C.useState(""),[f,h]=C.useState(!1);C.useEffect(()=>{if(t)try{const p=JSON.parse(t);p.date&&a(p.date),p.startTime&&l(p.startTime),p.endTime&&d(p.endTime)}catch{const m=new Date(t);if(!isNaN(m.getTime())){const w=m.getFullYear(),x=String(m.getMonth()+1).padStart(2,"0"),v=String(m.getDate()).padStart(2,"0"),y=String(m.getHours()).padStart(2,"0"),E=String(m.getMinutes()).padStart(2,"0");a(`${w}-${x}-${v}`),l(`${y}:${E}`);const b=(parseInt(y)+1)%24;d(`${String(b).padStart(2,"0")}:${E}`)}}else{const p=new Date,m=p.getFullYear(),w=String(p.getMonth()+1).padStart(2,"0"),x=String(p.getDate()).padStart(2,"0"),v=String(p.getHours()).padStart(2,"0"),y=String(p.getMinutes()).padStart(2,"0");a(`${m}-${w}-${x}`),l(`${v}:${y}`);const E=(parseInt(v)+1)%24;d(`${String(E).padStart(2,"0")}:${y}`)}},[t]),C.useEffect(()=>{if(o&&s&&c){const p=parseInt(s.split(":")[0]),m=parseInt(c.split(":")[0]);p>=0&&p<=23&&m>=0&&m<=23&&e(JSON.stringify({date:o,startTime:s,endTime:c}))}},[o,s,c,e]);const g=()=>o&&s&&c?`${new Date(o).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"})} | ${s} - ${c}`:n;return u.jsxs("div",{className:`relative ${r}`,children:[u.jsxs("div",{className:`
          flex items-center space-x-3 p-4 border rounded-lg cursor-pointer
          ${i?"bg-gray-100 cursor-not-allowed":"bg-white hover:border-blue-500"}
          ${f?"border-blue-500 ring-2 ring-blue-200":"border-gray-300"}
        `,onClick:()=>!i&&h(!f),children:[u.jsx(rf,{className:"w-5 h-5 text-gray-500"}),u.jsx("span",{className:"flex-1 text-base text-gray-700 font-medium",children:g()}),u.jsx(js,{className:"w-5 h-5 text-gray-500"})]}),f&&!i&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 p-4",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ngy tun tra"}),u.jsx("input",{type:"date",value:o,onChange:p=>a(p.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:new Date().toISOString().split("T")[0]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[u.jsx(Q_,{className:"w-4 h-4 mr-1 text-green-600"}),"Bt u"]}),u.jsx("input",{type:"time",value:s,onChange:p=>l(p.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[u.jsx(Z_,{className:"w-4 h-4 mr-1 text-red-600"}),"Kt thc"]}),u.jsx("input",{type:"time",value:c,onChange:p=>d(p.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s&&c&&u.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:u.jsxs("div",{className:"text-sm text-blue-800",children:[u.jsx("div",{className:"font-medium",children:"Khong thi gian:"}),u.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:s}),u.jsx("span",{className:"text-gray-500",children:""}),u.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-xs",children:c})]})]})}),u.jsxs("div",{className:"flex justify-end space-x-2",children:[u.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Hy"}),u.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Xc nhn"})]})]})})]})};var Mi={},q3=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},dm={},zt={};let af;const Z3=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];zt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};zt.getSymbolTotalCodewords=function(e){return Z3[e]};zt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};zt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');af=e};zt.isKanjiModeEnabled=function(){return typeof af<"u"};zt.toSJIS=function(e){return af(e)};var wl={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(wl);function fm(){this.buffer=[],this.length=0}fm.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var J3=fm;function la(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}la.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};la.prototype.get=function(t,e){return this.data[t*this.size+e]};la.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};la.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var e4=la,hm={};(function(t){const e=zt.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=e(r),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},t.getPositions=function(r){const i=[],o=t.getRowColCoords(r),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(hm);var gm={};const t4=zt.getSymbolSize,d0=7;gm.getPositions=function(e){const n=t4(e);return[[0,0],[n-d0,0],[0,n-d0]]};var pm={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,c=null,d=null;for(let f=0;f<o;f++){s=l=0,c=d=null;for(let h=0;h<o;h++){let g=i.get(f,h);g===c?s++:(s>=5&&(a+=e.N1+(s-5)),c=g,s=1),g=i.get(h,f),g===d?l++:(l>=5&&(a+=e.N1+(l-5)),d=g,l=1)}s>=5&&(a+=e.N1+(s-5)),l>=5&&(a+=e.N1+(l-5))}return a},t.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const c=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(c===4||c===0)&&a++}return a*e.N2},t.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let c=0;c<o;c++){s=l=0;for(let d=0;d<o;d++)s=s<<1&2047|i.get(c,d),d>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&a++}return a*e.N3},t.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*e.N4};function n(r,i,o){switch(r){case t.Patterns.PATTERN000:return(i+o)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return o%3===0;case t.Patterns.PATTERN011:return(i+o)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case t.Patterns.PATTERN101:return i*o%2+i*o%3===0;case t.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case t.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,n(i,l,s))},t.getBestMask=function(i,o){const a=Object.keys(t.Patterns).length;let s=0,l=1/0;for(let c=0;c<a;c++){o(c),t.applyMask(c,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),d<l&&(l=d,s=c)}return s}})(pm);var _l={};const Jn=wl,Ra=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Da=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];_l.getBlocksCount=function(e,n){switch(n){case Jn.L:return Ra[(e-1)*4+0];case Jn.M:return Ra[(e-1)*4+1];case Jn.Q:return Ra[(e-1)*4+2];case Jn.H:return Ra[(e-1)*4+3];default:return}};_l.getTotalCodewordsCount=function(e,n){switch(n){case Jn.L:return Da[(e-1)*4+0];case Jn.M:return Da[(e-1)*4+1];case Jn.Q:return Da[(e-1)*4+2];case Jn.H:return Da[(e-1)*4+3];default:return}};var mm={},El={};const To=new Uint8Array(512),Ls=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)To[n]=e,Ls[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)To[n]=To[n-255]})();El.log=function(e){if(e<1)throw new Error("log("+e+")");return Ls[e]};El.exp=function(e){return To[e]};El.mul=function(e,n){return e===0||n===0?0:To[Ls[e]+Ls[n]]};(function(t){const e=El;t.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let a=0;a<r.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=e.mul(r[a],i[s]);return o},t.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=e.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=t.mul(i,new Uint8Array([1,e.exp(o)]));return i}})(mm);const vm=mm;function sf(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}sf.prototype.initialize=function(e){this.degree=e,this.genPoly=vm.generateECPolynomial(this.degree)};sf.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=vm.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(r,i),o}return r};var n4=sf,xm={},_r={},lf={};lf.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var An={};const ym="[0-9]+",r4="[A-Z $%*+\\-./:]+";let Zo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Zo=Zo.replace(/u/g,"\\u");const i4="(?:(?![A-Z0-9 $%*+\\-./:]|"+Zo+`)(?:.|[\r
]))+`;An.KANJI=new RegExp(Zo,"g");An.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");An.BYTE=new RegExp(i4,"g");An.NUMERIC=new RegExp(ym,"g");An.ALPHANUMERIC=new RegExp(r4,"g");const o4=new RegExp("^"+Zo+"$"),a4=new RegExp("^"+ym+"$"),s4=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");An.testKanji=function(e){return o4.test(e)};An.testNumeric=function(e){return a4.test(e)};An.testAlphanumeric=function(e){return s4.test(e)};(function(t){const e=lf,n=An;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},t.getBestModeForData=function(o){return n.testNumeric(o)?t.NUMERIC:n.testAlphanumeric(o)?t.ALPHANUMERIC:n.testKanji(o)?t.KANJI:t.BYTE},t.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},t.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(o,a){if(t.isValid(o))return o;try{return r(o)}catch{return a}}})(_r);(function(t){const e=zt,n=_l,r=wl,i=_r,o=lf,a=7973,s=e.getBCHDigit(a);function l(h,g,p){for(let m=1;m<=40;m++)if(g<=t.getCapacity(m,p,h))return m}function c(h,g){return i.getCharCountIndicator(h,g)+4}function d(h,g){let p=0;return h.forEach(function(m){const w=c(m.mode,g);p+=w+m.getBitsLength()}),p}function f(h,g){for(let p=1;p<=40;p++)if(d(h,p)<=t.getCapacity(p,g,i.MIXED))return p}t.from=function(g,p){return o.isValid(g)?parseInt(g,10):p},t.getCapacity=function(g,p,m){if(!o.isValid(g))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=i.BYTE);const w=e.getSymbolTotalCodewords(g),x=n.getTotalCodewordsCount(g,p),v=(w-x)*8;if(m===i.MIXED)return v;const y=v-c(m,g);switch(m){case i.NUMERIC:return Math.floor(y/10*3);case i.ALPHANUMERIC:return Math.floor(y/11*2);case i.KANJI:return Math.floor(y/13);case i.BYTE:default:return Math.floor(y/8)}},t.getBestVersionForData=function(g,p){let m;const w=r.from(p,r.M);if(Array.isArray(g)){if(g.length>1)return f(g,w);if(g.length===0)return 1;m=g[0]}else m=g;return l(m.mode,m.getLength(),w)},t.getEncodedBits=function(g){if(!o.isValid(g)||g<7)throw new Error("Invalid QR Code version");let p=g<<12;for(;e.getBCHDigit(p)-s>=0;)p^=a<<e.getBCHDigit(p)-s;return g<<12|p}})(xm);var wm={};const ju=zt,_m=1335,l4=21522,f0=ju.getBCHDigit(_m);wm.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;ju.getBCHDigit(i)-f0>=0;)i^=_m<<ju.getBCHDigit(i)-f0;return(r<<10|i)^l4};var Em={};const c4=_r;function Li(t){this.mode=c4.NUMERIC,this.data=t.toString()}Li.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Li.prototype.getLength=function(){return this.data.length};Li.prototype.getBitsLength=function(){return Li.getBitsLength(this.data.length)};Li.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const o=this.data.length-n;o>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,o*3+1))};var u4=Li;const d4=_r,cc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Bi(t){this.mode=d4.ALPHANUMERIC,this.data=t}Bi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Bi.prototype.getLength=function(){return this.data.length};Bi.prototype.getBitsLength=function(){return Bi.getBitsLength(this.data.length)};Bi.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=cc.indexOf(this.data[n])*45;r+=cc.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(cc.indexOf(this.data[n]),6)};var f4=Bi;const h4=_r;function Fi(t){this.mode=h4.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Fi.getBitsLength=function(e){return e*8};Fi.prototype.getLength=function(){return this.data.length};Fi.prototype.getBitsLength=function(){return Fi.getBitsLength(this.data.length)};Fi.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var g4=Fi;const p4=_r,m4=zt;function Ui(t){this.mode=p4.KANJI,this.data=t}Ui.getBitsLength=function(e){return e*13};Ui.prototype.getLength=function(){return this.data.length};Ui.prototype.getBitsLength=function(){return Ui.getBitsLength(this.data.length)};Ui.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=m4.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var v4=Ui,Cm={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var o={},a={};a[r]=0;var s=e.PriorityQueue.make();s.push(r,0);for(var l,c,d,f,h,g,p,m,w;!s.empty();){l=s.pop(),c=l.value,f=l.cost,h=n[c]||{};for(d in h)h.hasOwnProperty(d)&&(g=h[d],p=f+g,m=a[d],w=typeof a[d]>"u",(w||m>p)&&(a[d]=p,s.push(d,p),o[d]=c))}if(typeof i<"u"&&typeof a[i]>"u"){var x=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(x)}return o},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],o=r;o;)i.push(o),n[o],o=n[o];return i.reverse(),i},find_path:function(n,r,i){var o=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},o;n=n||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Cm);var x4=Cm.exports;(function(t){const e=_r,n=u4,r=f4,i=g4,o=v4,a=An,s=zt,l=x4;function c(x){return unescape(encodeURIComponent(x)).length}function d(x,v,y){const E=[];let b;for(;(b=x.exec(y))!==null;)E.push({data:b[0],index:b.index,mode:v,length:b[0].length});return E}function f(x){const v=d(a.NUMERIC,e.NUMERIC,x),y=d(a.ALPHANUMERIC,e.ALPHANUMERIC,x);let E,b;return s.isKanjiModeEnabled()?(E=d(a.BYTE,e.BYTE,x),b=d(a.KANJI,e.KANJI,x)):(E=d(a.BYTE_KANJI,e.BYTE,x),b=[]),v.concat(y,E,b).sort(function(T,_){return T.index-_.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function h(x,v){switch(v){case e.NUMERIC:return n.getBitsLength(x);case e.ALPHANUMERIC:return r.getBitsLength(x);case e.KANJI:return o.getBitsLength(x);case e.BYTE:return i.getBitsLength(x)}}function g(x){return x.reduce(function(v,y){const E=v.length-1>=0?v[v.length-1]:null;return E&&E.mode===y.mode?(v[v.length-1].data+=y.data,v):(v.push(y),v)},[])}function p(x){const v=[];for(let y=0;y<x.length;y++){const E=x[y];switch(E.mode){case e.NUMERIC:v.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:v.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:v.push([E,{data:E.data,mode:e.BYTE,length:c(E.data)}]);break;case e.BYTE:v.push([{data:E.data,mode:e.BYTE,length:c(E.data)}])}}return v}function m(x,v){const y={},E={start:{}};let b=["start"];for(let I=0;I<x.length;I++){const T=x[I],_=[];for(let k=0;k<T.length;k++){const O=T[k],j=""+I+k;_.push(j),y[j]={node:O,lastCount:0},E[j]={};for(let R=0;R<b.length;R++){const A=b[R];y[A]&&y[A].node.mode===O.mode?(E[A][j]=h(y[A].lastCount+O.length,O.mode)-h(y[A].lastCount,O.mode),y[A].lastCount+=O.length):(y[A]&&(y[A].lastCount=O.length),E[A][j]=h(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,v))}}b=_}for(let I=0;I<b.length;I++)E[b[I]].end=0;return{map:E,table:y}}function w(x,v){let y;const E=e.getBestModeForData(x);if(y=e.from(v,E),y!==e.BYTE&&y.bit<E.bit)throw new Error('"'+x+'" cannot be encoded with mode '+e.toString(y)+`.
 Suggested mode is: `+e.toString(E));switch(y===e.KANJI&&!s.isKanjiModeEnabled()&&(y=e.BYTE),y){case e.NUMERIC:return new n(x);case e.ALPHANUMERIC:return new r(x);case e.KANJI:return new o(x);case e.BYTE:return new i(x)}}t.fromArray=function(v){return v.reduce(function(y,E){return typeof E=="string"?y.push(w(E,null)):E.data&&y.push(w(E.data,E.mode)),y},[])},t.fromString=function(v,y){const E=f(v,s.isKanjiModeEnabled()),b=p(E),I=m(b,y),T=l.find_path(I.map,"start","end"),_=[];for(let k=1;k<T.length-1;k++)_.push(I.table[T[k]].node);return t.fromArray(g(_))},t.rawSplit=function(v){return t.fromArray(f(v,s.isKanjiModeEnabled()))}})(Em);const Cl=zt,uc=wl,y4=J3,w4=e4,_4=hm,E4=gm,Mu=pm,Lu=_l,C4=n4,Bs=xm,S4=wm,b4=_r,dc=Em;function A4(t,e){const n=t.size,r=E4.getPositions(e);for(let i=0;i<r.length;i++){const o=r[i][0],a=r[i][1];for(let s=-1;s<=7;s++)if(!(o+s<=-1||n<=o+s))for(let l=-1;l<=7;l++)a+l<=-1||n<=a+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?t.set(o+s,a+l,!0,!0):t.set(o+s,a+l,!1,!0))}}function N4(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function T4(t,e){const n=_4.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],o=n[r][1];for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a===-2||a===2||s===-2||s===2||a===0&&s===0?t.set(i+a,o+s,!0,!0):t.set(i+a,o+s,!1,!0)}}function I4(t,e){const n=t.size,r=Bs.getEncodedBits(e);let i,o,a;for(let s=0;s<18;s++)i=Math.floor(s/3),o=s%3+n-8-3,a=(r>>s&1)===1,t.set(i,o,a,!0),t.set(o,i,a,!0)}function fc(t,e,n){const r=t.size,i=S4.getEncodedBits(e,n);let o,a;for(o=0;o<15;o++)a=(i>>o&1)===1,o<6?t.set(o,8,a,!0):o<8?t.set(o+1,8,a,!0):t.set(r-15+o,8,a,!0),o<8?t.set(8,r-o-1,a,!0):o<9?t.set(8,15-o-1+1,a,!0):t.set(8,15-o-1,a,!0);t.set(r-8,8,1,!0)}function O4(t,e){const n=t.size;let r=-1,i=n-1,o=7,a=0;for(let s=n-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,s-l)){let c=!1;a<e.length&&(c=(e[a]>>>o&1)===1),t.set(i,s-l,c),o--,o===-1&&(a++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function k4(t,e,n){const r=new y4;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),b4.getCharCountIndicator(l.mode,t)),l.write(r)});const i=Cl.getSymbolTotalCodewords(t),o=Lu.getTotalCodewordsCount(t,e),a=(i-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return R4(r,t,e)}function R4(t,e,n){const r=Cl.getSymbolTotalCodewords(e),i=Lu.getTotalCodewordsCount(e,n),o=r-i,a=Lu.getBlocksCount(e,n),s=r%a,l=a-s,c=Math.floor(r/a),d=Math.floor(o/a),f=d+1,h=c-d,g=new C4(h);let p=0;const m=new Array(a),w=new Array(a);let x=0;const v=new Uint8Array(t.buffer);for(let T=0;T<a;T++){const _=T<l?d:f;m[T]=v.slice(p,p+_),w[T]=g.encode(m[T]),p+=_,x=Math.max(x,_)}const y=new Uint8Array(r);let E=0,b,I;for(b=0;b<x;b++)for(I=0;I<a;I++)b<m[I].length&&(y[E++]=m[I][b]);for(b=0;b<h;b++)for(I=0;I<a;I++)y[E++]=w[I][b];return y}function D4(t,e,n,r){let i;if(Array.isArray(t))i=dc.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const d=dc.rawSplit(t);c=Bs.getBestVersionForData(d,n)}i=dc.fromString(t,c||40)}else throw new Error("Invalid data");const o=Bs.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=k4(e,n,i),s=Cl.getSymbolSize(e),l=new w4(s);return A4(l,e),N4(l),T4(l,e),fc(l,n,0),e>=7&&I4(l,e),O4(l,a),isNaN(r)&&(r=Mu.getBestMask(l,fc.bind(null,l,n))),Mu.applyMask(r,l),fc(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}dm.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=uc.M,i,o;return typeof n<"u"&&(r=uc.from(n.errorCorrectionLevel,uc.M),i=Bs.from(n.version),o=Mu.from(n.maskPattern),n.toSJISFunc&&Cl.setToSJISFunction(n.toSJISFunc)),D4(e,i,r,o)};var Sm={},cf={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const o=t.getScale(r,i);return Math.floor((r+i.margin*2)*o)},t.qrToImageData=function(r,i,o){const a=i.modules.size,s=i.modules.data,l=t.getScale(a,o),c=Math.floor((a+o.margin*2)*l),d=o.margin*l,f=[o.color.light,o.color.dark];for(let h=0;h<c;h++)for(let g=0;g<c;g++){let p=(h*c+g)*4,m=o.color.light;if(h>=d&&g>=d&&h<c-d&&g<c-d){const w=Math.floor((h-d)/l),x=Math.floor((g-d)/l);m=f[s[w*a+x]?1:0]}r[p++]=m.r,r[p++]=m.g,r[p++]=m.b,r[p]=m.a}}})(cf);(function(t){const e=cf;function n(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(o,a,s){let l=s,c=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(c=r()),l=e.getOptions(l);const d=e.getImageWidth(o.modules.size,l),f=c.getContext("2d"),h=f.createImageData(d,d);return e.qrToImageData(h.data,o,l),n(f,c,d),f.putImageData(h,0,0),c},t.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const c=t.render(o,a,l),d=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(d,f.quality)}})(Sm);var bm={};const P4=cf;function h0(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function hc(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function j4(t,e,n){let r="",i=0,o=!1,a=0;for(let s=0;s<t.length;s++){const l=Math.floor(s%e),c=Math.floor(s/e);!l&&!o&&(o=!0),t[s]?(a++,s>0&&l>0&&t[s-1]||(r+=o?hc("M",l+n,.5+c+n):hc("m",i,0),i=0,o=!1),l+1<e&&t[s+1]||(r+=hc("h",a),a=0)):i++}return r}bm.render=function(e,n,r){const i=P4.getOptions(n),o=e.modules.size,a=e.modules.data,s=o+i.margin*2,l=i.color.light.a?"<path "+h0(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",c="<path "+h0(i.color.dark,"stroke")+' d="'+j4(a,o,i.margin)+'"/>',d='viewBox="0 0 '+s+" "+s+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,h),h};const M4=q3,Bu=dm,Am=Sm,L4=bm;function uf(t,e,n,r,i){const o=[].slice.call(arguments,1),a=o.length,s=typeof o[a-1]=="function";if(!s&&!M4())throw new Error("Callback required as last argument");if(s){if(a<2)throw new Error("Too few arguments provided");a===2?(i=n,n=e,e=r=void 0):a===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(n=e,e=r=void 0):a===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,c){try{const d=Bu.create(n,r);l(t(d,e,r))}catch(d){c(d)}})}try{const l=Bu.create(n,r);i(null,t(l,e,r))}catch(l){i(l)}}Mi.create=Bu.create;Mi.toCanvas=uf.bind(null,Am.render);Mi.toDataURL=uf.bind(null,Am.renderToDataURL);Mi.toString=uf.bind(null,function(t,e,n){return L4.render(t,n)});const B4=({taskId:t,onComplete:e})=>{const[n,r]=C.useState(null),[i,o]=C.useState(!0);if(C.useEffect(()=>{(async()=>{try{const c=await ne.get(`/patrol-tasks/${t}/completion-status`);r(c.data)}catch(c){console.error("Error checking completion status:",c)}finally{o(!1)}})()},[t]),i)return u.jsx("div",{className:"text-sm text-gray-500",children:"ang kim tra..."});if(!n)return u.jsx("div",{className:"text-sm text-red-500",children:"Khng th kim tra trng thi"});const a=n.can_complete,s=n.missing_stops||[];return u.jsx("div",{className:"space-y-3",children:a?u.jsxs("button",{onClick:()=>e(t),className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center space-x-2",children:[u.jsx(yn,{className:"w-4 h-4"}),u.jsx("span",{children:"Hon thnh nhim v"})]}):u.jsxs("div",{className:"text-sm text-yellow-600 bg-yellow-50 p-3 rounded-lg",children:[u.jsx("p",{className:"font-medium mb-2",children:"Cha th hon thnh:"}),u.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.map((l,c)=>u.jsxs("li",{children:[l.location_name," ",l.scheduled_time&&`(${l.scheduled_time})`]},c))})]})})},F4=({taskId:t,onComplete:e})=>{const[n,r]=C.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",title:"Hon thnh nhim v",children:[u.jsx(yn,{className:"w-4 h-4"}),u.jsx("span",{children:"Hon thnh"})]}),n&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Hon thnh nhim v"}),u.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:u.jsx(Zn,{className:"w-5 h-5"})})]}),u.jsx(B4,{taskId:t,onComplete:i=>{e(i),r(!1)}})]})})]})},U4=()=>{const{user:t}=Ae(),[e,n]=C.useState("tasks"),r=P=>P.status==="completed"?"green":P.status==="in_progress"?"blue":P.status==="pending"?"yellow":P.status==="overdue"?"red":"gray",i=P=>P.status==="completed"?"Hon thnh":P.status==="in_progress"?"ang thc hin":P.status==="pending"?"Ch thc hin":P.status==="overdue"?"Qu hn":"Khng xc nh",o=P=>{var Q;return((Q=P.location)==null?void 0:Q.name)||"Khng xc nh"},[a,s]=C.useState([]),[l,c]=C.useState([]),[d,f]=C.useState([]),[h,g]=C.useState([]),[p,m]=C.useState(!0),[w,x]=C.useState(!1),[v,y]=C.useState(null),[E,b]=C.useState(!1),[I,T]=C.useState(null),[_,k]=C.useState(!1),[O,j]=C.useState({data:"",type:"static",location_id:""}),[R,A]=C.useState({title:"",description:"",assigned_to:"",due_date:"",location_id:"",schedule_week:""}),[D,V]=C.useState([{qr_code_id:"",qr_code_name:"",scheduled_time:""}]),W=C.useCallback(P=>{A(Q=>({...Q,schedule_week:P}))},[]),J=C.useCallback(P=>{A(Q=>({...Q,title:P.target.value}))},[]),N=C.useCallback(P=>{A(Q=>({...Q,description:P.target.value}))},[]),B=C.useCallback(P=>{A(Q=>({...Q,assigned_to:P.target.value}))},[]),H=(t==null?void 0:t.role)==="manager"||(t==null?void 0:t.role)==="admin";C.useEffect(()=>{F(),H&&(z(),G(),re())},[H]);const F=async()=>{var P,Q;try{if(!(localStorage.getItem("auth-storage")?JSON.parse(localStorage.getItem("auth-storage")).state.token:null)){console.log("No token found for fetching tasks");return}let ae;(t==null?void 0:t.role)==="employee"?ae=await ne.get("/patrol-tasks/my-tasks"):ae=await ne.get("/patrol-tasks/");const at=(ae.data||[]).map(Er=>{const Cr=L(Er);return{...Er,status:Cr.status,statusText:Cr.text,statusColor:Cr.color}});s(at)}catch(q){if(console.error("Error fetching tasks:",q),((P=q==null?void 0:q.response)==null?void 0:P.status)===401||((Q=q==null?void 0:q.response)==null?void 0:Q.status)===403){console.log("Authentication error, redirecting to login"),Ae.getState().logout(),window.location.href="/";return}le.error("Khng th ti danh sch nhim v")}finally{m(!1)}},L=P=>{const Q=new Date,q=new Date(Q.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),ae=q.toISOString().split("T")[0],Se=q.getHours()*60+q.getMinutes();console.log("=== TASK STATUS DEBUG (TasksPage) ==="),console.log("Task:",P.title),console.log("Current time (Vietnam):",q.toLocaleString("vi-VN")),console.log("Current time (minutes):",Se),console.log("Current date:",ae);let at=null;try{P.created_at&&(at=new Date(P.created_at).toISOString().split("T")[0],console.log(`Task created_at: ${P.created_at}, parsed date: ${at}`))}catch(en){console.log("Error parsing task date:",en)}const Er=at===ae,Cr=at&&at<ae,_f=at&&at>ae;if(P.status==="completed")return console.log("Status: COMPLETED (from backend)"),{status:"completed",text:" Hon thnh",color:"green"};if(Cr)return P.status==="completed"?(console.log(" PAST TASK COMPLETED: Task hm qua  hon thnh"),{status:"completed",text:" Hon thnh",color:"green"}):(console.log(" PAST TASK OVERDUE: Task hm qua cha chm cng"),{status:"overdue",text:" Qu hn",color:"red"});if(_f)return{status:"pending",text:" Cha n ngy",color:"gray"};if(Er){let en=null,fa=null;if(P.stops&&P.stops.length>0){const Sr=P.stops.reduce((br,Ar)=>{if(Ar.scheduled_time){const[Il,Ol]=Ar.scheduled_time.split(":").map(Number),qi=Il*60+Ol;if(!br||qi<br.time)return{time:qi,stop:Ar}}return br},null),Ef=P.stops.reduce((br,Ar)=>{if(Ar.scheduled_time){const[Il,Ol]=Ar.scheduled_time.split(":").map(Number),qi=Il*60+Ol;if(!br||qi>br.time)return{time:qi,stop:Ar}}return br},null);Sr&&(en=Sr.time),Ef&&(fa=Ef.time)}if(en&&fa){const Sr=fa+15;return console.log("Start time (minutes):",en),console.log("End time (minutes):",fa),console.log("End time with buffer:",Sr),console.log("Current < Start?",Se<en),console.log("Current >= Start && <= End?",Se>=en&&Se<=Sr),console.log("Current > End?",Se>Sr),P.status==="completed"?(console.log("Status: COMPLETED"),{status:"completed",text:" Hon thnh",color:"green"}):Se<en?(console.log("Status: PENDING (cha n gi)"),{status:"pending",text:" Ch thc hin",color:"blue"}):Se>=en&&Se<=Sr?(console.log("Status: IN_PROGRESS (trong gi lm vic)"),{status:"in_progress",text:" ang thc hin",color:"yellow"}):(console.log("Status: OVERDUE (qu hn)"),{status:"overdue",text:" Qu hn",color:"red"})}else return P.status==="completed"?{status:"completed",text:" Hon thnh",color:"green"}:{status:"pending",text:" Ch thc hin",color:"blue"}}return{status:P.status,text:P.status==="completed"?" Hon thnh":P.status==="in_progress"?" ang thc hin":" ang ch",color:P.status==="completed"?"green":P.status==="in_progress"?"blue":"yellow"}},z=async()=>{try{const P=await ne.get("/locations/");f(P.data||[])}catch(P){console.error("Error fetching locations:",P)}},G=async()=>{var P,Q;try{const q=await ne.get("/users/");g(q.data||[])}catch(q){if(console.error("Error fetching users:",q),((P=q==null?void 0:q.response)==null?void 0:P.status)===401||((Q=q==null?void 0:q.response)==null?void 0:Q.status)===403){console.log("Authentication error, redirecting to login"),Ae.getState().logout(),window.location.href="/";return}}},re=async()=>{var P,Q;try{const q=await ne.get("/qr-codes/");c(q.data||[])}catch(q){if(console.error("Error fetching QR codes:",q),((P=q==null?void 0:q.response)==null?void 0:P.status)===401||((Q=q==null?void 0:q.response)==null?void 0:Q.status)===403){console.log("Authentication error, redirecting to login"),Ae.getState().logout(),window.location.href="/";return}}},Z=async P=>{try{await ne.put(`/patrol-tasks/${P}/complete`),le.success("Nhim v  c hon thnh!"),await F()}catch(Q){console.error("Error completing task:",Q),le.error("Khng th hon thnh nhim v")}},ye=async P=>{if(window.confirm("Bn c chc chn mun xa nhim v ny?"))try{await ne.delete(`/patrol-tasks/${P}`),le.success("Nhim v  c xa!"),await F()}catch(Q){console.error("Error deleting task:",Q),le.error("Khng th xa nhim v")}},gt=async P=>{try{const Q=await ne.post(`/qr-codes/generate?task_id=${P}&data=Task ${P}&type=task`);le.success("QR code  c to!"),await re()}catch(Q){console.error("Error generating QR code:",Q),le.error("Khng th to QR code")}},gn=async()=>{try{const P=await ne.post("/qr-codes/",{content:O.data,qr_type:O.type,location:O.location||""});le.success("QR code  c to!"),await re(),k(!1),j({data:"",type:"static",location_id:""})}catch(P){console.error("Error creating QR code:",P),le.error("Khng th to QR code")}},da=async P=>{if(window.confirm("Bn c chc chn mun xa QR code ny?"))try{await ne.delete(`/qr-codes/${P}`),le.success("QR code  c xa!"),await re()}catch(Q){console.error("Error deleting QR code:",Q),le.error("Khng th xa QR code")}},qr=P=>{var Q,q;y(P),A({title:P.title,description:P.description||"",assigned_to:typeof P.assigned_to=="object"?P.assigned_to.id.toString():((Q=P.assigned_to)==null?void 0:Q.toString())||"",due_date:P.due_date||"",location_id:typeof P.location_id=="object"?P.location_id.id.toString():((q=P.location_id)==null?void 0:q.toString())||"",schedule_week:P.schedule_week||""}),x(!0)},Nl=()=>{V([...D,{qr_code_id:"",qr_code_name:"",scheduled_time:""}])},Tl=P=>{D.length>1&&V(D.filter((Q,q)=>q!==P))},Zr=(P,Q,q)=>{const ae=[...D];ae[P][Q]=q,V(ae)},ev=async P=>{P.preventDefault();try{if(!R.title||!R.title.trim()){le.error("Vui lng nhp tn nhim v");return}const Q=D.filter(ae=>ae.qr_code_name&&ae.qr_code_name.trim()&&ae.scheduled_time&&ae.scheduled_time.trim());console.log("Raw stops:",D),console.log("Valid stops:",Q);const q={title:R.title,description:R.description,assigned_to:R.assigned_to?parseInt(R.assigned_to):1,location_id:R.location_id||"V tr mc nh",schedule_week:R.schedule_week?JSON.parse(R.schedule_week):{},stops:Q.length>0?Q.map((ae,Se)=>({qr_code_name:ae.qr_code_name.trim(),scheduled_time:ae.scheduled_time.trim(),required:!0})):[]};console.log("Sending task payload:",q),console.log("Stops data:",Q),v?(await ne.put(`/patrol-tasks/${v.id}`,q),le.success("Nhim v  c cp nht!")):(await ne.post("/patrol-tasks/",q),le.success("Nhim v  c to!")),x(!1),y(null),A({title:"",description:"",assigned_to:"",due_date:"",location_id:"",schedule_week:""}),V([{qr_code_id:"",qr_code_name:"",scheduled_time:""}]),await F()}catch(Q){console.error("Error saving task:",Q),le.error("Khng th lu nhim v")}},yf=async P=>{try{const Q=P.content||`QR ${P.id}`,q=await Mi.toDataURL(Q,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),ae=document.createElement("a");ae.download=`qr-${P.id}-${Q.replace(/[^a-zA-Z0-9]/g,"_")}.png`,ae.href=q,ae.click(),le.success("  ti QR code thnh cng!")}catch(Q){console.error("Error generating QR code:",Q),le.error(" Li to QR code!")}},wf=async P=>{try{const Q=P.content||`QR ${P.id}`,q=await Mi.toDataURL(Q,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),ae=window.open("","_blank");ae&&(ae.document.write(`
          <html>
            <head>
              <title>QR Code - ${Q}</title>
              <style>
                body { 
                  text-align: center; 
                  padding: 20px; 
                  font-family: Arial, sans-serif;
                }
                .qr-container {
                  border: 2px solid #ccc; 
                  padding: 20px; 
                  display: inline-block;
                  margin: 20px 0;
                }
                .qr-image {
                  display: block;
                  margin: 0 auto 20px auto;
                }
                .info {
                  margin: 10px 0;
                  font-size: 14px;
                }
              </style>
            </head>
            <body>
              <h2>QR Code</h2>
              <div class="qr-container">
                <img src="${q}" alt="QR Code" class="qr-image" />
                <div class="info"><strong>Ni dung:</strong> ${Q}</div>
                <div class="info"><strong>To lc:</strong> ${new Date(P.created_at).toLocaleString("vi-VN")}</div>
              </div>
            </body>
          </html>
        `),ae.document.close(),ae.print(),le.success("  m ca s in QR code!"))}catch(Q){console.error("Error generating QR code for print:",Q),le.error(" Li to QR code  in!")}};return p?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Qun l Nhim v & QR Code"}),u.jsx("p",{className:"text-gray-600",children:"Qun l nhim v tun tra v to m QR"})]}),u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsx("button",{onClick:()=>n("tasks"),className:`py-2 px-1 border-b-2 font-medium text-sm ${e==="tasks"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Nhim v"}),H&&u.jsx("button",{onClick:()=>n("qr"),className:`py-2 px-1 border-b-2 font-medium text-sm ${e==="qr"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"QR Codes"})]})})}),e==="tasks"&&u.jsxs(u.Fragment,{children:[H&&u.jsx("div",{className:"mb-6",children:u.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[u.jsx(s0,{className:"w-4 h-4"}),u.jsx("span",{children:"To nhim v mi"})]})}),w&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:v?"Sa nhim v":"To nhim v mi"}),u.jsx("button",{onClick:()=>{x(!1),y(null),A({title:"",description:"",assigned_to:"",due_date:"",location_id:"",schedule_week:""}),V([{qr_code_id:"",qr_code_name:"",scheduled_time:""}])},className:"text-gray-500 hover:text-gray-700",children:u.jsx(Zn,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:ev,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiu  *"}),u.jsx("input",{type:"text",value:R.title,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),u.jsx("input",{type:"text",value:R.description,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giao cho"}),u.jsxs("select",{value:R.assigned_to,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"",children:"Chn ngi thc hin"}),h.map(P=>u.jsx("option",{value:P.id,children:P.full_name||P.username},P.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thi gian thc hin"}),u.jsx(Y3,{value:R.schedule_week,onChange:W})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cc im dng (Stops)"}),u.jsxs("div",{className:"space-y-3",children:[D.map((P,Q)=>u.jsxs("div",{className:"flex gap-2 items-end",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["V tr ",Q+1]}),u.jsxs("select",{value:P.qr_code_id,onChange:q=>{const ae=l.find(Se=>Se.id.toString()===q.target.value);Zr(Q,"qr_code_id",q.target.value),Zr(Q,"qr_code_name",(ae==null?void 0:ae.content)||(ae==null?void 0:ae.data)||(ae==null?void 0:ae.qr_content)||"")},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-sm",children:[u.jsx("option",{value:"",children:"Chn QR Code..."}),l.map(q=>u.jsxs("option",{value:q.id,children:[q.content||q.data||q.qr_content||`QR ${q.id}`," (",q.type,")"]},q.id))]})]}),u.jsxs("div",{className:"w-32",children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Tn QR Code"}),u.jsx("input",{type:"text",value:P.qr_code_name,onChange:q=>Zr(Q,"qr_code_name",q.target.value),placeholder:"Tn QR code",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]}),u.jsxs("div",{className:"w-24",children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Thi gian"}),u.jsx("input",{type:"time",value:P.scheduled_time,onChange:q=>Zr(Q,"scheduled_time",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]}),D.length>1&&u.jsx("button",{type:"button",onClick:()=>Tl(Q),className:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm",children:u.jsx(Zn,{className:"w-4 h-4"})})]},Q)),u.jsx("button",{type:"button",onClick:Nl,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"+ Thm im dng"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>{x(!1),y(null)},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Hy"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:v?"Cp nht":"To nhim v"})]})]})]})}),u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 shadow-lg",children:[u.jsx("h2",{className:"text-lg font-semibold mb-3",children:(t==null?void 0:t.role)==="employee"?"Nhim v c giao":"Danh sch nhim v"}),a.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:(t==null?void 0:t.role)==="employee"?"Bn cha c nhim v no c giao":"Cha c nhim v no c to"}):(t==null?void 0:t.role)==="employee"?u.jsx("div",{className:"space-y-6",children:a.map(P=>u.jsxs("div",{className:`rounded-lg p-6 border-2 ${r(P)==="green"?"bg-green-50 border-green-200":r(P)==="red"?"bg-red-50 border-red-200":r(P)==="yellow"?"bg-yellow-50 border-yellow-200":r(P)==="blue"?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-xl font-bold text-gray-900",children:P.title}),u.jsx("span",{className:`px-4 py-2 rounded-full text-lg font-bold ${r(P)==="green"?"bg-green-500 text-white":r(P)==="red"?"bg-red-500 text-white":r(P)==="yellow"?"bg-yellow-500 text-white":r(P)==="blue"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,children:i(P)||" ang ch"})]}),P.description&&u.jsx("p",{className:"text-lg text-gray-700 mb-3",children:P.description}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx(ts,{className:"w-6 h-6 text-gray-500 mr-3 mt-1"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"V tr cn tun tra:"}),P.stops&&P.stops.length>0?u.jsx("div",{className:"space-y-2",children:P.stops.sort((Q,q)=>Q.sequence-q.sequence).map((Q,q)=>u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm mr-3 ${Q.visited?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:Q.visited?"":q+1}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`text-sm font-medium ${Q.visited?"text-green-700":"text-gray-900"}`,children:[Q.location_name,Q.scheduled_time&&u.jsxs("span",{className:"ml-2 text-green-600 font-medium",children:["(",Q.scheduled_time,")"]})]}),Q.visited_at&&u.jsxs("p",{className:"text-xs text-gray-500",children:["  chm cng: ",new Date(Q.visited_at).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]},`${Q.location_id}-${q}`))}):u.jsx("div",{children:u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o(P)||"Cha xc nh"})})]})]}),P.schedule_week&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(js,{className:"w-6 h-6 text-gray-500 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Thi gian:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(()=>{try{const Q=JSON.parse(P.schedule_week),q=Q.date,ae=Q.startTime,Se=Q.endTime;return`${new Date(q).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})} | ${ae} - ${Se}`}catch{return P.schedule_week}})()})]})]})]}),P.due_date&&u.jsxs("div",{className:"mt-4 flex items-center",children:[u.jsx(rf,{className:"w-6 h-6 text-gray-500 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Ngy hn:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(P.due_date).toLocaleDateString("vi-VN")})]})]}),u.jsx("div",{className:"mt-4 flex space-x-2",children:(t==null?void 0:t.role)==="employee"&&P.assigned_to===t.id&&P.status!=="completed"&&L(P).status!=="overdue"&&u.jsx(F4,{taskId:P.id,onComplete:Z})})]},P.id))}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tiu "}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"M t"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Giao cho"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trng thi"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngy hn"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thi gian"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"V tr"}),u.jsx("th",{className:"px-4 py-2"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(P=>{var Q,q,ae;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:String(P.id||"")}),u.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:String(P.title||"")}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:String(P.description||"-")}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:((Q=P.assigned_user)==null?void 0:Q.full_name)||((q=P.assigned_user)==null?void 0:q.username)||"Cha giao"}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r(P)==="green"?"bg-green-100 text-green-800":r(P)==="red"?"bg-red-100 text-red-800":r(P)==="blue"?"bg-blue-100 text-blue-800":r(P)==="yellow"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i(P)||"Ch x l"})}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P.due_date?new Date(P.due_date).toLocaleDateString("vi-VN"):"-"}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P.schedule_week?(()=>{try{const Se=JSON.parse(P.schedule_week),at=Se.date,Er=Se.startTime,Cr=Se.endTime;return`${new Date(at).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})} | ${Er} - ${Cr}`}catch{return P.schedule_week}})():"-"}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:P.stops&&P.stops.length>0?u.jsx("div",{className:"space-y-1",children:P.stops.sort((Se,at)=>Se.sequence-at.sequence).map((Se,at)=>(console.log("Admin view - Stop data:",Se,"Scheduled time:",Se.scheduled_time),u.jsxs("div",{className:"text-sm",children:[u.jsxs("span",{className:"font-medium",children:[at+1,". ",Se.location_name]}),Se.scheduled_time&&u.jsxs("span",{className:"ml-2 text-green-600 font-medium",children:["(",Se.scheduled_time,")"]})]},`${Se.location_id}-${at}`)))}):u.jsxs("div",{children:[u.jsx("div",{className:"text-sm",children:P.location_name||(typeof P.location_id=="object"?((ae=P.location_id)==null?void 0:ae.name)||"C v tr":String(P.location_id||"-"))}),P.created_at&&u.jsxs("div",{className:"text-xs text-gray-500 mt-1 pt-1 border-t border-gray-200",children:[u.jsx("span",{className:"font-medium text-green-600",children:" Giao lc:"})," ",new Date(P.created_at).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),u.jsx("td",{className:"px-4 py-2 text-sm font-medium",children:u.jsxs("div",{className:"flex space-x-2",children:[H&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>qr(P),className:"text-indigo-600 hover:text-indigo-900",title:"Sa nhim v",children:u.jsx(K_,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>gt(P.id),className:"text-green-600 hover:text-green-900",title:"To QR code cho task",children:u.jsx(ji,{className:"w-4 h-4"})})]}),(t==null?void 0:t.role)==="admin"&&u.jsx("button",{onClick:()=>ye(P.id),className:"text-red-600 hover:text-red-900",title:"Xa nhim v",children:u.jsx(Yo,{className:"w-4 h-4"})})]})})]},P.id)})})]})})]})]}),e==="qr"&&H&&u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Danh sch QR Codes"}),u.jsxs("button",{onClick:()=>k(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[u.jsx(s0,{className:"w-4 h-4"}),u.jsx("span",{children:"To QR Code mi"})]})]}),l.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cha c QR code no c to"}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(P=>u.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900",children:P.content||`QR Code ${P.id}`}),P.location_name&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",P.location_name]})]}),u.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P.type==="static"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:P.type==="static"?"Tnh":"ng"})]}),u.jsxs("div",{className:"flex justify-center mb-3",children:[u.jsx("img",{src:u0(P.id),alt:`QR Code ${P.content||P.id}`,className:"w-32 h-32 border border-gray-300 rounded",crossOrigin:"anonymous",onLoad:()=>console.log(` QR Code ${P.id} loaded successfully`),onError:Q=>{console.error(` QR Code ${P.id} failed to load:`,Q);const q=Q.currentTarget;if(q){q.style.display="none";const ae=q.nextElementSibling;ae&&(ae.style.display="block")}}}),u.jsx("div",{className:"w-32 h-32 border border-gray-300 rounded flex items-center justify-center text-gray-500 text-sm",style:{display:"none"},children:P.content||"QR Code"})]}),u.jsxs("p",{className:"text-xs text-gray-500 mb-3 text-center",children:["To: ",new Date(P.created_at).toLocaleString("vi-VN")]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("button",{onClick:()=>{T(P),b(!0)},className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 flex items-center justify-center space-x-1",children:[u.jsx(em,{className:"w-3 h-3"}),u.jsx("span",{children:"Xem"})]}),u.jsx("button",{onClick:()=>yf(P),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",title:"Ti xung",children:u.jsx(Ru,{className:"w-3 h-3"})}),u.jsx("button",{onClick:()=>wf(P),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",title:"In",children:u.jsx(l0,{className:"w-3 h-3"})}),u.jsx("button",{onClick:()=>da(P.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",title:"Xa",children:u.jsx(Yo,{className:"w-3 h-3"})})]})]},P.id))})]}),E&&I&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Chi tit QR Code"}),u.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700",children:u.jsx(Zn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"w-80 h-80 bg-white border-4 border-gray-300 rounded-lg flex items-center justify-center mx-auto mb-4 shadow-lg",children:[u.jsx("img",{src:u0(I.id),alt:`QR Code ${I.qr_content}`,className:"w-72 h-72 object-contain",onLoad:()=>console.log(` QR Modal ${I.id} loaded successfully`),onError:P=>{console.error(` QR Modal ${I.id} failed to load:`,P);const Q=P.currentTarget;if(Q){Q.style.display="none";const q=Q.nextElementSibling;q&&(q.style.display="flex")}}}),u.jsxs("div",{className:"text-center",style:{display:"none"},children:[u.jsx(ji,{className:"w-24 h-24 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-500",children:"QR Code Preview"})]})]}),u.jsxs("div",{className:"text-left space-y-2",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Tn:"})," ",I.data||I.qr_content||`QR ${I.id}`]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Ni dung:"})," ",I.data||I.qr_content||`QR ${I.id}`]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Loi:"})," ",I.type==="static"?"Tnh":"ng"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"To lc:"})," ",new Date(I.created_at).toLocaleString("vi-VN")]})]}),u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsxs("button",{onClick:()=>yf(I),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center space-x-2",children:[u.jsx(Ru,{className:"w-4 h-4"}),u.jsx("span",{children:"Ti xung"})]}),u.jsxs("button",{onClick:()=>wf(I),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[u.jsx(l0,{className:"w-4 h-4"}),u.jsx("span",{children:"In"})]})]})]})]})}),_&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"To QR Code mi"}),u.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:u.jsx(Zn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ni dung QR Code *"}),u.jsx("input",{type:"text",value:O.data,onChange:P=>j({...O,data:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhp ni dung cho QR code",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi QR Code"}),u.jsxs("select",{value:O.type,onChange:P=>j({...O,type:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"static",children:"Tnh (Static)"}),u.jsx("option",{value:"dynamic",children:"ng (Dynamic)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"V tr (Ty chn)"}),u.jsx("input",{type:"text",value:O.location_id,onChange:P=>j({...O,location_id:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhp tn v tr (ty chn)"})]})]}),u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),u.jsx("button",{onClick:gn,disabled:!O.data.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"To QR Code"})]})]})})]})};function $4(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function H4(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var V4=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),z4=function(t){V4(e,t);function e(n,r){var i=this.constructor,o=t.call(this,n,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),$4(o,i.prototype),H4(o),o}return e}(Error),W4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lt=function(t){W4(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(z4),G4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(t){G4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Lt),X4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){X4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Lt),Nm=function(){function t(e){if(this.binarizer=e,e===null)throw new oe("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),K4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(t){K4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Lt),Q4=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Te=function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),Y4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),df=function(t){Y4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Lt),q4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),g0=function(t){q4(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(df),Z4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ze=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new oe("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new g0(n);if(r>e)throw new g0(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=Z4(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=31*i+s}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return Te.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,s=r(n,e[a]);if(s>0)i=a+1;else if(s<0)o=a-1;else return a}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),ue=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),it=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Te.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var a=r.length;o===0;){if(++i===a)return n;o=r[i]}var s=i*32+ue.numberOfTrailingZeros(o);return s>n?n:s},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var a=r.length;o===0;){if(++i===a)return n;o=~r[i]}var s=i*32+ue.numberOfTrailingZeros(o);return s>n?n:s},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new oe;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,a=r;a<=i;a++){var s=a>r?0:e&31,l=a<i?31:n&31,c=(2<<l)-(1<<s);o[a]|=c}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new oe;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),a=this.bits,s=i;s<=o;s++){var l=s>i?0:e&31,c=s<o?31:n&31,d=(2<<c)-(1<<l)&4294967295;if((a[s]&d)!==(r?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new oe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new oe("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;n[r+o]=a}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var a=i[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[n-o]=a}if(this.size!==r*32){for(var s=r*32-this.size,l=e[0]>>>s,o=1;o<r;o++){var c=e[o];l|=c<<32-s,e[o-1]=l,l=c>>>s}e[r-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Ze.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Ze.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),Fu;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Fu||(Fu={}));const Ie=Fu;var J4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t){J4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Lt),eE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_e;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(_e||(_e={}));var qe=function(){function t(e,n,r){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var l=this.values,c=0,d=l.length;c!==d;c++){var f=l[c];t.VALUES_TO_ECI.set(f,this)}try{for(var h=eE(a),g=h.next();!g.done;g=h.next()){var p=g.value;t.NAME_TO_ECI.set(p,this)}}catch(m){i={error:m}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Y("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new Y("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new Y("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(_e.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(_e.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(_e.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(_e.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(_e.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(_e.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(_e.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(_e.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(_e.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(_e.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(_e.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(_e.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(_e.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(_e.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(_e.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(_e.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(_e.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(_e.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(_e.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(_e.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(_e.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(_e.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(_e.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(_e.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(_e.Big5,28,"Big5"),t.GB18030=new t(_e.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(_e.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),tE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),is=function(t){tE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Lt),qt=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof qe?e:qe.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(qe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new is("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(qe.UTF8)||e.equals(qe.ISO8859_1)||e.equals(qe.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},t}(),he=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return qt.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(Ie.CHARACTER_SET)!==void 0)return n.get(Ie.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,a=!0,s=0,l=0,c=0,d=0,f=0,h=0,g=0,p=0,m=0,w=0,x=0,v=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,y=0;y<r&&(i||o||a);y++){var E=e[y]&255;a&&(s>0?E&128?s--:a=!1:E&128&&(E&64?(s++,E&32?(s++,E&16?(s++,E&8?a=!1:d++):c++):l++):a=!1)),i&&(E>127&&E<160?i=!1:E>159&&(E<192||E===215||E===247)&&x++),o&&(f>0?E<64||E===127||E>252?o=!1:f--:E===128||E===160||E>239?o=!1:E>160&&E<224?(h++,p=0,g++,g>m&&(m=g)):E>127?(f++,g=0,p++,p>w&&(w=p)):(g=0,p=0))}return a&&s>0&&(a=!1),o&&f>0&&(o=!1),a&&(v||l+c+d>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||m>=3||w>=3)?t.SHIFT_JIS:i&&o?m===2&&h===2||x*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function o(s,l,c,d,f,h){if(s==="%%")return"%";if(n[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var g=f?parseInt(f.substr(1)):void 0,p;switch(h){case"s":p=n[i];break;case"c":p=n[i][0];break;case"f":p=parseFloat(n[i]).toFixed(s);break;case"p":p=parseFloat(n[i]).toPrecision(s);break;case"e":p=parseFloat(n[i]).toExponential(s);break;case"x":p=parseInt(n[i]).toString(g||16);break;case"d":p=parseFloat(parseInt(n[i],g||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(g);for(var m=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=l!==void 0?p+w:w+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},t.getBytes=function(e,n){return qt.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=qe.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=qe.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=qe.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ce=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=he.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),Sn=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new oe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var a=e[o],s=0;s<r;s++)a[s]&&i.set(s,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new oe("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,s=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new oe("row lengths do not match");a=o,l++}c++}else if(e.substring(c,c+n.length)===n)c+=n.length,i[o]=!0,o++;else if(e.substring(c,c+r.length)===r)c+=r.length,i[o]=!1,o++;else throw new oe("illegal character encountered: "+e.substring(c));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new oe("row lengths do not match");l++}for(var d=new t(s,l),f=0;f<o;f++)i[f]&&d.set(Math.floor(f%s),Math.floor(f/s));return d},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new oe("input matrix dimensions do not match");for(var n=new it(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*r,l=e.getRow(o,n).getBitArray(),c=0;c<r;c++)i[s+c]^=l[c]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new oe("Left and top must be nonnegative");if(i<1||r<1)throw new oe("Height and width must be at least 1");var o=e+r,a=n+i;if(a>this.height||o>this.width)throw new oe("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,c=n;c<a;c++)for(var d=c*s,f=e;f<o;f++)l[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new it(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,a=0;a<r;a++)n.setBulk(a*32,i[o+a]);return n},t.prototype.setRow=function(e,n){Te.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new it(e),i=new it(e),o=0,a=Math.floor((n+1)/2);o<a;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,a=n,s=-1,l=-1,c=0;c<n;c++)for(var d=0;d<r;d++){var f=i[c*r+d];if(f!==0){if(c<a&&(a=c),c>l&&(l=c),d*32<o){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<o&&(o=d*32+h)}if(d*32+31>s){for(var h=31;!(f>>>h);)h--;d*32+h>s&&(s=d*32+h)}}}return s<o||l<a?null:Int32Array.from([o,a,s-o+1,l-a+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,a=n[r],s=0;!(a<<31-s&4294967295);)s++;return o+=s,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,a=n[r],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Ze.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ze.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new ce,o=0,a=this.height;o<a;o++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),nE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(t){nE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Lt),rE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iE=function(t){rE(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new it(o):r.clear(),this.initArrays(o);for(var a=i.getRow(n,this.luminances),s=this.buckets,l=0;l<o;l++)s[(a[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(s);if(o<3)for(var l=0;l<o;l++)(a[l]&255)<c&&r.set(l);else for(var d=a[0]&255,f=a[1]&255,l=1;l<o-1;l++){var h=a[l+1]&255;(f*4-d-h)/2<c&&r.set(l),d=f,f=h}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Sn(r,i);this.initArrays(r);for(var a=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),c=n.getRow(l,this.luminances),d=Math.floor(r*4/5),f=Math.floor(r/5);f<d;f++){var h=c[f]&255;a[h>>e.LUMINANCE_SHIFT]++}for(var g=e.estimateBlackPoint(a),p=n.getMatrix(),s=0;s<i;s++)for(var m=s*r,f=0;f<r;f++){var h=p[m+f]&255;h<g&&o.set(f,s)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,a=0,s=0;s<r;s++)n[s]>a&&(o=s,a=n[s]),n[s]>i&&(i=n[s]);for(var l=0,c=0,s=0;s<r;s++){var d=s-o,f=n[s]*d*d;f>c&&(l=s,c=f)}if(o>l){var h=o;o=l,l=h}if(l-o<=r/16)throw new $;for(var g=l-1,p=-1,s=l-1;s>o;s--){var m=s-o,f=m*m*(l-s)*(i-n[s]);f>p&&(g=s,p=f)}return g<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Q4),oE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tm=function(t){oE(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),a=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&a++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(o,a,s,r,i),c=new Sn(r,i);e.calculateThresholdForBlock(o,a,s,r,i,l,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,a,s,l){for(var c=a-e.BLOCK_SIZE,d=o-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var g=e.cap(f,2,i-3),p=0;p<r;p++){var m=p<<e.BLOCK_SIZE_POWER;m>d&&(m=d);for(var w=e.cap(p,2,r-3),x=0,v=-2;v<=2;v++){var y=s[g+v];x+=y[w-2]+y[w-1]+y[w]+y[w+1]+y[w+2]}var E=x/25;e.thresholdBlock(n,m,h,E,o,l)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,a,s){for(var l=0,c=i*a+r;l<e.BLOCK_SIZE;l++,c+=a)for(var d=0;d<e.BLOCK_SIZE;d++)(n[c+d]&255)<=o&&s.set(r+d,i+l)},e.calculateBlackPoints=function(n,r,i,o,a){for(var s=a-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,c=new Array(i),d=0;d<i;d++){c[d]=new Int32Array(r);var f=d<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0;h<r;h++){var g=h<<e.BLOCK_SIZE_POWER;g>l&&(g=l);for(var p=0,m=255,w=0,x=0,v=f*o+g;x<e.BLOCK_SIZE;x++,v+=o){for(var y=0;y<e.BLOCK_SIZE;y++){var E=n[v+y]&255;p+=E,E<m&&(m=E),E>w&&(w=E)}if(w-m>e.MIN_DYNAMIC_RANGE)for(x++,v+=o;x<e.BLOCK_SIZE;x++,v+=o)for(var y=0;y<e.BLOCK_SIZE;y++)p+=n[v+y]&255}var b=p>>e.BLOCK_SIZE_POWER*2;if(w-m<=e.MIN_DYNAMIC_RANGE&&(b=m/2,d>0&&h>0)){var I=(c[d-1][h]+2*c[d][h-1]+c[d-1][h-1])/4;m<I&&(b=I)}c[d][h]=b}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(iE),ca=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new is("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new is("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new is("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new ce,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var a=i[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",n.append(s)}n.append(`
`)}return n.toString()},t}(),aE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sl=function(t){aE(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(i[a]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(n[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(ca),sE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lE=function(t){sE(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,l=0,c=n.length;s<c;s+=4,l++){var d=void 0,f=n[s+3];if(f===0)d=255;else{var h=n[s],g=n[s+1],p=n[s+2];d=306*h+601*g+117*p+512>>10}a[l]=d}else for(var s=0,l=0,m=n.length;s<m;s+=4,l++){var d=void 0,f=n[s+3];if(f===0)d=255;else{var h=n[s],g=n[s+1],p=n[s+2];d=306*h+601*g+117*p+512>>10}a[l]=255-d}return a},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),c=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return r.width=l,r.height=c,i.translate(l/2,c/2),i.rotate(o),i.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Sl(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(ca),cE=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Et=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Ct=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},uE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qi=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Et(this,void 0,void 0,function(){var e,n,r,i,o,a,s,l,c,d,f,h;return Ct(this,function(g){switch(g.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),n=[];try{for(r=uE(e),i=r.next();!i.done;i=r.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device "+(n.length+1),c=o.groupId,d={deviceId:s,label:l,kind:a,groupId:c},n.push(d))}catch(p){f={error:p}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Et(this,void 0,void 0,function(){var e;return Ct(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new cE(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Et(this,void 0,void 0,function(){var n;return Ct(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Et(this,void 0,void 0,function(){return Ct(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Et(this,void 0,void 0,function(){var r,i;return Ct(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Et(this,void 0,void 0,function(){var r;return Ct(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Et(this,void 0,void 0,function(){var r,i;return Ct(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Et(this,void 0,void 0,function(){return Ct(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Et(this,void 0,void 0,function(){var i,o;return Ct(this,function(a){switch(a.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Et(this,void 0,void 0,function(){var i;return Ct(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Et(this,void 0,void 0,function(){var i;return Ct(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Et(this,void 0,void 0,function(){var r;return Ct(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Et(this,void 0,void 0,function(){return Ct(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new $e("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new $e("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new $e("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new $e("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new $e("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new $e("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new $e("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new $e("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new $e("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new $e("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Et(this,void 0,void 0,function(){return Ct(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Et(this,void 0,void 0,function(){return Ct(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(i._stopAsyncDecode){s(new $("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);a(l)}catch(h){var c=n&&h instanceof $,d=h instanceof We||h instanceof Y,f=d&&r;if(c||f)return setTimeout(o,i._timeBetweenDecodingAttempts,a,s);s(h)}};return new Promise(function(a,s){return o(a,s)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){n(null,l);var a=l instanceof We||l instanceof Y,s=l instanceof $;(a||s)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new lE(r,n),o=new Tm(i);return new Nm(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),_t=function(){function t(e,n,r,i,o,a){r===void 0&&(r=n==null?0:8*n.length),a===void 0&&(a=Te.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,a==null?this.timestamp=Te.currentTimeMillis():this.timestamp=a}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Te.arraycopy(n,0,r,0,n.length),Te.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Uu;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Uu||(Uu={}));const ie=Uu;var $u;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($u||($u={}));const dt=$u;var bl=function(){function t(e,n,r,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),po=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),cr=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Te.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,o=n.length;i!==o;i++){var a=n[i];r=po.addOrSubtract(r,a)}return r}r=n[0];for(var s=n.length,l=this.field,i=1;i<s;i++)r=po.addOrSubtract(l.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;Te.arraycopy(r,0,o,0,a);for(var s=a;s<r.length;s++)o[s]=po.addOrSubtract(n[s-a],r[s]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,a=new Int32Array(r+o-1),s=this.field,l=0;l<r;l++)for(var c=n[l],d=0;d<o;d++)a[l+d]=po.addOrSubtract(a[l+d],s.multiply(c,i[d]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,a=0;a<n;a++)i[a]=r.multiply(o[a],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),a=this.field,s=0;s<i;s++)o[s]=a.multiply(r[s],n);return new t(a,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new oe("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=n.multiply(i.getCoefficient(i.getDegree()),a),c=e.multiplyByMonomial(s,l),d=n.buildMonomial(s,l);r=r.addOrSubtract(d),i=i.addOrSubtract(c)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),dE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Im=function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Lt),fE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(t){fE(e,t);function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var a=new Int32Array(r),s=1,l=0;l<r;l++)a[l]=s,s*=2,s>=r&&(s^=n,s&=r-1);o.expTable=a;for(var c=new Int32Array(r),l=0;l<r-1;l++)c[a[l]]=l;return o.logTable=c,o.zero=new cr(o,Int32Array.from([0])),o.one=new cr(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new cr(this,i)},e.prototype.inverse=function(n){if(n===0)throw new Im;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ue.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(po),hE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pa=function(t){hE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Lt),gE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ua=function(t){gE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Lt),Al=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new cr(r,e),o=new Int32Array(n),a=!0,s=0;s<n;s++){var l=i.evaluateAt(r.exp(s+r.getGeneratorBase()));o[o.length-1-s]=l,l!==0&&(a=!1)}if(!a)for(var c=new cr(r,o),d=this.runEuclideanAlgorithm(r.buildMonomial(n,1),c,n),f=d[0],h=d[1],g=this.findErrorLocations(f),p=this.findErrorMagnitudes(h,g),s=0;s<g.length;s++){var m=e.length-1-r.log(g[s]);if(m<0)throw new Pa("Bad error location");e[m]=kt.addOrSubtract(e[m],p[s])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,a=e,s=n,l=o.getZero(),c=o.getOne();s.getDegree()>=(r/2|0);){var d=a,f=l;if(a=s,l=c,a.isZero())throw new Pa("r_{i-1} was zero");s=d;for(var h=o.getZero(),g=a.getCoefficient(a.getDegree()),p=o.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var m=s.getDegree()-a.getDegree(),w=o.multiply(s.getCoefficient(s.getDegree()),p);h=h.addOrSubtract(o.buildMonomial(m,w)),s=s.addOrSubtract(a.multiplyByMonomial(m,w))}if(c=h.multiply(l).addOrSubtract(f),s.getDegree()>=a.getDegree())throw new ua("Division algorithm failed to reduce polynomial?")}var x=c.getCoefficient(0);if(x===0)throw new Pa("sigmaTilde(0) was zero");var v=o.inverse(x),y=c.multiplyScalar(v),E=s.multiplyScalar(v);return[y,E]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,a=1;a<o.getSize()&&i<n;a++)e.evaluateAt(a)===0&&(r[i]=o.inverse(a),i++);if(i!==n)throw new Pa("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,a=0;a<r;a++){for(var s=o.inverse(n[a]),l=1,c=0;c<r;c++)if(a!==c){var d=o.multiply(n[c],s),f=d&1?d&-2:d|1;l=o.multiply(l,f)}i[a]=o.multiply(e.evaluateAt(s),o.inverse(l)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],s))}return i},t}(),lt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(lt||(lt={}));var p0=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),a=t.getEncodedData(i),s=new bl(o,a,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=lt.UPPER,i=lt.UPPER,o="",a=0;a<n;)if(i===lt.BINARY){if(n-a<5)break;var s=t.readCode(e,a,5);if(a+=5,s===0){if(n-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var l=0;l<s;l++){if(n-a<8){a=n;break}var c=t.readCode(e,a,8);o+=he.castAsNonUtf8Char(c),a+=8}i=r}else{var d=i===lt.DIGIT?4:5;if(n-a<d)break;var c=t.readCode(e,a,d);a+=d;var f=t.getCharacter(i,c);f.startsWith("CTRL_")?(r=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},t.getTable=function(e){switch(e){case"L":return lt.LOWER;case"P":return lt.PUNCT;case"M":return lt.MIXED;case"D":return lt.DIGIT;case"B":return lt.BINARY;case"U":default:return lt.UPPER}},t.getCharacter=function(e,n){switch(e){case lt.UPPER:return t.UPPER_TABLE[n];case lt.LOWER:return t.LOWER_TABLE[n];case lt.MIXED:return t.MIXED_TABLE[n];case lt.PUNCT:return t.PUNCT_TABLE[n];case lt.DIGIT:return t.DIGIT_TABLE[n];default:throw new ua("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=kt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=kt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=kt.AZTEC_DATA_10):(r=12,n=kt.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new Y;for(var a=e.length%r,s=new Int32Array(o),l=0;l<o;l++,a+=r)s[l]=t.readCode(e,a,r);try{var c=new Al(n);c.decode(s,o-i)}catch(w){throw new Y(w)}for(var d=(1<<r)-1,f=0,l=0;l<i;l++){var h=s[l];if(h===0||h===d)throw new Y;(h===1||h===d-1)&&f++}for(var g=new Array(i*r-f),p=0,l=0;l<i;l++){var h=s[l];if(h===1||h===d-1)g.fill(h>1,p,p+r-1),p+=r-1;else for(var m=r-1;m>=0;--m)g[p++]=(h&1<<m)!==0}return g},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(r,n));if(n)for(var s=0;s<o.length;s++)o[s]=s;else for(var l=i+1+2*ue.truncDivision(ue.truncDivision(i,2)-1,15),c=i/2,d=ue.truncDivision(l,2),s=0;s<c;s++){var f=s+ue.truncDivision(s,15);o[c-s-1]=d-f-1,o[c+s]=d+f+1}for(var s=0,h=0;s<r;s++){for(var g=(r-s)*4+(n?9:12),p=s*2,m=i-1-p,w=0;w<g;w++)for(var x=w*2,v=0;v<2;v++)a[h+x+v]=e.get(o[p+v],o[p+w]),a[h+2*g+x+v]=e.get(o[p+w],o[m-v]),a[h+4*g+x+v]=e.get(o[m-v],o[m-w]),a[h+6*g+x+v]=e.get(o[m-w],o[p+v]);h+=g*8}return a},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),me=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,a=n-i;return Math.sqrt(o*o+a*a)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var o=e[r];n+=o}return n},t}(),Hu=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),te=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*Hu.floatToIntBits(this.x)+Hu.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,a,s;if(r>=n&&r>=i?(a=e[0],o=e[1],s=e[2]):i>=r&&i>=n?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var l=o;o=s,s=l}e[0]=o,e[1]=a,e[2]=s},t.distance=function(e,n){return me.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t}(),ff=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),pE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mE=function(t){pE(e,t);function e(n,r,i,o,a){var s=t.call(this,n,r)||this;return s.compact=i,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(ff),Vu=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,a=!0,s=!1,l=!1,c=!1,d=!1,f=!1,h=this.width,g=this.height;a;){a=!1;for(var p=!0;(p||!l)&&n<h;)p=this.containsBlackPoint(r,i,n,!1),p?(n++,a=!0,l=!0):l||n++;if(n>=h){o=!0;break}for(var m=!0;(m||!c)&&i<g;)m=this.containsBlackPoint(e,n,i,!0),m?(i++,a=!0,c=!0):c||i++;if(i>=g){o=!0;break}for(var w=!0;(w||!d)&&e>=0;)w=this.containsBlackPoint(r,i,e,!1),w?(e--,a=!0,d=!0):d||e--;if(e<0){o=!0;break}for(var x=!0;(x||!f)&&r>=0;)x=this.containsBlackPoint(e,n,r,!0),x?(r--,a=!0,f=!0):f||r--;if(r<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var v=n-e,y=null,E=1;y===null&&E<v;E++)y=this.getBlackPointOnSegment(e,i-E,e+E,i);if(y==null)throw new $;for(var b=null,E=1;b===null&&E<v;E++)b=this.getBlackPointOnSegment(e,r+E,e+E,r);if(b==null)throw new $;for(var I=null,E=1;I===null&&E<v;E++)I=this.getBlackPointOnSegment(n,r+E,n-E,r);if(I==null)throw new $;for(var T=null,E=1;T===null&&E<v;E++)T=this.getBlackPointOnSegment(n,i-E,n-E,i);if(T==null)throw new $;return this.centerEdges(T,y,I,b)}else throw new $},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=me.round(me.distance(e,n,r,i)),a=(r-e)/o,s=(i-n)/o,l=this.image,c=0;c<o;c++){var d=me.round(e+c*a),f=me.round(n+c*s);if(l.get(d,f))return new te(d,f)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),a=e.getY(),s=n.getX(),l=n.getY(),c=r.getX(),d=r.getY(),f=i.getX(),h=i.getY(),g=t.CORR;return o<this.width/2?[new te(f-g,h+g),new te(s+g,l+g),new te(c-g,d-g),new te(o+g,a-g)]:[new te(f+g,h+g),new te(s+g,l-g),new te(c-g,d+g),new te(o-g,a-g)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var a=e;a<=n;a++)if(o.get(a,r))return!0}else for(var s=e;s<=n;s++)if(o.get(r,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),m0=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<n.length&&o;a+=2){var s=Math.floor(n[a]),l=Math.floor(n[a+1]);if(s<-1||s>r||l<-1||l>i)throw new $;o=!1,s===-1?(n[a]=0,o=!0):s===r&&(n[a]=r-1,o=!0),l===-1?(n[a+1]=0,o=!0):l===i&&(n[a+1]=i-1,o=!0)}o=!0;for(var a=n.length-2;a>=0&&o;a-=2){var s=Math.floor(n[a]),l=Math.floor(n[a+1]);if(s<-1||s>r||l<-1||l>i)throw new $;o=!1,s===-1?(n[a]=0,o=!0):s===r&&(n[a]=r-1,o=!0),l===-1?(n[a+1]=0,o=!0):l===i&&(n[a+1]=i-1,o=!0)}},t}(),Om=function(){function t(e,n,r,i,o,a,s,l,c){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=a,this.a13=s,this.a23=l,this.a33=c}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,a,s,l,c,d,f,h,g,p,m,w){var x=t.quadrilateralToSquare(e,n,r,i,o,a,s,l),v=t.squareToQuadrilateral(c,d,f,h,g,p,m,w);return v.times(x)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,c=this.a31,d=this.a32,f=this.a33,h=0;h<n;h+=2){var g=e[h],p=e[h+1],m=o*g+l*p+f;e[h]=(r*g+a*p+c)/m,e[h+1]=(i*g+s*p+d)/m}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,c=this.a31,d=this.a32,f=this.a33,h=e.length,g=0;g<h;g++){var p=e[g],m=n[g],w=o*p+l*m+f;e[g]=(r*p+a*m+c)/w,n[g]=(i*p+s*m+d)/w}},t.squareToQuadrilateral=function(e,n,r,i,o,a,s,l){var c=e-r+o-s,d=n-i+a-l;if(c===0&&d===0)return new t(r-e,o-r,e,i-n,a-i,n,0,0,1);var f=r-o,h=s-o,g=i-a,p=l-a,m=f*p-h*g,w=(c*p-h*d)/m,x=(f*d-c*g)/m;return new t(r-e+w*r,s-e+x*s,e,i-n+w*i,l-n+x*l,n,w,x,1)},t.quadrilateralToSquare=function(e,n,r,i,o,a,s,l){return t.squareToQuadrilateral(e,n,r,i,o,a,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),vE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xE=function(t){vE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,o,a,s,l,c,d,f,h,g,p,m,w,x,v,y,E){var b=Om.quadrilateralToQuadrilateral(o,a,s,l,c,d,f,h,g,p,m,w,x,v,y,E);return this.sampleGridWithTransform(n,r,i,b)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new $;for(var a=new Sn(r,i),s=new Float32Array(2*r),l=0;l<i;l++){for(var c=s.length,d=l+.5,f=0;f<c;f+=2)s[f]=f/2+.5,s[f+1]=d;o.transformPoints(s),m0.checkAndNudgePoints(n,s);try{for(var f=0;f<c;f+=2)n.get(Math.floor(s[f]),Math.floor(s[f+1]))&&a.set(f/2,l)}catch{throw new $}}return a},e}(m0),hf=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new xE,t}(),It=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new te(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),yE=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new mE(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new $;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var a=r[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,a,s){var l=(o>>n-2<<1)+(o&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ue.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new $},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,a=new Int32Array(r),s=r-1;s>=0;--s)a[s]=e&15,e>>=4;try{var l=new Al(kt.AZTEC_PARAM);l.decode(a,o)}catch{throw new $}for(var c=0,s=0;s<i;s++)c=(c<<4)+a[s];return c},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(n,a,1,-1),l=this.getFirstDifferent(r,a,1,1),c=this.getFirstDifferent(i,a,-1,1),d=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,c,d))break}n=s,r=l,i=c,o=d,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;var h=new te(n.getX()+.5,n.getY()-.5),g=new te(r.getX()+.5,r.getY()+.5),p=new te(i.getX()-.5,i.getY()+.5),m=new te(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,g,p,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var o=new Vu(this.image).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new It(a+7,s-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new It(a+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new It(a-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new It(a-7,s-7),!1,-1,-1).toResultPoint()}var l=me.round((e.getX()+i.getX()+n.getX()+r.getX())/4),c=me.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var o=new Vu(this.image,15,l,c).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new It(l+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new It(l+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new It(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new It(l-7,c-7),!1,-1,-1).toResultPoint()}return l=me.round((e.getX()+i.getX()+n.getX()+r.getX())/4),c=me.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new It(l,c)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var a=hf.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,l,l,c,l,c,c,l,c,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),a=o/r,s=e.getX(),l=e.getY(),c=a*(n.getX()-e.getX())/o,d=a*(n.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(me.round(s+f*c),me.round(l+f*d))&&(i|=1<<r-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var o=3;e=new It(e.getX()-o,e.getY()+o),n=new It(n.getX()-o,n.getY()-o),r=new It(r.getX()+o,r.getY()-o),i=new It(i.getX()+o,i.getY()+o);var a=this.getColor(i,e);if(a===0)return!1;var s=this.getColor(e,n);return s!==a||(s=this.getColor(n,r),s!==a)?!1:(s=this.getColor(r,i),s===a)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,a=0,s=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),f=0;f<d;f++)s+=i,l+=o,this.image.get(me.round(s),me.round(l))!==c&&a++;var h=a/r;return h>.1&&h<.9?0:h<=.1===c?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===n;)o+=r,a+=i;for(o-=r,a-=i;this.isValid(o,a)&&this.image.get(o,a)===n;)o+=r;for(o-=r;this.isValid(o,a)&&this.image.get(o,a)===n;)a+=i;return a-=i,new It(o,a)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new te(s+i*o,l+i*a),d=new te(s-i*o,l-i*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new te(s+i*o,l+i*a),h=new te(s-i*o,l-i*a),g=[c,f,d,h];return g},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=me.round(e.getX()),r=me.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return me.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return me.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ue.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Fs=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new yE(e.getBlackMatrix()),o=null,a=null;try{var s=i.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(n,o),a=new p0().decode(s)}catch(f){r=f}if(a==null)try{var s=i.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(n,o),a=new p0().decode(s)}catch(f){throw r??f}var l=new _t(a.getText(),a.getRawBytes(),a.getNumBits(),o,ie.AZTEC,Te.currentTimeMillis()),c=a.getByteSegments();c!=null&&l.putMetadata(dt.BYTE_SEGMENTS,c);var d=a.getECLevel();return d!=null&&l.putMetadata(dt.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(Ie.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,a){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),wE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){wE(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Fs,n)||this}return e})(Qi);var et=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(Ie.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,n),a=o.getResultMetadata(),s=270;a!==null&&a.get(dt.ORIENTATION)===!0&&(s=s+a.get(dt.ORIENTATION)%360),o.putMetadata(dt.ORIENTATION,s);var l=o.getResultPoints();if(l!==null)for(var c=i.getHeight(),d=0;d<l.length;d++)l[d]=new te(c-l[d].getY()-1,l[d].getX());return o}else throw new $}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),o=new it(r),a=n&&n.get(Ie.TRY_HARDER)===!0,s=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var c=Math.trunc(i/2),d=0;d<l;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,g=c+s*(h?f:-f);if(g<0||g>=i)break;try{o=e.getBlackRow(g,o)}catch{continue}for(var p=function(v){if(v===1&&(o.reverse(),n&&n.get(Ie.NEED_RESULT_POINT_CALLBACK)===!0)){var y=new Map;n.forEach(function(I,T){return y.set(T,I)}),y.delete(Ie.NEED_RESULT_POINT_CALLBACK),n=y}try{var E=m.decodeRow(g,o,n);if(v===1){E.putMetadata(dt.ORIENTATION,180);var b=E.getResultPoints();b!==null&&(b[0]=new te(r-b[0].getX()-1,b[0].getY()),b[1]=new te(r-b[1].getX()-1,b[1].getY()))}return{value:E}}catch{}},m=this,w=0;w<2;w++){var x=p(w);if(typeof x=="object")return x.value}}throw new $},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var a=e.getSize();if(n>=a)throw new $;for(var s=!e.get(n),l=0,c=n;c<a;){if(e.get(c)!==s)r[l]++;else{if(++l===i)break;r[l]=1,s=!s}c++}if(!(l===i||l===i-1&&c===a))throw new $},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new $;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=n[s];if(o<a)return Number.POSITIVE_INFINITY;var l=o/a;r*=l;for(var c=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,g=f>h?f-h:h-f;if(g>r)return Number.POSITIVE_INFINITY;c+=g}return c/o},t}(),_E=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v0=function(t){_E(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,c=6,d=i;d<r;d++)if(n.get(d)!==l)a[o]++;else{if(o===c-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,g=e.CODE_START_A;g<=e.CODE_START_C;g++){var p=et.patternMatchVariance(a,e.CODE_PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,h=g)}if(h>=0&&n.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,h]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,l=!l}throw new $},e.decodeCode=function(n,r,i){et.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],c=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<o&&(o=c,a=s)}if(a>=0)return a;throw new $},e.prototype.decodeRow=function(n,r,i){var o=i&&i.get(Ie.ASSUME_GS1)===!0,a=e.findStartPattern(r),s=a[2],l=0,c=new Uint8Array(20);c[l++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Y}for(var f=!1,h=!1,g="",p=a[0],m=a[1],w=Int32Array.from([0,0,0,0,0,0]),x=0,v=0,y=s,E=0,b=!0,I=!1,T=!1;!f;){var _=h;switch(h=!1,x=v,v=e.decodeCode(r,w,m),c[l++]=v,v!==e.CODE_STOP&&(b=!0),v!==e.CODE_STOP&&(E++,y+=E*v),p=m,m+=w.reduce(function(J,N){return J+N},0),v){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Y}switch(d){case e.CODE_CODE_A:if(v<64)T===I?g+=String.fromCharCode(" ".charCodeAt(0)+v):g+=String.fromCharCode(" ".charCodeAt(0)+v+128),T=!1;else if(v<96)T===I?g+=String.fromCharCode(v-64):g+=String.fromCharCode(v+64),T=!1;else switch(v!==e.CODE_STOP&&(b=!1),v){case e.CODE_FNC_1:o&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&T?(I=!0,T=!1):I&&T?(I=!1,T=!1):T=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(v<96)T===I?g+=String.fromCharCode(" ".charCodeAt(0)+v):g+=String.fromCharCode(" ".charCodeAt(0)+v+128),T=!1;else switch(v!==e.CODE_STOP&&(b=!1),v){case e.CODE_FNC_1:o&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&T?(I=!0,T=!1):I&&T?(I=!1,T=!1):T=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(v<100)v<10&&(g+="0"),g+=v;else switch(v!==e.CODE_STOP&&(b=!1),v){case e.CODE_FNC_1:o&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}_&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=m-p;if(m=r.getNextUnset(m),!r.isRange(m,Math.min(r.getSize(),m+(m-p)/2),!1))throw new $;if(y-=E*x,y%103!==x)throw new We;var O=g.length;if(O===0)throw new $;O>0&&b&&(d===e.CODE_CODE_C?g=g.substring(0,O-2):g=g.substring(0,O-1));for(var j=(a[1]+a[0])/2,R=p+k/2,A=c.length,D=new Uint8Array(A),V=0;V<A;V++)D[V]=c[V];var W=[new te(j,n),new te(R,n)];return new _t(g,D,0,W,ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(et),EE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x0=function(t){EE(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var o,a,s,l,c=this.counters;c.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,c),f=r.getNextSet(d[1]),h=r.getSize(),g,p;do{e.recordPattern(r,f,c);var m=e.toNarrowWidePattern(c);if(m<0)throw new $;g=e.patternToChar(m),this.decodeRowResult+=g,p=f;try{for(var w=(o=void 0,gc(c)),x=w.next();!x.done;x=w.next()){var v=x.value;f+=v}}catch(A){o={error:A}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var E=gc(c),b=E.next();!b.done;b=E.next()){var v=b.value;y+=v}}catch(A){s={error:A}}finally{try{b&&!b.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}var I=f-p-y;if(f!==h&&I*2<y)throw new $;if(this.usingCheckDigit){for(var T=this.decodeRowResult.length-1,_=0,k=0;k<T;k++)_+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(T)!==e.ALPHABET_STRING.charAt(_%43))throw new We;this.decodeRowResult=this.decodeRowResult.substring(0,T)}if(this.decodeRowResult.length===0)throw new $;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var j=(d[1]+d[0])/2,R=p+y/2;return new _t(O,null,0,[new te(j,n),new te(R,n)],ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),a=0,s=o,l=!1,c=r.length,d=o;d<i;d++)if(n.get(d)!==l)r[a]++;else{if(a===c-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new $},e.toNarrowWidePattern=function(n){var r,i,o=n.length,a=0,s;do{var l=2147483647;try{for(var c=(r=void 0,gc(n)),d=c.next();!d.done;d=c.next()){var f=d.value;f<l&&f>a&&(l=f)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}a=l,s=0;for(var h=0,g=0,p=0;p<o;p++){var f=n[p];f>a&&(g|=1<<o-1-p,s++,h+=f)}if(s===3){for(var p=0;p<o&&s>0;p++){var f=n[p];if(f>a&&(s--,f*2>=h))return-1}return g}}while(s>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new $},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var a=n.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=n.charAt(o+1),l="\0";switch(a){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Y;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Y;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new Y;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Y;break}i+=l,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(et),CE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y0=function(t){CE(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var o,a,s,l,c=this.findAsteriskPattern(r),d=r.getNextSet(c[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var g,p;do{e.recordPattern(r,d,h);var m=this.toPattern(h);if(m<0)throw new $;g=this.patternToChar(m),this.decodeRowResult+=g,p=d;try{for(var w=(o=void 0,pc(h)),x=w.next();!x.done;x=w.next()){var v=x.value;d+=v}}catch(k){o={error:k}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var E=pc(h),b=E.next();!b.done;b=E.next()){var v=b.value;y+=v}}catch(k){s={error:k}}finally{try{b&&!b.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}if(d===f||!r.get(d))throw new $;if(this.decodeRowResult.length<2)throw new $;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),T=(c[1]+c[0])/2,_=p+y/2;return new _t(I,null,0,[new te(T,n),new te(_,n)],ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=i,s=!1,l=o.length,c=0,d=i;d<r;d++)if(n.get(d)!==s)o[c]++;else{if(c===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,d]);a+=o[0]+o[1],o.copyWithin(0,2,2+c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,s=!s}throw new $},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var a=pc(n),s=a.next();!s.done;s=a.next()){var l=s.value;o+=l}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}for(var c=0,d=n.length,f=0;f<d;f++){var h=Math.round(n[f]*9/o);if(h<1||h>4)return-1;if(f&1)c<<=h;else for(var g=0;g<h;g++)c=c<<1|1}return c},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new $},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var a=n.charAt(o);if(a>="a"&&a<="d"){if(o>=r-1)throw new Y;var s=n.charAt(o+1),l="\0";switch(a){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Y;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Y;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l=String.fromCharCode(127);else throw new Y;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Y;break}i+=l,o++}else i+=a}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,a=0,s=r-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(n.charAt(s)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[a%47])throw new We},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(et),SE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w0=function(t){SE(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var o,a,s=this.decodeStart(r),l=this.decodeEnd(r),c=new ce;e.decodeMiddle(r,s[1],l[0],c);var d=c.toString(),f=null;i!=null&&(f=i.get(Ie.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,g=!1,p=0;try{for(var m=bE(f),w=m.next();!w.done;w=m.next()){var x=w.value;if(h===x){g=!0;break}x>p&&(p=x)}}catch(E){o={error:E}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}if(!g&&h>p&&(g=!0),!g)throw new Y;var v=[new te(s[1],n),new te(l[0],n)],y=new _t(d,null,0,v,ie.ITF,new Date().getTime());return y},e.decodeMiddle=function(n,r,i,o){var a=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),s.fill(0),l.fill(0);r<i;){et.recordPattern(n,r,a);for(var c=0;c<5;c++){var d=2*c;s[c]=a[d],l[c]=a[d+1]}var f=e.decodeDigit(s);o.append(f.toString()),f=this.decodeDigit(l),o.append(f.toString()),a.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new $},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new $;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof $&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,a=new Int32Array(o),s=n.getSize(),l=!1,c=0,d=r;a.fill(0);for(var f=r;f<s;f++)if(n.get(f)!==l)a[c]++;else{if(c===o-1){if(et.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=a[0]+a[1],Te.arraycopy(a,2,a,0,c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,l=!l}throw new $},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],l=et.patternMatchVariance(n,s,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=a):l===r&&(i=-1)}if(i>=0)return i%10;throw new $},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(et),AE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$i=function(t){AE(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,o=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,a);var s=i[0];o=i[1];var l=s-(o-s);l>=0&&(r=n.isRange(l,s,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var a=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Y;i+=a}i*=3;for(var o=r-2;o>=0;o-=2){var a=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Y;i+=a}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,a){var s=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var l=0,c=r,d=o.length,f=i,h=r;h<s;h++)if(n.get(h)!==f)a[l]++;else{if(l===d-1){if(et.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,h]);c+=a[0]+a[1];for(var g=a.slice(2,a.length),p=0;p<l-1;p++)a[p]=g[p];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,f=!f}throw new $},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var a=this.MAX_AVG_VARIANCE,s=-1,l=o.length,c=0;c<l;c++){var d=o[c],f=et.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,s=c)}if(s>=0)return s;throw new $},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(et),NE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TE=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),s=t.parseExtensionString(a),l=[new te((r[0]+r[1])/2,e),new te(o,e)],c=new _t(a,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(e,n,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=n[1],c=0,d=0;d<5&&l<s;d++){var f=$i.decodeDigit(e,a,l,$i.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var h=(i=void 0,NE(a)),g=h.next();!g.done;g=h.next()){var p=g.value;l+=p}}catch(w){i={error:w}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new $;var m=this.determineCheckDigit(c);if(t.extensionChecksum(r.toString())!==m)throw new $;return l},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new $},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[dt.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,a=o<10?"0"+o:o.toString();return n+i+"."+a},t}(),IE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OE=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),s=t.parseExtensionString(a),l=[new te((r[0]+r[1])/2,e),new te(o,e)],c=new _t(a,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(e,n,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=n[1],c=0,d=0;d<2&&l<s;d++){var f=$i.decodeDigit(e,a,l,$i.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var h=(i=void 0,IE(a)),g=h.next();!g.done;g=h.next()){var p=g.value;l+=p}}catch(m){i={error:m}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new $;if(parseInt(r.toString())%4!==c)throw new $;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[dt.ISSUE_NUMBER,parseInt(e)]])},t}(),kE=function(){function t(){}return t.decodeRow=function(e,n,r){var i=$i.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new TE;return o.decodeRow(e,n,i)}catch{var a=new OE;return a.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),RE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(t){RE(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[r]=o}return n}return e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),a=i==null?null:i.get(Ie.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new te((o[0]+o[1])/2,n);a.foundPossibleResultPoint(s)}var l=this.decodeMiddle(r,o,this.decodeRowStringBuffer),c=l.rowOffset,d=l.resultString;if(a!=null){var f=new te(c,n);a.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,c);if(a!=null){var g=new te((h[0]+h[1])/2,n);a.foundPossibleResultPoint(g)}var p=h[1],m=p+(p-h[0]);if(m>=r.getSize()||!r.isRange(p,m,!1))throw new $;var w=d.toString();if(w.length<8)throw new Y;if(!e.checkChecksum(w))throw new We;var x=(o[1]+o[0])/2,v=(h[1]+h[0])/2,y=this.getBarcodeFormat(),E=[new te(x,n),new te(v,n)],b=new _t(w,null,0,E,y,new Date().getTime()),I=0;try{var T=kE.decodeRow(n,r,h[1]);b.putMetadata(dt.UPC_EAN_EXTENSION,T.getText()),b.putAllMetadata(T.getResultMetadata()),b.addResultPoints(T.getResultPoints()),I=T.getText().length}catch{}var _=i==null?null:i.get(Ie.ALLOWED_EAN_EXTENSIONS);if(_!=null){var k=!1;for(var O in _)if(I.toString()===O){k=!0;break}if(!k)throw new $}return y===ie.EAN_13||ie.UPC_A,b},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var a=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Y;i+=a}i*=3;for(var o=r-2;o>=0;o-=2){var a=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Y;i+=a}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}($i),DE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zu=function(t){DE(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,a,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=n.getSize(),f=r[1],h=0,g=0;g<6&&f<d;g++){var p=Ye.decodeDigit(n,c,f,Ye.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var m=(o=void 0,_0(c)),w=m.next();!w.done;w=m.next()){var x=w.value;f+=x}}catch(b){o={error:b}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}p>=10&&(h|=1<<5-g)}i=e.determineFirstDigit(i,h);var v=Ye.findGuardPattern(n,f,!0,Ye.MIDDLE_PATTERN,new Int32Array(Ye.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var g=0;g<6&&f<d;g++){var p=Ye.decodeDigit(n,c,f,Ye.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var y=(s=void 0,_0(c)),E=y.next();!E.done;E=y.next()){var x=E.value;f+=x}}catch(T){s={error:T}}finally{try{E&&!E.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode("0".charCodeAt(0)+i)+n,n;throw new $},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ye),PE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),E0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C0=function(t){PE(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,a,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=n.getSize(),f=r[1],h=0;h<4&&f<d;h++){var g=Ye.decodeDigit(n,c,f,Ye.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+g);try{for(var p=(o=void 0,E0(c)),m=p.next();!m.done;m=p.next()){var w=m.value;f+=w}}catch(E){o={error:E}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}var x=Ye.findGuardPattern(n,f,!0,Ye.MIDDLE_PATTERN,new Int32Array(Ye.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var g=Ye.decodeDigit(n,c,f,Ye.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+g);try{for(var v=(s=void 0,E0(c)),y=v.next();!y.done;y=v.next()){var w=y.value;f+=w}}catch(I){s={error:I}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_8},e}(Ye),jE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S0=function(t){jE(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new zu,n}return e.prototype.getBarcodeFormat=function(){return ie.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new _t(r.substring(1),null,null,n.getResultPoints(),ie.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new $},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ye),ME=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b0=function(t){ME(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var o,a,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=n.getSize(),c=r[1],d=0,f=0;f<6&&c<l;f++){var h=e.decodeDigit(n,s,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var g=(o=void 0,LE(s)),p=g.next();!p.done;p=g.next()){var m=p.value;c+=m}}catch(w){o={error:w}}finally{try{p&&!p.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new ce(i),d),c},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Ye.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){n.insert(0,"0"+i),n.append("0"+o);return}throw $.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ie.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new ce;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ye),BE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),A0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mc=function(t){BE(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(Ie.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(ie.EAN_13)>-1&&o.push(new zu),i.indexOf(ie.UPC_A)>-1&&o.push(new S0),i.indexOf(ie.EAN_8)>-1&&o.push(new C0),i.indexOf(ie.UPC_E)>-1&&o.push(new b0)),o.length===0&&(o.push(new zu),o.push(new S0),o.push(new C0),o.push(new b0)),r.readers=o,r}return e.prototype.decodeRow=function(n,r,i){var o,a;try{for(var s=A0(this.readers),l=s.next();!l.done;l=s.next()){var c=l.value;try{var d=c.decodeRow(n,r,i),f=d.getBarcodeFormat()===ie.EAN_13&&d.getText().charAt(0)==="0",h=i==null?null:i.get(Ie.POSSIBLE_FORMATS),g=h==null||h.includes(ie.UPC_A);if(f&&g){var p=d.getRawBytes(),m=new _t(d.getText().substring(1),p,p?p.length:null,d.getResultPoints(),ie.UPC_A);return m.putAllMetadata(d.getResultMetadata()),m}return d}catch{}}}catch(w){o={error:w}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new $},e.prototype.reset=function(){var n,r;try{for(var i=A0(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;a.reset()}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(et),FE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UE=function(t){FE(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new $;var a=this.codaBarDecodeRow(o.row);if(!a)throw new $;return new _t(a,null,0,[new te(o.left,n),new te(o.right,n)],ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var a=[],s=r[0],l=1,c=1;c<r.length;c++)r[c]===s?l++:(s=r[c],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(l,c){return(l+c)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7),a=o.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(et),$E=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=function(t){$E(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(et.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new $},e.count=function(n){return me.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],a=1;a<n.length;a++)r[a]>o&&(o=r[a],i=a);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],a=1;a<n.length;a++)r[a]<o&&(o=r[a],i=a);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],a=o+n[2]+n[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var d=HE(n),f=d.next();!f.done;f=d.next()){var h=f.value;h>c&&(c=h),h<l&&(l=h)}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(et),Us=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),km=function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new te(r,o)),this.resultPoints.push(new te(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),VE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hi=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,a=0;try{for(var s=VE(e),l=s.next();!l.done;l=s.next()){var c=l.value;a+=c}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var d=0,f=0,h=e.length,g=0;g<h-1;g++){var p=void 0;for(p=1,f|=1<<g;p<e[g];p++,f&=~(1<<g)){var m=t.combins(a-p-1,h-g-2);if(r&&f===0&&a-p-(h-g-1)>=h-g-1&&(m-=t.combins(a-p-(h-g),h-g-2)),h-g-1>1){for(var w=0,x=a-p-(h-g-2);x>n;x--)w+=t.combins(a-p-x-1,h-g-3);m-=w*(h-1-g)}else a-p>n&&m--;d+=m}a-=p}return d},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,a=1,s=e;s>r;s--)o*=s,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},t}(),zE=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new it(r),o=0,a=e[0],s=a.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&i.set(o),o++;for(var l=1;l<e.length;++l){for(var c=e[l],d=c.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(o),o++;if(c.getRightChar()!==null)for(var h=c.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&i.set(o),o++}return i},t}(),Nr=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),gf=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),WE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(t){WE(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(gf),GE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tr=function(t){GE(e,t);function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(gf),XE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ei=function(t){XE(e,t);function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new Y;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(gf),ja=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KE=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,a,s,l,c;if(!e)return null;if(e.length<2)throw new $;var d=e.substring(0,2);try{for(var f=ja(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var g=h.value;if(g[0]===d)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,g[2],e):t.processFixedAI(2,g[1],e)}}catch(I){n={error:I}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.length<3)throw new $;var p=e.substring(0,3);try{for(var m=ja(t.THREE_DIGIT_DATA_LENGTH),w=m.next();!w.done;w=m.next()){var g=w.value;if(g[0]===p)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,g[2],e):t.processFixedAI(3,g[1],e)}}catch(I){i={error:I}}finally{try{w&&!w.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var x=ja(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=x.next();!v.done;v=x.next()){var g=v.value;if(g[0]===p)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,g[2],e):t.processFixedAI(4,g[1],e)}}catch(I){a={error:I}}finally{try{v&&!v.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}if(e.length<4)throw new $;var y=e.substring(0,4);try{for(var E=ja(t.FOUR_DIGIT_DATA_LENGTH),b=E.next();!b.done;b=E.next()){var g=b.value;if(g[0]===y)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,g[2],e):t.processFixedAI(4,g[1],e)}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}throw new $},t.processFixedAI=function(e,n,r){if(r.length<e)throw new $;var i=r.substring(0,e);if(r.length<e+n)throw new $;var o=r.substring(e,e+n),a=r.substring(e+n),s="("+i+")"+o,l=t.parseFieldsInGeneralPurpose(a);return l==null?s:s+l},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),o;r.length<e+n?o=r.length:o=e+n;var a=r.substring(e,o),s=r.substring(o),l="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),os=function(){function t(e){this.buffer=new ce,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var o=this.decodeGeneralPurposeField(r,i),a=KE.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new ei(this.information.getSize(),ei.FNC1,ei.FNC1):new ei(this.information.getSize(),n-1,ei.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new ei(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Tr(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Tr(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Tr(this.current.getPosition(),this.buffer.toString()):n=new Tr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Nr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Tr(this.current.getPosition(),this.buffer.toString());return new Nr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Nr(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Tr(this.current.getPosition(),this.buffer.toString());return new Nr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Nr(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Tr(this.current.getPosition(),this.buffer.toString());return new Nr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Nr(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new nn(e+5,nn.FNC1);if(n>=5&&n<15)return new nn(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new nn(e+7,""+(r+1));if(r>=90&&r<116)return new nn(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new Y}return new nn(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new nn(e+5,nn.FNC1);if(n>=5&&n<15)return new nn(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new nn(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new ua("Decoding invalid alphanumeric value: "+r)}return new nn(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),Rm=function(){function t(e){this.information=e,this.generalDecoder=new os(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),QE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(t){QE(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);a/100===0&&n.append("0"),a/10===0&&n.append("0"),n.append(a)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var a=n.charAt(o+r).charCodeAt(0)-"0".charCodeAt(0);i+=o&1?a:3*a}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(Rm),YE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qE=function(t){YE(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ce;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}(sn),ZE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JE=function(t){ZE(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ce;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(Rm),eC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),as=function(t){eC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var a=this.checkWeight(o),s=1e5,l=0;l<5;++l)a/s===0&&n.append("0"),s/=10;n.append(a)},e}(sn),tC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dm=function(t){tC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+as.GTIN_SIZE+e.WEIGHT_SIZE)throw new $;var n=new ce;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+as.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(as),nC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rC=function(t){nC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(Dm),iC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oC=function(t){iC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(Dm),aC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sC=function(t){aC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+sn.GTIN_SIZE)throw new $;var n=new ce;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sn.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+sn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}(sn),lC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cC=function(t){lC(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+sn.GTIN_SIZE)throw new $;var n=new ce;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sn.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+sn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(sn),uC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$n=function(t){uC(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new $;var n=new ce;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32;i/=32;var a=i%12+1;i/=12;var s=i;s/10===0&&n.append("0"),n.append(s),a/10===0&&n.append("0"),n.append(a),o/10===0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(as);function dC(t){try{if(t.get(1))return new qE(t);if(!t.get(2))return new JE(t);var e=os.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new rC(t);case 5:return new oC(t)}var n=os.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new sC(t);case 13:return new cC(t)}var r=os.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new $n(t,"310","11");case 57:return new $n(t,"320","11");case 58:return new $n(t,"310","13");case 59:return new $n(t,"320","13");case 60:return new $n(t,"310","15");case 61:return new $n(t,"320","15");case 62:return new $n(t,"310","17");case 63:return new $n(t,"320","17")}}catch(i){throw console.log(i),new ua("unknown decoder: "+t)}}var N0=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),fC=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,o){n.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),hC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hn=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gC=function(t){hC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(s){if(s instanceof $){if(!this.pairs.length)throw new $;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new $},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,a=r;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,Hn(n)),c=l.next();!c.done;c=l.next()){var d=c.value;this.pairs.push(d.getPairs())}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(n);f.push(s);try{return this.checkRows(f,a+1)}catch(h){console.log(h)}}}throw new $},e.isValidSequence=function(n){var r,i;try{for(var o=Hn(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(n.length>s.length)){for(var l=!0,c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!==s[c]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,a=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>n){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fC(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,a,s,l,c;try{for(var d=Hn(r),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==n.length){var g=!0;try{for(var p=(a=void 0,Hn(h.getPairs())),m=p.next();!m.done;m=p.next()){var w=m.value,x=!1;try{for(var v=(l=void 0,Hn(n)),y=v.next();!y.done;y=v.next()){var E=y.value;if(N0.equals(w,E)){x=!0;break}}}catch(b){l={error:b}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}x||(g=!1)}}catch(b){a={error:b}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}}}catch(b){i={error:b}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,a,s,l,c;try{for(var d=Hn(r),f=d.next();!f.done;f=d.next()){var h=f.value,g=!0;try{for(var p=(a=void 0,Hn(n)),m=p.next();!m.done;m=p.next()){var w=m.value,x=!1;try{for(var v=(l=void 0,Hn(h.getPairs())),y=v.next();!y.done;y=v.next()){var E=y.value;if(w.equals(E)){x=!0;break}}}catch(b){l={error:b}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}if(!x){g=!1;break}}}catch(b){a={error:b}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(g)return!0}}catch(b){i={error:b}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=zE.buildBitArray(n),i=dC(r),o=i.parseInformation(),a=n[0].getFinderPattern().getResultPoints(),s=n[n.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],s[0],s[1]];return new _t(o,null,null,l,ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);o+=l.getLeftChar().getChecksumPortion(),a++;var c=l.getRightChar();c!=null&&(o+=c.getChecksumPortion(),a++)}o%=211;var d=211*(a-4)+o;return d===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,l=-1;do this.findNextPair(n,r,l),a=this.parseFoundFinderPattern(n,i,o),a===null?l=e.getNextSecondBar(n,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(n,a,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new $;var d;try{d=this.decodeDataCharacter(n,a,o,!1)}catch(f){d=null,console.log(f)}return new N0(c,d,a,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=n.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(r))s=0;else{var l=r[r.length-1];s=l.getFinderPattern().getStartEnd()[1]}var c=r.length%2!==0;this.startFromEven&&(c=!c);for(var d=!1;s<a&&(d=!n.get(s),!!d);)s++;for(var f=0,h=s,g=s;g<a;g++)if(n.get(g)!==d)o[f]++;else{if(f===3){if(c&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=h,this.startEnd[1]=g;return}c&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,d=!d}throw new $},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,a,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,o=this.startEnd[0]-l,a=l,s=this.startEnd[1]}else a=this.startEnd[0],s=n.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var c=this.getDecodeFinderCounters();Te.arraycopy(c,0,c,1,c.length-1),c[0]=o;var d;try{d=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new km(d,[a,s],a,s,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],a);else{e.recordPattern(n,r.getStartEnd()[1],a);for(var l=0,c=a.length-1;l<c;l++,c--){var d=a[l];a[l]=a[c],a[c]=d}}var f=17,h=me.sum(new Int32Array(a))/f,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new $;for(var p=this.getOddCounts(),m=this.getEvenCounts(),w=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var v=1*a[l]/h,y=v+.5;if(y<1){if(v<.3)throw new $;y=1}else if(y>8){if(v>8.7)throw new $;y=8}var E=l/2;l&1?(m[E]=y,x[E]=v-y):(p[E]=y,w[E]=v-y)}this.adjustOddEvenCounts(f);for(var b=4*r.getValue()+(i?0:2)+(o?0:1)-1,I=0,T=0,l=p.length-1;l>=0;l--){if(e.isNotA1left(r,i,o)){var _=e.WEIGHTS[b][2*l];T+=p[l]*_}I+=p[l]}for(var k=0,l=m.length-1;l>=0;l--)if(e.isNotA1left(r,i,o)){var _=e.WEIGHTS[b][2*l+1];k+=m[l]*_}var O=T+k;if(I&1||I>13||I<4)throw new $;var j=(13-I)/2,R=e.SYMBOL_WIDEST[j],A=9-R,D=hi.getRSSvalue(p,R,!0),V=hi.getRSSvalue(m,A,!1),W=e.EVEN_TOTAL_SUBSET[j],J=e.GSUM[j],N=D*W+V+J;return new Us(N,O)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=me.sum(new Int32Array(this.getOddCounts())),i=me.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var c=r+i-n,d=(r&1)===1,f=(i&1)===0;if(c===1)if(d){if(f)throw new $;a=!0}else{if(!f)throw new $;l=!0}else if(c===-1)if(d){if(f)throw new $;o=!0}else{if(!f)throw new $;s=!0}else if(c===0){if(d){if(!f)throw new $;r<i?(o=!0,l=!0):(a=!0,s=!0)}else if(f)throw new $}else throw new $;if(o){if(a)throw new $;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new $;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Rr),pC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mC=function(t){pC(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Us),vC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T0=function(t){vC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var o,a,s,l,c=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,c),r.reverse();var d=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var f=vc(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var g=h.value;if(g.getCount()>1)try{for(var p=(s=void 0,vc(this.possibleRightPairs)),m=p.next();!m.done;m=p.next()){var w=m.value;if(w.getCount()>1&&e.checkChecksum(g,w))return e.constructResult(g,w)}}catch(x){s={error:x}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(x){o={error:x}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}throw new $},e.addOrTally=function(n,r){var i,o;if(r!=null){var a=!1;try{for(var s=vc(n),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.getValue()===r.getValue()){c.incrementCount(),a=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}a||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),a=new ce,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var l=0,s=0;s<13;s++){var c=a.charAt(s).charCodeAt(0)-"0".charCodeAt(0);l+=s&1?c:3*c}l=10-l%10,l===10&&(l=0),a.append(l.toString());var d=n.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new _t(a.toString(),null,0,[d[0],d[1],f[0],f[1]],ie.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var a=this.findFinderPattern(n,r),s=this.parseFoundFinderPattern(n,i,r,a),l=o==null?null:o.get(Ie.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(a[0]+a[1])/2;r&&(c=n.getSize()-1-c),l.foundPossibleResultPoint(new te(c,i))}var d=this.decodeDataCharacter(n,s,!0),f=this.decodeDataCharacter(n,s,!1);return new mC(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)et.recordPatternInReverse(n,r.getStartEnd()[0],o);else{et.recordPattern(n,r.getStartEnd()[1]+1,o);for(var s=0,l=o.length-1;s<l;s++,l--){var c=o[s];o[s]=o[l],o[l]=c}}for(var d=i?16:15,f=me.sum(new Int32Array(o))/d,h=this.getOddCounts(),g=this.getEvenCounts(),p=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var w=o[s]/f,x=Math.floor(w+.5);x<1?x=1:x>8&&(x=8);var v=Math.floor(s/2);s&1?(g[v]=x,m[v]=w-x):(h[v]=x,p[v]=w-x)}this.adjustOddEvenCounts(i,d);for(var y=0,E=0,s=h.length-1;s>=0;s--)E*=9,E+=h[s],y+=h[s];for(var b=0,I=0,s=g.length-1;s>=0;s--)b*=9,b+=g[s],I+=g[s];var T=E+3*b;if(i){if(y&1||y>12||y<4)throw new $;var _=(12-y)/2,k=e.OUTSIDE_ODD_WIDEST[_],O=9-k,j=hi.getRSSvalue(h,k,!1),R=hi.getRSSvalue(g,O,!0),A=e.OUTSIDE_EVEN_TOTAL_SUBSET[_],D=e.OUTSIDE_GSUM[_];return new Us(j*A+R+D,T)}else{if(I&1||I>10||I<4)throw new $;var _=(10-I)/2,k=e.INSIDE_ODD_WIDEST[_],O=9-k,j=hi.getRSSvalue(h,k,!0),R=hi.getRSSvalue(g,O,!1),V=e.INSIDE_ODD_TOTAL_SUBSET[_],D=e.INSIDE_GSUM[_];return new Us(R*V+j+D,T)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),a=!1,s=0;s<o&&(a=!n.get(s),r!==a);)s++;for(var l=0,c=s,d=s;d<o;d++)if(n.get(d)!==a)i[l]++;else{if(l===3){if(Rr.isFinderPattern(i))return[c,d];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new $},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var a=n.get(o[0]),s=o[0]-1;s>=0&&a!==n.get(s);)s--;s++;var l=o[0]-s,c=this.getDecodeFinderCounters(),d=new Int32Array(c.length);Te.arraycopy(c,0,d,1,c.length-1),d[0]=l;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=s,g=o[1];return i&&(h=n.getSize()-1-h,g=n.getSize()-1-g),new km(f,[s,o[1]],h,g,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=me.sum(new Int32Array(this.getOddCounts())),o=me.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,l=!1,c=!1;n?(i>12?s=!0:i<4&&(a=!0),o>12?c=!0:o<4&&(l=!0)):(i>11?s=!0:i<5&&(a=!0),o>10?c=!0:o<4&&(l=!0));var d=i+o-r,f=(i&1)===(n?1:0),h=(o&1)===1;if(d===1)if(f){if(h)throw new $;s=!0}else{if(!h)throw new $;c=!0}else if(d===-1)if(f){if(h)throw new $;a=!0}else{if(!h)throw new $;l=!0}else if(d===0){if(f){if(!h)throw new $;i<o?(a=!0,c=!0):(s=!0,l=!0)}else if(h)throw new $}else throw new $;if(a){if(s)throw new $;Rr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Rr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new $;Rr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&Rr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Rr),xC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gi=function(t){xC(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(Ie.POSSIBLE_FORMATS):null,o=n&&n.get(Ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=n&&n.get(Ie.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ie.EAN_13)||i.includes(ie.UPC_A)||i.includes(ie.EAN_8)||i.includes(ie.UPC_E))&&r.readers.push(new mc(n)),i.includes(ie.CODE_39)&&r.readers.push(new x0(o,a)),i.includes(ie.CODE_93)&&r.readers.push(new y0),i.includes(ie.CODE_128)&&r.readers.push(new v0),i.includes(ie.ITF)&&r.readers.push(new w0),i.includes(ie.CODABAR)&&r.readers.push(new UE),i.includes(ie.RSS_14)&&r.readers.push(new T0),i.includes(ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new gC))),r.readers.length===0&&(r.readers.push(new mc(n)),r.readers.push(new x0),r.readers.push(new y0),r.readers.push(new mc(n)),r.readers.push(new v0),r.readers.push(new w0),r.readers.push(new T0)),r}return e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new $},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(et),yC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){yC(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new gi(r),n,r)||this}return e})(Qi);var I0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ve=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),wC=function(){function t(e,n,r,i,o,a){var s,l;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var c=0,d=a.getECCodewords(),f=a.getECBlocks();try{for(var h=I0(f),g=h.next();!g.done;g=h.next()){var p=g.value;c+=p.getCount()*(p.getDataCodewords()+d)}}catch(m){s={error:m}}finally{try{g&&!g.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=c}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if(e&1||n&1)throw new Y;try{for(var o=I0(t.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===n)return s}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new Y},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new we(5,new ve(1,3))),new t(2,12,12,10,10,new we(7,new ve(1,5))),new t(3,14,14,12,12,new we(10,new ve(1,8))),new t(4,16,16,14,14,new we(12,new ve(1,12))),new t(5,18,18,16,16,new we(14,new ve(1,18))),new t(6,20,20,18,18,new we(18,new ve(1,22))),new t(7,22,22,20,20,new we(20,new ve(1,30))),new t(8,24,24,22,22,new we(24,new ve(1,36))),new t(9,26,26,24,24,new we(28,new ve(1,44))),new t(10,32,32,14,14,new we(36,new ve(1,62))),new t(11,36,36,16,16,new we(42,new ve(1,86))),new t(12,40,40,18,18,new we(48,new ve(1,114))),new t(13,44,44,20,20,new we(56,new ve(1,144))),new t(14,48,48,22,22,new we(68,new ve(1,174))),new t(15,52,52,24,24,new we(42,new ve(2,102))),new t(16,64,64,14,14,new we(56,new ve(2,140))),new t(17,72,72,16,16,new we(36,new ve(4,92))),new t(18,80,80,18,18,new we(48,new ve(4,114))),new t(19,88,88,20,20,new we(56,new ve(4,144))),new t(20,96,96,22,22,new we(68,new ve(4,174))),new t(21,104,104,24,24,new we(56,new ve(6,136))),new t(22,120,120,18,18,new we(68,new ve(6,175))),new t(23,132,132,20,20,new we(62,new ve(8,163))),new t(24,144,144,22,22,new we(62,new ve(8,156),new ve(2,155))),new t(25,8,18,6,16,new we(7,new ve(1,5))),new t(26,8,32,6,14,new we(11,new ve(1,10))),new t(27,12,26,10,24,new we(14,new ve(1,16))),new t(28,12,36,10,16,new we(18,new ve(1,22))),new t(29,16,36,14,16,new we(24,new ve(1,32))),new t(30,16,48,14,22,new we(28,new ve(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),_C=function(){function t(e){var n=e.getHeight();if(n<8||n>144||n&1)throw new Y;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Sn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return wC.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,l=!1,c=!1,d=!1;do if(r===o&&i===0&&!s)e[n++]=this.readCorner1(o,a)&255,r-=2,i+=2,s=!0;else if(r===o-2&&i===0&&a&3&&!l)e[n++]=this.readCorner2(o,a)&255,r-=2,i+=2,l=!0;else if(r===o+4&&i===2&&!(a&7)&&!c)e[n++]=this.readCorner3(o,a)&255,r-=2,i+=2,c=!0;else if(r===o-2&&i===0&&(a&7)===4&&!d)e[n++]=this.readCorner4(o,a)&255,r-=2,i+=2,d=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,a)&255),r-=2,i+=2;while(r>=0&&i<a);r+=1,i+=3;do r>=0&&i<a&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,a)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<a);if(n!==this.version.getTotalCodewords())throw new Y;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new oe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=n/i|0,s=r/o|0,l=a*i,c=s*o,d=new Sn(c,l),f=0;f<a;++f)for(var h=f*i,g=0;g<s;++g)for(var p=g*o,m=0;m<i;++m)for(var w=f*(i+2)+1+m,x=h+m,v=0;v<o;++v){var y=g*(o+2)+1+v;if(e.get(y,w)){var E=p+v;d.set(E,x)}}return d},t}(),O0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EC=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,a,s=n.getECBlocks(),l=0,c=s.getECBlocks();try{for(var d=O0(c),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()}}catch(D){r={error:D}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var g=new Array(l),p=0;try{for(var m=O0(c),w=m.next();!w.done;w=m.next())for(var h=w.value,x=0;x<h.getCount();x++){var v=h.getDataCodewords(),y=s.getECCodewords()+v;g[p++]=new t(v,new Uint8Array(y))}}catch(D){o={error:D}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}for(var E=g[0].codewords.length,b=E-s.getECCodewords(),I=b-1,T=0,x=0;x<I;x++)for(var _=0;_<p;_++)g[_].codewords[x]=e[T++];for(var k=n.getVersionNumber()===24,O=k?8:p,_=0;_<O;_++)g[_].codewords[b-1]=e[T++];for(var j=g[0].codewords.length,x=b;x<j;x++)for(var _=0;_<p;_++){var R=k?(_+8)%p:_,A=k&&R>7?x-1:x;g[R].codewords[A]=e[T++]}if(T!==e.length)throw new oe;return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Pm=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new oe(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var a=8-r,s=e<a?e:a,l=a-s,c=255>>8-s<<l;n=(o[i]&c)>>l,e-=s,r+=s,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|o[i]&255,i++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;n=n<<e|(o[i]&c)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Xe;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xe||(Xe={}));var CC=function(){function t(){}return t.decode=function(e){var n=new Pm(e),r=new ce,i=new ce,o=new Array,a=Xe.ASCII_ENCODE;do if(a===Xe.ASCII_ENCODE)a=this.decodeAsciiSegment(n,r,i);else{switch(a){case Xe.C40_ENCODE:this.decodeC40Segment(n,r);break;case Xe.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Xe.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Xe.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Xe.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new Y}a=Xe.ASCII_ENCODE}while(a!==Xe.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new bl(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new Y;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),Xe.ASCII_ENCODE;if(o===129)return Xe.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&n.append("0"),n.append(""+a)}else switch(o){case 230:return Xe.C40_ENCODE;case 231:return Xe.BASE256_ENCODE;case 232:n.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Xe.ANSIX12_ENCODE;case 239:return Xe.TEXT_ENCODE;case 240:return Xe.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new Y;break}}while(e.available()>0);return Xe.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else throw new Y;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Y}o=0;break;case 3:r?(n.append(String.fromCharCode(l+224)),r=!1):n.append(String.fromCharCode(l+96)),o=0;break;default:throw new Y}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else throw new Y;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Y}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c),o=0}else throw new Y;break;default:throw new Y}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var a=r[o];switch(a){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(a<14)n.append(String.fromCharCode(a+44));else if(a<40)n.append(String.fromCharCode(a+51));else throw new Y;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),a<0)throw new Y;for(var s=new Uint8Array(a),l=0;l<a;l++){if(e.available()<8)throw new Y;s[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(s);try{n.append(qt.decode(s,he.ISO88591))}catch(c){throw new ua("Platform does not support required encoding: "+c.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),SC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bC=function(){function t(){this.rsDecoder=new Al(kt.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new _C(e),o=i.getVersion(),a=i.readCodewords(),s=EC.getDataBlocks(a,o),l=0;try{for(var c=SC(s),d=c.next();!d.done;d=c.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(y){n={error:y}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}for(var h=new Uint8Array(l),g=s.length,p=0;p<g;p++){var m=s[p],w=m.getCodewords(),x=m.getNumDataCodewords();this.correctErrors(w,x);for(var v=0;v<x;v++)h[v*g+p]=w[v]}return CC.decode(h)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new We}for(var i=0;i<n;i++)e[i]=r[i]},t}(),AC=function(){function t(e){this.image=e,this.rectangleDetector=new Vu(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new $;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],o=n[2],a=n[3],s=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=t.sampleGrid(this.image,r,i,o,a,s,l);return new ff(c,[r,i,o,a])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new te(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new te(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,i),l=this.transitionsBetween(i,o),c=this.transitionsBetween(o,n),d=a,f=[o,n,r,i];return d>s&&(d=s,f[0]=n,f[1]=r,f[2]=i,f[3]=o),d>l&&(d=l,f[0]=r,f[1]=i,f[2]=o,f[3]=n),d>c&&(f[0]=i,f[1]=o,f[2]=n,f[3]=r),f},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(n,o),s=t.shiftPoint(r,i,(a+1)*4),l=t.shiftPoint(i,r,(a+1)*4),c=this.transitionsBetween(s,n),d=this.transitionsBetween(l,o);return c<d?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(n,o),s=this.transitionsBetween(r,o),l=t.shiftPoint(n,r,(s+1)*4),c=t.shiftPoint(i,r,(a+1)*4);a=this.transitionsBetween(l,o),s=this.transitionsBetween(c,o);var d=new te(o.getX()+(i.getX()-r.getX())/(a+1),o.getY()+(i.getY()-r.getY())/(a+1)),f=new te(o.getX()+(n.getX()-r.getX())/(s+1),o.getY()+(n.getY()-r.getY())/(s+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(l,d)+this.transitionsBetween(c,d),g=this.transitionsBetween(l,f)+this.transitionsBetween(c,f);return h>g?d:f},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],a=this.transitionsBetween(n,o)+1,s=this.transitionsBetween(i,o)+1,l=t.shiftPoint(n,r,s*4),c=t.shiftPoint(i,r,a*4);a=this.transitionsBetween(l,o)+1,s=this.transitionsBetween(c,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var d=(n.getX()+r.getX()+i.getX()+o.getX())/4,f=(n.getY()+r.getY()+i.getY()+o.getY())/4;n=t.moveAway(n,d,f),r=t.moveAway(r,d,f),i=t.moveAway(i,d,f),o=t.moveAway(o,d,f);var h,g;return l=t.shiftPoint(n,r,s*4),l=t.shiftPoint(l,o,a*4),h=t.shiftPoint(r,n,s*4),h=t.shiftPoint(h,i,a*4),c=t.shiftPoint(i,o,s*4),c=t.shiftPoint(c,r,a*4),g=t.shiftPoint(o,i,s*4),g=t.shiftPoint(g,n,a*4),[l,h,c,g]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,a,s){var l=hf.getInstance();return l.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),a=Math.trunc(n.getY()),s=Math.abs(a-i)>Math.abs(o-r);if(s){var l=r;r=i,i=l,l=o,o=a,a=l}for(var c=Math.abs(o-r),d=Math.abs(a-i),f=-c/2,h=i<a?1:-1,g=r<o?1:-1,p=0,m=this.image.get(s?i:r,s?r:i),w=r,x=i;w!==o;w+=g){var v=this.image.get(s?x:w,s?w:x);if(v!==m&&(p++,m=v),f+=d,f>0){if(x===a)break;x+=h,f-=c}}return p},t}(),$s=function(){function t(){this.decoder=new bC}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(Ie.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var a=new AC(e.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=r.getRawBytes(),l=new _t(r.getText(),s,8*s.length,i,ie.DATA_MATRIX,Te.currentTimeMillis()),c=r.getByteSegments();c!=null&&l.putMetadata(dt.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!=null&&l.putMetadata(dt.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new $;var i=this.moduleSize(n,e),o=n[1],a=r[1],s=n[0],l=r[0],c=(l-s+1)/i,d=(a-o+1)/i;if(c<=0||d<=0)throw new $;var f=i/2;o+=f,s+=f;for(var h=new Sn(c,d),g=0;g<d;g++)for(var p=o+g*i,m=0;m<c;m++)e.get(s+m*i,p)&&h.set(m,g);return h},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new $;var a=i-e[0];if(a===0)throw new $;return a},t.NO_POINTS=[],t}(),NC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){NC(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new $s,n)||this}return e})(Qi);var pi;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(pi||(pi={}));var TC=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new $e(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new oe;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(pi.L,"L",1),t.M=new t(pi.M,"M",0),t.Q=new t(pi.Q,"Q",3),t.H=new t(pi.H,"H",2),t}(),IC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jm=function(){function t(e){this.errorCorrectionLevel=TC.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return ue.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=IC(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,d=c[0];if(d===e||d===n)return new t(c[1]);var f=t.numBitsDiffering(e,d);f<o&&(a=c[1],o=f),e!==n&&(f=t.numBitsDiffering(n,d),f<o&&(a=c[1],o=f))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),OC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=OC(i),a=o.next();!a.done;a=o.next()){var s=a.value;r+=s.getCount()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),S=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),kC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hr=function(){function t(e,n){for(var r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var s=0,l=o[0].getECCodewordsPerBlock(),c=o[0].getECBlocks();try{for(var d=kC(c),f=d.next();!f.done;f=d.next()){var h=f.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Y;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Y}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new oe;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var a=jm.numBitsDiffering(e,o);a<n&&(r=i+7,n=a)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Sn(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<r;a++)i===0&&(a===0||a===r-1)||i===r-1&&a===0||n.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new M(7,new S(1,19)),new M(10,new S(1,16)),new M(13,new S(1,13)),new M(17,new S(1,9))),new t(2,Int32Array.from([6,18]),new M(10,new S(1,34)),new M(16,new S(1,28)),new M(22,new S(1,22)),new M(28,new S(1,16))),new t(3,Int32Array.from([6,22]),new M(15,new S(1,55)),new M(26,new S(1,44)),new M(18,new S(2,17)),new M(22,new S(2,13))),new t(4,Int32Array.from([6,26]),new M(20,new S(1,80)),new M(18,new S(2,32)),new M(26,new S(2,24)),new M(16,new S(4,9))),new t(5,Int32Array.from([6,30]),new M(26,new S(1,108)),new M(24,new S(2,43)),new M(18,new S(2,15),new S(2,16)),new M(22,new S(2,11),new S(2,12))),new t(6,Int32Array.from([6,34]),new M(18,new S(2,68)),new M(16,new S(4,27)),new M(24,new S(4,19)),new M(28,new S(4,15))),new t(7,Int32Array.from([6,22,38]),new M(20,new S(2,78)),new M(18,new S(4,31)),new M(18,new S(2,14),new S(4,15)),new M(26,new S(4,13),new S(1,14))),new t(8,Int32Array.from([6,24,42]),new M(24,new S(2,97)),new M(22,new S(2,38),new S(2,39)),new M(22,new S(4,18),new S(2,19)),new M(26,new S(4,14),new S(2,15))),new t(9,Int32Array.from([6,26,46]),new M(30,new S(2,116)),new M(22,new S(3,36),new S(2,37)),new M(20,new S(4,16),new S(4,17)),new M(24,new S(4,12),new S(4,13))),new t(10,Int32Array.from([6,28,50]),new M(18,new S(2,68),new S(2,69)),new M(26,new S(4,43),new S(1,44)),new M(24,new S(6,19),new S(2,20)),new M(28,new S(6,15),new S(2,16))),new t(11,Int32Array.from([6,30,54]),new M(20,new S(4,81)),new M(30,new S(1,50),new S(4,51)),new M(28,new S(4,22),new S(4,23)),new M(24,new S(3,12),new S(8,13))),new t(12,Int32Array.from([6,32,58]),new M(24,new S(2,92),new S(2,93)),new M(22,new S(6,36),new S(2,37)),new M(26,new S(4,20),new S(6,21)),new M(28,new S(7,14),new S(4,15))),new t(13,Int32Array.from([6,34,62]),new M(26,new S(4,107)),new M(22,new S(8,37),new S(1,38)),new M(24,new S(8,20),new S(4,21)),new M(22,new S(12,11),new S(4,12))),new t(14,Int32Array.from([6,26,46,66]),new M(30,new S(3,115),new S(1,116)),new M(24,new S(4,40),new S(5,41)),new M(20,new S(11,16),new S(5,17)),new M(24,new S(11,12),new S(5,13))),new t(15,Int32Array.from([6,26,48,70]),new M(22,new S(5,87),new S(1,88)),new M(24,new S(5,41),new S(5,42)),new M(30,new S(5,24),new S(7,25)),new M(24,new S(11,12),new S(7,13))),new t(16,Int32Array.from([6,26,50,74]),new M(24,new S(5,98),new S(1,99)),new M(28,new S(7,45),new S(3,46)),new M(24,new S(15,19),new S(2,20)),new M(30,new S(3,15),new S(13,16))),new t(17,Int32Array.from([6,30,54,78]),new M(28,new S(1,107),new S(5,108)),new M(28,new S(10,46),new S(1,47)),new M(28,new S(1,22),new S(15,23)),new M(28,new S(2,14),new S(17,15))),new t(18,Int32Array.from([6,30,56,82]),new M(30,new S(5,120),new S(1,121)),new M(26,new S(9,43),new S(4,44)),new M(28,new S(17,22),new S(1,23)),new M(28,new S(2,14),new S(19,15))),new t(19,Int32Array.from([6,30,58,86]),new M(28,new S(3,113),new S(4,114)),new M(26,new S(3,44),new S(11,45)),new M(26,new S(17,21),new S(4,22)),new M(26,new S(9,13),new S(16,14))),new t(20,Int32Array.from([6,34,62,90]),new M(28,new S(3,107),new S(5,108)),new M(26,new S(3,41),new S(13,42)),new M(30,new S(15,24),new S(5,25)),new M(28,new S(15,15),new S(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new M(28,new S(4,116),new S(4,117)),new M(26,new S(17,42)),new M(28,new S(17,22),new S(6,23)),new M(30,new S(19,16),new S(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new M(28,new S(2,111),new S(7,112)),new M(28,new S(17,46)),new M(30,new S(7,24),new S(16,25)),new M(24,new S(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new M(30,new S(4,121),new S(5,122)),new M(28,new S(4,47),new S(14,48)),new M(30,new S(11,24),new S(14,25)),new M(30,new S(16,15),new S(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new M(30,new S(6,117),new S(4,118)),new M(28,new S(6,45),new S(14,46)),new M(30,new S(11,24),new S(16,25)),new M(30,new S(30,16),new S(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new M(26,new S(8,106),new S(4,107)),new M(28,new S(8,47),new S(13,48)),new M(30,new S(7,24),new S(22,25)),new M(30,new S(22,15),new S(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new M(28,new S(10,114),new S(2,115)),new M(28,new S(19,46),new S(4,47)),new M(28,new S(28,22),new S(6,23)),new M(30,new S(33,16),new S(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new M(30,new S(8,122),new S(4,123)),new M(28,new S(22,45),new S(3,46)),new M(30,new S(8,23),new S(26,24)),new M(30,new S(12,15),new S(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new M(30,new S(3,117),new S(10,118)),new M(28,new S(3,45),new S(23,46)),new M(30,new S(4,24),new S(31,25)),new M(30,new S(11,15),new S(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new M(30,new S(7,116),new S(7,117)),new M(28,new S(21,45),new S(7,46)),new M(30,new S(1,23),new S(37,24)),new M(30,new S(19,15),new S(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new M(30,new S(5,115),new S(10,116)),new M(28,new S(19,47),new S(10,48)),new M(30,new S(15,24),new S(25,25)),new M(30,new S(23,15),new S(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new M(30,new S(13,115),new S(3,116)),new M(28,new S(2,46),new S(29,47)),new M(30,new S(42,24),new S(1,25)),new M(30,new S(23,15),new S(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new M(30,new S(17,115)),new M(28,new S(10,46),new S(23,47)),new M(30,new S(10,24),new S(35,25)),new M(30,new S(19,15),new S(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new M(30,new S(17,115),new S(1,116)),new M(28,new S(14,46),new S(21,47)),new M(30,new S(29,24),new S(19,25)),new M(30,new S(11,15),new S(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new M(30,new S(13,115),new S(6,116)),new M(28,new S(14,46),new S(23,47)),new M(30,new S(44,24),new S(7,25)),new M(30,new S(59,16),new S(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new M(30,new S(12,121),new S(7,122)),new M(28,new S(12,47),new S(26,48)),new M(30,new S(39,24),new S(14,25)),new M(30,new S(22,15),new S(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new M(30,new S(6,121),new S(14,122)),new M(28,new S(6,47),new S(34,48)),new M(30,new S(46,24),new S(10,25)),new M(30,new S(2,15),new S(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new M(30,new S(17,122),new S(4,123)),new M(28,new S(29,46),new S(14,47)),new M(30,new S(49,24),new S(10,25)),new M(30,new S(24,15),new S(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new M(30,new S(4,122),new S(18,123)),new M(28,new S(13,46),new S(32,47)),new M(30,new S(48,24),new S(14,25)),new M(30,new S(42,15),new S(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new M(30,new S(20,117),new S(4,118)),new M(28,new S(40,47),new S(7,48)),new M(30,new S(43,24),new S(22,25)),new M(30,new S(10,15),new S(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new M(30,new S(19,118),new S(6,119)),new M(28,new S(18,47),new S(31,48)),new M(30,new S(34,24),new S(34,25)),new M(30,new S(20,15),new S(61,16)))],t}(),tt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(tt||(tt={}));var k0=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[tt.DATA_MASK_000,new t(tt.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[tt.DATA_MASK_001,new t(tt.DATA_MASK_001,function(e,n){return(e&1)===0})],[tt.DATA_MASK_010,new t(tt.DATA_MASK_010,function(e,n){return n%3===0})],[tt.DATA_MASK_011,new t(tt.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[tt.DATA_MASK_100,new t(tt.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[tt.DATA_MASK_101,new t(tt.DATA_MASK_101,function(e,n){return e*n%6===0})],[tt.DATA_MASK_110,new t(tt.DATA_MASK_110,function(e,n){return e*n%6<3})],[tt.DATA_MASK_111,new t(tt.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),RC=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new Y;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,a=i-7,r=i-1;r>=a;r--)o=this.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=jm.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Hr.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(a,o,r);var s=Hr.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(a,o,r);if(s=Hr.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new Y},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=k0.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),a=!0,s=new Uint8Array(n.getTotalCodewords()),l=0,c=0,d=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var g=a?i-1-h:h,p=0;p<2;p++)o.get(f-p,g)||(d++,c<<=1,this.bitMatrix.get(f-p,g)&&(c|=1),d===8&&(s[l++]=c,d=0,c=0));a=!a}if(l!==n.getTotalCodewords())throw new Y;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=k0.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),R0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DC=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,a,s;if(e.length!==n.getTotalCodewords())throw new oe;var l=n.getECBlocksForLevel(r),c=0,d=l.getECBlocks();try{for(var f=R0(d),h=f.next();!h.done;h=f.next()){var g=h.value;c+=g.getCount()}}catch(A){i={error:A}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var p=new Array(c),m=0;try{for(var w=R0(d),x=w.next();!x.done;x=w.next())for(var g=x.value,v=0;v<g.getCount();v++){var y=g.getDataCodewords(),E=l.getECCodewordsPerBlock()+y;p[m++]=new t(y,new Uint8Array(E))}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var b=p[0].codewords.length,I=p.length-1;I>=0;){var T=p[I].codewords.length;if(T===b)break;I--}I++;for(var _=b-l.getECCodewordsPerBlock(),k=0,v=0;v<_;v++)for(var O=0;O<m;O++)p[O].codewords[v]=e[k++];for(var O=I;O<m;O++)p[O].codewords[_]=e[k++];for(var j=p[0].codewords.length,v=_;v<j;v++)for(var O=0;O<m;O++){var R=O<I?v:v+1;p[O].codewords[R]=e[k++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Wt;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Wt||(Wt={}));var Re=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new oe;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Wt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Wt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Wt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Wt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Wt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Wt.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Wt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Wt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Wt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Wt.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),PC=function(){function t(){}return t.decode=function(e,n,r,i){var o=new Pm(e),a=new ce,s=new Array,l=-1,c=-1;try{var d=null,f=!1,h=void 0;do{if(o.available()<4)h=Re.TERMINATOR;else{var g=o.readBits(4);h=Re.forBits(g)}switch(h){case Re.TERMINATOR:break;case Re.FNC1_FIRST_POSITION:case Re.FNC1_SECOND_POSITION:f=!0;break;case Re.STRUCTURED_APPEND:if(o.available()<16)throw new Y;l=o.readBits(8),c=o.readBits(8);break;case Re.ECI:var p=t.parseECIValue(o);if(d=qe.getCharacterSetECIByValue(p),d===null)throw new Y;break;case Re.HANZI:var m=o.readBits(4),w=o.readBits(h.getCharacterCountBits(n));m===t.GB2312_SUBSET&&t.decodeHanziSegment(o,a,w);break;default:var x=o.readBits(h.getCharacterCountBits(n));switch(h){case Re.NUMERIC:t.decodeNumericSegment(o,a,x);break;case Re.ALPHANUMERIC:t.decodeAlphanumericSegment(o,a,x,f);break;case Re.BYTE:t.decodeByteSegment(o,a,x,d,s,i);break;case Re.KANJI:t.decodeKanjiSegment(o,a,x);break;default:throw new Y}break}}while(h!==Re.TERMINATOR)}catch{throw new Y}return new bl(e,a.toString(),s.length===0?null:s,r===null?null:r.toString(),l,c)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new Y;for(var i=new Uint8Array(2*r),o=0;r>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,i[o]=s>>8&255,i[o+1]=s&255,o+=2,r--}try{n.append(qt.decode(i,he.GB2312))}catch(l){throw new Y(l)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new Y;for(var i=new Uint8Array(2*r),o=0;r>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,i[o]=s>>8,i[o+1]=s,o+=2,r--}try{n.append(qt.decode(i,he.SHIFT_JIS))}catch(l){throw new Y(l)}},t.decodeByteSegment=function(e,n,r,i,o,a){if(8*r>e.available())throw new Y;for(var s=new Uint8Array(r),l=0;l<r;l++)s[l]=e.readBits(8);var c;i===null?c=he.guessEncoding(s,a):c=i.getName();try{n.append(qt.decode(s,c))}catch(d){throw new Y(d)}o.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Y;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new Y;var a=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(a/45))),n.append(t.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(e.available()<6)throw new Y;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=o;s<n.length();s++)n.charAt(s)==="%"&&(s<n.length()-1&&n.charAt(s+1)==="%"?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new Y;var i=e.readBits(10);if(i>=1e3)throw new Y;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Y;var o=e.readBits(7);if(o>=100)throw new Y;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new Y;var a=e.readBits(4);if(a>=10)throw new Y;n.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new Y},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Mm=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),D0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jC=function(){function t(){this.rsDecoder=new Al(kt.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Sn.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new RC(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new Mm(!0)),o}catch(a){throw i!==null?i:a}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,a,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=DC.getDataBlocks(c,s,l),f=0;try{for(var h=D0(d),g=h.next();!g.done;g=h.next()){var p=g.value;f+=p.getNumDataCodewords()}}catch(I){r={error:I}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var m=new Uint8Array(f),w=0;try{for(var x=D0(d),v=x.next();!v.done;v=x.next()){var p=v.value,y=p.getCodewords(),E=p.getNumDataCodewords();this.correctErrors(y,E);for(var b=0;b<E;b++)m[w++]=y[b]}}catch(I){o={error:I}}finally{try{v&&!v.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}return PC.decode(m,s,l,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new We}for(var i=0;i<n;i++)e[i]=r[i]},t}(),MC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LC=function(t){MC(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=(this.getX()+r)/2,a=(this.getY()+n)/2,s=(this.estimatedModuleSize+i)/2;return new e(o,a,s)},e}(te),BC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FC=function(){function t(e,n,r,i,o,a,s){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,o=this.startY+n/2,a=new Int32Array(3),s=this.image,l=0;l<n;l++){var c=o+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var d=e;d<i&&!s.get(d,c);)d++;for(var f=0;d<i;){if(s.get(d,c))if(f===1)a[1]++;else if(f===2){if(this.foundPatternCross(a)){var h=this.handlePossibleCenter(a,c,d);if(h!==null)return h}a[0]=a[2],a[1]=1,a[2]=0,f=1}else a[++f]++;else f===1&&f++,a[f]++;d++}if(this.foundPatternCross(a)){var h=this.handlePossibleCenter(a,c,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&o.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&!o.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&o.get(n,l)&&s[1]<=r;)s[1]++,l++;if(l===a||s[1]>r)return NaN;for(;l<a&&!o.get(n,l)&&s[2]<=r;)s[2]++,l++;if(s[2]>r)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,r),l=this.crossCheckVertical(n,s,2*e[1],a);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var d=BC(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(c,l,s))return h.combineEstimate(l,s,c)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var g=new LC(s,l,c);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null},t}(),UC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$C=function(t){UC(e,t);function e(n,r,i,o){var a=t.call(this,n,r)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1,a=(this.count*this.getX()+r)/o,s=(this.count*this.getY()+n)/o,l=(this.count*this.estimatedModuleSize+i)/o;return new e(a,s,l,o)},e}(te),HC=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),so=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VC=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(Ie.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ie.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*t.MAX_MODULES));(s<t.MIN_SKIP||n)&&(s=t.MIN_SKIP);for(var l=!1,c=new Int32Array(5),d=s-1;d<o&&!l;d+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,h=0;h<a;h++)if(i.get(h,d))(f&1)===1&&f++,c[f]++;else if(f&1)c[f]++;else if(f===4)if(t.foundPatternCross(c)){var g=this.handlePossibleCenter(c,d,h,r);if(g===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>c[2]&&(d+=p-c[2]-s,h=a-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;if(t.foundPatternCross(c)){var g=this.handlePossibleCenter(c,d,a,r);g===!0&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return te.orderBestPatterns(m),new HC(m)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&n>=a&&s.get(n-a,e-a);)o[2]++,a++;if(e<a||n<a)return!1;for(;e>=a&&n>=a&&!s.get(n-a,e-a)&&o[1]<=r;)o[1]++,a++;if(e<a||n<a||o[1]>r)return!1;for(;e>=a&&n>=a&&s.get(n-a,e-a)&&o[0]<=r;)o[0]++,a++;if(o[0]>r)return!1;var l=s.getHeight(),c=s.getWidth();for(a=1;e+a<l&&n+a<c&&s.get(n+a,e+a);)o[2]++,a++;if(e+a>=l||n+a>=c)return!1;for(;e+a<l&&n+a<c&&!s.get(n+a,e+a)&&o[3]<r;)o[3]++,a++;if(e+a>=l||n+a>=c||o[3]>=r)return!1;for(;e+a<l&&n+a<c&&s.get(n+a,e+a)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return!1;var d=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(n,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&o.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&o.get(n,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(n,l)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&o.get(n,l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,n);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,n)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&o.get(l,n)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&o.get(l,n);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(l,n)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&o.get(l,n)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,r),s=this.crossCheckVertical(n,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var l=o/7,c=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var g=d[f];if(g.aboutEquals(l,s,a)){d[f]=g.combineEstimate(s,a,l),c=!0;break}}if(!c){var p=new $C(a,s,l);d.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=so(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,a=0,s=this.possibleCenters.length;try{for(var l=so(this.possibleCenters),c=l.next();!c.done;c=l.next()){var d=c.value;d.getCount()>=t.CENTER_QUORUM&&(o++,a+=d.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var f=a/s,h=0;try{for(var g=so(this.possibleCenters),p=g.next();!p.done;p=g.next()){var d=p.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return h<=.05*a},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new $;var a=this.possibleCenters,s;if(o>3){var l=0,c=0;try{for(var d=so(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,g=h.getEstimatedModuleSize();l+=g,c+=g*g}}catch(b){e={error:b}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}s=l/o;var p=Math.sqrt(c/o-s*s);a.sort(function(b,I){var T=Math.abs(I.getEstimatedModuleSize()-s),_=Math.abs(b.getEstimatedModuleSize()-s);return T<_?-1:T>_?1:0});for(var m=Math.max(.2*s,p),w=0;w<a.length&&a.length>3;w++){var x=a[w];Math.abs(x.getEstimatedModuleSize()-s)>m&&(a.splice(w,1),w--)}}if(a.length>3){var l=0;try{for(var v=so(a),y=v.next();!y.done;y=v.next()){var E=y.value;l+=E.getEstimatedModuleSize()}}catch(I){r={error:I}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}s=l/a.length,a.sort(function(I,T){if(T.getCount()===I.getCount()){var _=Math.abs(T.getEstimatedModuleSize()-s),k=Math.abs(I.getEstimatedModuleSize()-s);return _<k?1:_>k?-1:0}else return T.getCount()-I.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),zC=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ie.NEED_RESULT_POINT_CALLBACK);var n=new VC(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new $("No pattern found in proccess finder.");var a=t.computeDimension(n,r,i,o),s=Hr.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var d=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),h=1-3/l,g=Math.floor(n.getX()+h*(d-n.getX())),p=Math.floor(n.getY()+h*(f-n.getY())),m=4;m<=16;m<<=1)try{c=this.findAlignmentInRegion(o,g,p,m);break}catch(y){if(!(y instanceof $))throw y}var w=t.createTransform(n,r,i,c,a),x=t.sampleGrid(this.image,w,a),v;return c===null?v=[i,n,r]:v=[i,n,r,c],new ff(x,v)},t.createTransform=function(e,n,r,i,o){var a=o-3.5,s,l,c,d;return i!==null?(s=i.getX(),l=i.getY(),c=a-3,d=c):(s=n.getX()-e.getX()+r.getX(),l=n.getY()-e.getY()+r.getY(),c=a,d=a),Om.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,c,d,3.5,a,e.getX(),e.getY(),n.getX(),n.getY(),s,l,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=hf.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=me.round(te.distance(e,n)/i),a=me.round(te.distance(e,r)/i),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new $("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),a=1,s=e-(r-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(n-(i-n)*a);return a=1,l<0?(a=n/(n-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,n,s,l),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var a=e;e=n,n=a,a=r,r=i,i=a}for(var s=Math.abs(r-e),l=Math.abs(i-n),c=-s/2,d=e<r?1:-1,f=n<i?1:-1,h=0,g=r+d,p=e,m=n;p!==g;p+=d){var w=o?m:p,x=o?p:m;if(h===1===this.image.get(w,x)){if(h===2)return me.distance(p,m,e,n);h++}if(c+=l,c>0){if(m===i)break;m+=f,c-=s}}return h===2?me.distance(r+d,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),a=Math.max(0,n-o),s=Math.min(this.image.getWidth()-1,n+o);if(s-a<e*3)throw new $("Alignment top exceeds estimated module size.");var l=Math.max(0,r-o),c=Math.min(this.image.getHeight()-1,r+o);if(c-l<e*3)throw new $("Alignment bottom exceeds estimated module size.");var d=new FC(this.image,a,l,s-a,c-l,e,this.resultPointCallback);return d.find()},t}(),Hs=function(){function t(){this.decoder=new jC}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(Ie.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var a=new zC(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),i=a.getPoints()}r.getOther()instanceof Mm&&r.getOther().applyMirroredCorrection(i);var s=new _t(r.getText(),r.getRawBytes(),void 0,i,ie.QR_CODE,void 0),l=r.getByteSegments();l!==null&&s.putMetadata(dt.BYTE_SEGMENTS,l);var c=r.getECLevel();return c!==null&&s.putMetadata(dt.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(s.putMetadata(dt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(dt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new $;var i=this.moduleSize(n,e),o=n[1],a=r[1],s=n[0],l=r[0];if(s>=l||o>=a)throw new $;if(a-o!==l-s&&(l=s+(a-o),l>=e.getWidth()))throw new $;var c=Math.round((l-s+1)/i),d=Math.round((a-o+1)/i);if(c<=0||d<=0)throw new $;if(d!==c)throw new $;var f=Math.floor(i/2);o+=f,s+=f;var h=s+Math.floor((c-1)*i)-l;if(h>0){if(h>f)throw new $;s-=h}var g=o+Math.floor((d-1)*i)-a;if(g>0){if(g>f)throw new $;o-=g}for(var p=new Sn(c,d),m=0;m<d;m++)for(var w=o+Math.floor(m*i),x=0;x<c;x++)e.get(s+Math.floor(x*i),w)&&p.set(x,m);return p},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],a=e[1],s=!0,l=0;o<i&&a<r;){if(s!==n.get(o,a)){if(++l===5)break;s=!s}o++,a++}if(o===i||a===r)throw new $;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),WC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ge=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return me.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=WC(e),s=a.next();!s.done;s=a.next()){var l=s.value;i[o++]=l}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Ze.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),GC=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),XC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KC=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(r,i)),new GC(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,a=0,s=0,l=!1;a<n.getHeight();){var c=t.findVertices(n,a,s);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,s=0;try{for(var d=(r=void 0,XC(o)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(a=Math.trunc(Math.max(a,h[1].getY()))),h[3]!=null&&(a=Math.max(a,Math.trunc(h[3].getY())))}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}a+=t.ROW_STEP;continue}if(l=!0,o.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,a){for(var s=new Array(4),l=!1,c=new Int32Array(a.length);i<n;i+=t.ROW_STEP){var d=t.findGuardPattern(e,o,i,r,!1,a,c);if(d!=null){for(;i>0;){var f=t.findGuardPattern(e,o,--i,r,!1,a,c);if(f!=null)d=f;else{i++;break}}s[0]=new te(d[0],i),s[1]=new te(d[1],i),l=!0;break}}var h=i+1;if(l){for(var g=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<n;h++){var d=t.findGuardPattern(e,f[0],h,r,!1,a,c);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,g=0;else{if(g>t.SKIPPED_ROW_COUNT_MAX)break;g++}}h-=g+1,s[2]=new te(f[0],h),s[3]=new te(f[1],h)}return h-i<t.BARCODE_MIN_HEIGHT&&Ze.fill(s,null),s},t.findGuardPattern=function(e,n,r,i,o,a,s){Ze.fillWithin(s,0,s.length,0);for(var l=n,c=0;e.get(l,r)&&l>0&&c++<t.MAX_PIXEL_DRIFT;)l--;for(var d=l,f=0,h=a.length,g=o;d<i;d++){var p=e.get(d,r);if(p!==g)s[f]++;else{if(f===h-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=s[0]+s[1],Te.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,g=!g}}return f===h-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=n[s];if(o<a)return 1/0;var l=o/a;r*=l;for(var c=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,g=f>h?f-h:h-f;if(g>r)return 1/0;c+=g}return c/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),QC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fr=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Te.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=QC(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;i=this.field.add(i,s)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var l=this.coefficients[0],c=this.coefficients.length,d=1;d<c;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;Te.arraycopy(r,0,o,0,a);for(var s=a;s<r.length;s++)o[s]=this.field.add(n[s-a],r[s]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,a=new Int32Array(r+o-1),s=0;s<r;s++)for(var l=n[s],c=0;c<o;c++)a[s+c]=this.field.add(a[s+c],this.field.multiply(l,i[c]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ce,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),YC=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Im;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),qC=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZC=function(t){qC(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,a=0;a<n;a++)i.expTable[a]=o,o=o*r%n;for(var a=0;a<n-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new Fr(i,new Int32Array([0])),i.one=new Fr(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Fr(this,i)},e.PDF417_GF=new e(ge.NUMBER_OF_CODEWORDS,3),e}(YC),JC=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eS=function(){function t(){this.field=ZC.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,a=new Fr(this.field,e),s=new Int32Array(n),l=!1,c=n;c>0;c--){var d=a.evaluateAt(this.field.exp(c));s[n-c]=d,d!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=JC(r),g=h.next();!g.done;g=h.next()){var p=g.value,m=this.field.exp(e.length-1-p),w=new Fr(this.field,new Int32Array([this.field.subtract(0,m),1]));f=f.multiply(w)}}catch(_){i={error:_}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var x=new Fr(this.field,s),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),x,n),y=v[0],E=v[1],b=this.findErrorLocations(y),I=this.findErrorMagnitudes(E,y,b),c=0;c<b.length;c++){var T=e.length-1-this.field.log(b[c]);if(T<0)throw We.getChecksumInstance();e[T]=this.field.subtract(e[T],I[c])}return b.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,a=n,s=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var c=o,d=s;if(o=a,s=l,o.isZero())throw We.getChecksumInstance();a=c;for(var f=this.field.getZero(),h=o.getCoefficient(o.getDegree()),g=this.field.inverse(h);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),m=this.field.multiply(a.getCoefficient(a.getDegree()),g);f=f.add(this.field.buildMonomial(p,m)),a=a.subtract(o.multiplyByMonomial(p,m))}l=f.multiply(s).subtract(d).negative()}var w=l.getCoefficient(0);if(w===0)throw We.getChecksumInstance();var x=this.field.inverse(w),v=l.multiply(x),y=a.multiply(x);return[v,y]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw We.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,n.getCoefficient(a));for(var s=new Fr(this.field,o),l=r.length,c=new Int32Array(l),a=0;a<l;a++){var d=this.field.inverse(r[a]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(s.evaluateAt(d));c[a]=this.field.multiply(f,h)}return c},t}(),Wu=function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var a=n==null||r==null,s=i==null||o==null;if(a&&s)throw new $;a?(n=new te(0,i.getY()),r=new te(0,o.getY())):s&&(i=new te(e.getWidth()-1,n.getY()),o=new te(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var d=new te(l.getX(),c);r?i=d:a=d}if(n>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var g=new te(f.getX(),h);r?o=g:s=g}return new t(this.image,i,o,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),tS=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),pf=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(a,s,l,c,d,f){if(a==="%%")return"%";if(n[++r]!==void 0){a=c?parseInt(c.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,g;switch(f){case"s":g=n[r];break;case"c":g=n[r][0];break;case"f":g=parseFloat(n[r]).toFixed(a);break;case"p":g=parseFloat(n[r]).toPrecision(a);break;case"e":g=parseFloat(n[r]).toExponential(a);break;case"x":g=parseInt(n[r]).toString(h||16);break;case"d":g=parseFloat(parseInt(n[r],h||10).toPrecision(a)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(h);for(var p=parseInt(l),m=l&&l[0]+""=="0"?"0":" ";g.length<p;)g=s!==void 0?g+m:m+g;return g}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),nS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lm=function(){function t(e){this.boundingBox=new Wu(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new pf,i=0;try{for(var o=nS(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),rS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iS=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},mo=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(f,h){var g={getKey:function(){return f},getValue:function(){return h}};g.getValue()>r?(r=g.getValue(),i=[],i.push(g.getKey())):g.getValue()===r&&i.push(g.getKey())};try{for(var a=rS(this.values.entries()),s=a.next();!s.done;s=a.next()){var l=iS(s.value,2),c=l[0],d=l[1];o(c,d)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return ge.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),oS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P0=function(t){oS(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=xc(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=-1,d=1,f=0,h=s;h<l;h++)if(r[h]!=null){var g=r[h],p=g.getRowNumber()-c;if(p===0)f++;else if(p===1)d=Math.max(d,f),f=1,c=g.getRowNumber();else if(p<0||g.getRowNumber()>=n.getRowCount()||p>h)r[h]=null;else{var m=void 0;d>2?m=(d-2)*p:m=p;for(var w=m>=h,x=1;x<=m&&!w;x++)w=r[h-x]!=null;w?r[h]=null:(c=g.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=xc(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!=null){var c=l.getRowNumber();if(c>=o.length)continue;o[c]++}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),c=-1,d=a;d<s;d++)if(l[d]!=null){var f=l[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-c;h===0||(h===1?c=f.getRowNumber():f.getRowNumber()>=n.getRowCount()?l[d]=null:c=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new mo,a=new mo,s=new mo,l=new mo;try{for(var c=xc(i),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,g=f.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:a.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:o.setValue(h+1);break}}}}catch(m){n={error:m}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;var p=new tS(o.getValue()[0],a.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,p),p},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:a+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Lm),aS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sS=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ge.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[r];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[r];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var a=r[n],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[n],c[3]=l[n],n>0&&(c[0]=r[n-1],c[4]=s[n-1],c[5]=l[n-1]),n>1&&(c[8]=r[n-2],c[10]=s[n-2],c[11]=l[n-2]),n<r.length-1&&(c[1]=r[n+1],c[6]=s[n+1],c[7]=l[n+1]),n<r.length-2&&(c[9]=r[n+2],c[12]=s[n+2],c[13]=l[n+2]);try{for(var d=aS(c),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(a,h))return}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new pf,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){n.format("    |   ");continue}n.format(" %3d|%3d",o.getRowNumber(),o.getValue())}n.format("%n")}return n.toString()},t}(),lS=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),cS=function(){function t(){}return t.initialize=function(){for(var e=0;e<ge.SYMBOL_TABLE.length;e++)for(var n=ge.SYMBOL_TABLE[e],r=n&1,i=0;i<ge.BARS_IN_MODULE;i++){for(var o=0;(n&1)===r;)o+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ge.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ge.BARS_IN_MODULE-i-1]=Math.fround(o/ge.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=me.sum(e),r=new Int32Array(ge.BARS_IN_MODULE),i=0,o=0,a=0;a<ge.MODULES_IN_CODEWORD;a++){var s=n/(2*ge.MODULES_IN_CODEWORD)+a*n/ge.MODULES_IN_CODEWORD;o+e[i]<=s&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return ge.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=me.sum(e),r=new Array(ge.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=Hu.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,c=t.RATIOS_TABLE[s],d=0;d<ge.BARS_IN_MODULE;d++){var f=Math.fround(c[d]-r[d]);if(l+=Math.fround(f*f),l>=o)break}l<o&&(o=l,a=ge.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(function(e){return new Array(ge.BARS_IN_MODULE)}),t}(),uS=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),j0=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),dS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fS=function(t){dS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Lt),hS=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new fS;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new df;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),gS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pS=function(t){gS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Lt),mS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vS=function(t){mS(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new oe("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new pS;i=ue.MAX_VALUE}this.buf=Ze.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new df;this.ensureCapacity(this.count+i),Te.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ze.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(hS),be;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(be||(be={}));function Bm(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Ma;function Wn(t){if(typeof Ma>"u"&&(Ma=Bm()),Ma===null)throw new Error("BigInt is not supported!");return Ma(t)}function xS(){var t=[];t[0]=Wn(1);var e=Wn(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var yS=function(){function t(){}return t.decode=function(e,n){var r=new ce(""),i=qe.ISO8859_1;r.enableDecoding(i);for(var o=1,a=e[o++],s=new uS;o<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(a,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:qe.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Y;default:o--,o=t.textCompaction(e,o,r);break}if(o<e.length)a=e[o++];else throw Y.getFormatInstance()}if(r.length()===0)throw Y.getFormatInstance();var l=new bl(null,r.toString(),null,n);return l.setOther(s),l},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Y.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(ue.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new ce;n=t.textCompaction(e,n,a),r.setFileId(a.toString());var s=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ce;n=t.textCompaction(e,n+1,l),r.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new ce;n=t.textCompaction(e,n+1,c),r.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new ce;n=t.textCompaction(e,n+1,d),r.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new ce;n=t.numericCompaction(e,n+1,f),r.setSegmentCount(ue.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new ce;n=t.numericCompaction(e,n+1,h),r.setTimestamp(j0.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var g=new ce;n=t.numericCompaction(e,n+1,g),r.setChecksum(ue.parseInt(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new ce;n=t.numericCompaction(e,n+1,p),r.setFileSize(j0.parseLong(p.toString()));break;default:throw Y.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(s!==-1){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData(Ze.copyOfRange(e,s,s+m))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),o=new Int32Array((e[0]-n)*2),a=0,s=!1;n<e[0]&&!s;){var l=e[n++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[n++],o[a]=l,a++;break}}return t.decodeTextCompaction(i,o,a,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=be.ALPHA,a=be.ALPHA,s=0;s<r;){var l=e[s],c="";switch(o){case be.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.LL:o=be.LOWER;break;case t.ML:o=be.MIXED;break;case t.PS:a=o,o=be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break;case be.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case t.AS:a=o,o=be.ALPHA_SHIFT;break;case t.ML:o=be.MIXED;break;case t.PS:a=o,o=be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break;case be.MIXED:if(l<t.PL)c=t.MIXED_CHARS[l];else switch(l){case t.PL:o=be.PUNCT;break;case 26:c=" ";break;case t.LL:o=be.LOWER;break;case t.AL:o=be.ALPHA;break;case t.PS:a=o,o=be.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break;case be.PUNCT:if(l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=be.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break;case be.ALPHA_SHIFT:if(o=a,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break;case be.PUNCT_SHIFT:if(o=a,l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=be.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=be.ALPHA;break}break}c!==""&&i.append(c),s++}},t.byteCompaction=function(e,n,r,i,o){var a=new vS,s=0,l=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=n[i++];i<n[0]&&!c;)switch(d[s++]=f,l=900*l+f,f=n[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)a.write(Number(Wn(l)>>Wn(8*(5-h))));l=0,s=0}break}i===n[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=f);for(var g=0;g<s;g++)a.write(d[g]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!c;){var p=n[i++];if(p<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)a.write(Number(Wn(l)>>Wn(8*(5-h))));l=0,s=0}}break}return o.append(qt.decode(a.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var s=e[n++];if(n===e[0]&&(o=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(a,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Wn(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*Wn(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new Y;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Bm()?xS():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),lo=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wS=function(){function t(){}return t.decode=function(e,n,r,i,o,a,s){for(var l=new Wu(e,n,r,i,o),c=null,d=null,f,h=!0;;h=!1){if(n!=null&&(c=t.getRowIndicatorColumn(e,l,n,!0,a,s)),i!=null&&(d=t.getRowIndicatorColumn(e,l,i,!1,a,s)),f=t.merge(c,d),f==null)throw $.getNotFoundInstance();var g=f.getBoundingBox();if(h&&g!=null&&(g.getMinY()<l.getMinY()||g.getMaxY()>l.getMaxY()))l=g;else break}f.setBoundingBox(l);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,c),f.setDetectionResultColumn(p,d);for(var m=c!=null,w=1;w<=p;w++){var x=m?w:p-w;if(f.getDetectionResultColumn(x)===void 0){var v=void 0;x===0||x===p?v=new P0(l,x===0):v=new Lm(l),f.setDetectionResultColumn(x,v);for(var y=-1,E=y,b=l.getMinY();b<=l.getMaxY();b++){if(y=t.getStartColumn(f,x,b,m),y<0||y>l.getMaxX()){if(E===-1)continue;y=E}var I=t.detectCodeword(e,l.getMinX(),l.getMaxX(),m,y,b,a,s);I!=null&&(v.setCodeword(b,I),E=y,a=Math.min(a,I.getWidth()),s=Math.max(s,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=Wu.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new sS(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),a=0;try{for(var s=lo(i),l=s.next();!l.done;l=s.next()){var c=l.value;if(a+=o-c,c>0)break}}catch(g){n={error:g}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var d=e.getCodewords(),f=0;a>0&&d[f]==null;f++)a--;for(var h=0,f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(a,h,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=lo(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=Math.max(i,s)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,a){for(var s=new P0(n,i),l=0;l<2;l++)for(var c=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=c){var h=t.detectCodeword(e,0,e.getWidth(),i,d,f,o,a);h!=null&&(s.setCodeword(f,h),i?d=h.getStartX():d=h.getEndX())}return s},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>ge.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=n[s][l+1].getValue(),d=s*e.getBarcodeColumnCount()+l;c.length===0?r.push(d):c.length===1?i[d]=c[0]:(a.push(d),o.push(c))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ge.toIntArray(r),ge.toIntArray(a),f)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)n[i[l]]=o[l][a[l]];try{return t.decodeCodewords(n,e,r)}catch(d){var c=d instanceof We;if(!c)throw d}if(a.length===0)throw We.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<o[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw We.getChecksumInstance()}throw We.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)a[s][l]=new mo;var c=0;try{for(var d=lo(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var g=(i=void 0,lo(h.getCodewords())),p=g.next();!p.done;p=g.next()){var m=p.value;if(m!=null){var w=m.getRowNumber();if(w>=0){if(w>=a.length)continue;a[w][c].setValue(m.getValue())}}}}catch(x){i={error:x}}finally{try{p&&!p.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}c++}}catch(x){n={error:x}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return a},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,a,s=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,n-s)&&(l=e.getDetectionResultColumn(n-s).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(n).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,n-s)&&(l=e.getDetectionResultColumn(n-s).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var c=0;t.isValidBarcodeColumn(e,n-s);){n-=s;try{for(var d=(o=void 0,lo(e.getDetectionResultColumn(n).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+s*c*(h.getEndX()-h.getStartX())}}catch(g){o={error:g}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,a,s,l){o=t.adjustCodewordStartColumn(e,n,r,i,o,a);var c=t.getModuleBitCount(e,n,r,i,o,a);if(c==null)return null;var d,f=me.sum(c);if(i)d=o+f;else{for(var h=0;h<c.length/2;h++){var g=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=g}d=o,o=d-f}if(!t.checkCodewordSkew(f,s,l))return null;var p=cS.getDecodedValue(c),m=ge.getCodeword(p);return m===-1?null:new lS(o,d,t.getCodewordBucketNumber(p),m)},t.getModuleBitCount=function(e,n,r,i,o,a){for(var s=o,l=new Int32Array(8),c=0,d=i?1:-1,f=i;(i?s<r:s>=n)&&c<l.length;)e.get(s,a)===f?(l[c]++,s+=d):(c++,f=!f);return c===l.length||s===(i?r:n)&&c===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,a){for(var s=o,l=i?-1:1,c=0;c<2;c++){for(;(i?s>=n:s<r)&&i===e.get(s,a);){if(Math.abs(o-s)>t.CODEWORD_SKEW_SIZE)return o;s+=l}l=-l,i=!i}return s},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw Y.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var a=yS.decode(e,""+n);return a.setErrorsCorrected(o),a.setErasures(r.length),a},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw We.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw Y.getFormatInstance();var r=e[0];if(r>e.length)throw Y.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw Y.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new pf,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new eS,t}(),_S=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vs=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw $.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof Y||r instanceof We?$.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,a=new Array,s=KC.detectMultiple(e,n,r);try{for(var l=_S(s.getPoints()),c=l.next();!c.done;c=l.next()){var d=c.value,f=wS.decode(s.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new _t(f.getText(),f.getRawBytes(),void 0,d,ie.PDF_417);h.putMetadata(dt.ERROR_CORRECTION_LEVEL,f.getECLevel());var g=f.getOther();g!=null&&h.putMetadata(dt.PDF417_EXTRA_METADATA,g),a.push(h)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a.map(function(p){return p})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?ue.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),ES=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),M0=function(t){ES(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Lt),L0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fm=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(Ie.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ie.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(a){return a===ie.UPC_A||a===ie.UPC_E||a===ie.EAN_13||a===ie.EAN_8||a===ie.CODABAR||a===ie.CODE_39||a===ie.CODE_93||a===ie.CODE_128||a===ie.ITF||a===ie.RSS_14||a===ie.RSS_EXPANDED});o&&!n&&i.push(new gi(e)),r.includes(ie.QR_CODE)&&i.push(new Hs),r.includes(ie.DATA_MATRIX)&&i.push(new $s),r.includes(ie.AZTEC)&&i.push(new Fs),r.includes(ie.PDF_417)&&i.push(new Vs),o&&n&&i.push(new gi(e))}i.length===0&&(n||i.push(new gi(e)),i.push(new Hs),i.push(new $s),i.push(new Fs),i.push(new Vs),n&&i.push(new gi(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=L0(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new M0("No readers where selected, nothing can be read.");try{for(var i=L0(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof M0)continue}}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new $("No MultiFormat Readers were able to detect the code.")},t}(),CS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){CS(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,o=new Fm;return o.setHints(n),i=t.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e})(Qi);var SS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){SS(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Vs,n)||this}return e})(Qi);var bS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){bS(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Hs,n)||this}return e})(Qi);var Gu;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Gu||(Gu={}));const La=Gu;var Um=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new cr(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,o=n.length;o<=e;o++){var a=r.multiply(new cr(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));n.push(a),r=a}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new oe("No error correction bytes");var r=e.length-n;if(r<=0)throw new oe("No data bytes provided");var i=this.buildGenerator(n),o=new Int32Array(r);Te.arraycopy(e,0,o,0,r);var a=new cr(this.field,o);a=a.multiplyByMonomial(n,1);for(var s=a.divide(i)[1],l=s.getCoefficients(),c=n-l.length,d=0;d<c;d++)e[r+d]=0;Te.arraycopy(l,0,e,r+c,l.length)},t}(),vo=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=r[a],l=0;l<i-1;l++){var c=s[l];c===s[l+1]&&c===r[a+1][l]&&c===r[a+1][l+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var l=r[a];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&n++,a+6<o&&r[a][s]===1&&r[a+1][s]===0&&r[a+2][s]===1&&r[a+3][s]===1&&r[a+4][s]===1&&r[a+5][s]===0&&r[a+6][s]===1&&(t.isWhiteVertical(r,s,a-4,a)||t.isWhiteVertical(r,s,a+7,a+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=r[a],l=0;l<i;l++)s[l]===1&&n++;var c=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(n*2-c)*10/c);return d*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new oe("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<i;s++){for(var l=0,c=-1,d=0;d<o;d++){var f=n?a[s][d]:a[d][s];f===c?l++:(l>=5&&(r+=t.N1+(l-5)),l=1,c=f)}l>=5&&(r+=t.N1+(l-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),AS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NS=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=AS(this.bytes),o=i.next();!o.done;o=i.next()){var a=o.value;Ze.fill(a,e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],a=n.bytes[r],s=0,l=this.width;s<l;++s)if(o[s]!==a[s])return!1;return!0},t.prototype.toString=function(){for(var e=new ce,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],o=0,a=this.width;o<a;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Xu=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ce;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),TS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t){TS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Lt),B0=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new it;t.makeTypeInfoBits(e,n,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),l=t.TYPE_INFO_COORDINATES[o],c=l[0],d=l[1];if(r.setBoolean(c,d,s),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,s)}else{var f=8,h=r.getHeight()-7+(o-8);r.setBoolean(f,h,s)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new it;t.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var a=0;a<3;++a){var s=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+a,s),n.setBoolean(n.getHeight()-11+a,o,s)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,a=r.getWidth()-1,s=r.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<r.getHeight();){for(var l=0;l<2;++l){var c=a-l;if(t.isEmpty(r.get(c,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,n!==255&&vo.getDataMaskBit(n,c,s)&&(d=!d),r.setBoolean(c,s,d)}}s+=o}o=-o,s+=o,a-=2}if(i!==e.getSize())throw new ke("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ue.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new oe("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!Xu.isValidMaskPattern(n))throw new ke("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var a=new it;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new ke("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new ke("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ke;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new ke;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new ke;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(e+a,n+i,o[a])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(e+a,n+i,o[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var l=0;l!==a;l++){var c=i[l];c>=0&&t.isEmpty(n.get(c,s))&&t.embedPositionAdjustmentPattern(c-2,s-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),IS=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),F0=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return vo.applyMaskPenaltyRule1(e)+vo.applyMaskPenaltyRule2(e)+vo.applyMaskPenaltyRule3(e)+vo.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(La.CHARACTER_SET)!==void 0;o&&(i=r.get(La.CHARACTER_SET).toString());var a=this.chooseMode(e,i),s=new it;if(a===Re.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=qe.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(a,s);var c=new it;this.appendBytes(e,a,c,i);var d;if(r!==null&&r.get(La.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(La.QR_VERSION).toString(),10);d=Hr.getVersionForNumber(f);var h=this.calculateBitsNeeded(a,s,c,d);if(!this.willFit(h,d,n))throw new ke("Data too big for requested version")}else d=this.recommendVersion(n,a,s,c);var g=new it;g.appendBitArray(s);var p=a===Re.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(p,d,a,g),g.appendBitArray(c);var m=d.getECBlocksForLevel(n),w=d.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(w,g);var x=this.interleaveWithECBytes(g,d.getTotalCodewords(),w,m.getNumBlocks()),v=new Xu;v.setECLevel(n),v.setMode(a),v.setVersion(d);var y=d.getDimensionForVersion(),E=new NS(y,y),b=this.chooseMaskPattern(x,n,d,E);return v.setMaskPattern(b),B0.buildMatrix(x,n,d,b,E),v.setMatrix(E),v},t.recommendVersion=function(e,n,r,i){var o=this.calculateBitsNeeded(n,r,i,Hr.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(n,r,i,a);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),qe.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Re.KANJI;for(var r=!1,i=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(t.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Re.BYTE}return i?Re.ALPHANUMERIC:r?Re.NUMERIC:Re.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=qt.encode(e,qe.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=n[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<Xu.NUM_MASK_PATTERNS;s++){B0.buildMatrix(e,n,r,s,i);var l=this.calculateMaskPenalty(i);l<o&&(o=l,a=s)}return a},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=Hr.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new ke("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r),a=o.getTotalECCodewords(),s=i-a,l=(e+7)/8;return s>=l},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new ke("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var o=n.getSize()&7;if(o>0)for(var i=o;i<8;i++)n.appendBit(!1);for(var a=e-n.getSizeInBytes(),i=0;i<a;++i)n.appendBits(i&1?17:236,8);if(n.getSize()!==r)throw new ke("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,o,a){if(i>=r)throw new ke("Block ID too large");var s=e%r,l=r-s,c=Math.floor(e/r),d=c+1,f=Math.floor(n/r),h=f+1,g=c-f,p=d-h;if(g!==p)throw new ke("EC bytes mismatch");if(r!==l+s)throw new ke("RS blocks mismatch");if(e!==(f+g)*l+(h+p)*s)throw new ke("Total bytes mismatch");i<l?(o[0]=f,a[0]=g):(o[0]=h,a[0]=p)},t.interleaveWithECBytes=function(e,n,r,i){var o,a,s,l;if(e.getSizeInBytes()!==r)throw new ke("Number of bits and data bytes does not match");for(var c=0,d=0,f=0,h=new Array,g=0;g<i;++g){var p=new Int32Array(1),m=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,g,p,m);var w=p[0],x=new Uint8Array(w);e.toBytes(8*c,x,0,w);var v=t.generateECBytes(x,m[0]);h.push(new IS(x,v)),d=Math.max(d,w),f=Math.max(f,v.length),c+=p[0]}if(r!==c)throw new ke("Data bytes does not match offset");for(var y=new it,g=0;g<d;++g)try{for(var E=(o=void 0,F0(h)),b=E.next();!b.done;b=E.next()){var I=b.value,x=I.getDataBytes();g<x.length&&y.appendBits(x[g],8)}}catch(O){o={error:O}}finally{try{b&&!b.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}for(var g=0;g<f;++g)try{for(var T=(s=void 0,F0(h)),_=T.next();!_.done;_=T.next()){var I=_.value,v=I.getErrorCorrectionBytes();g<v.length&&y.appendBits(v[g],8)}}catch(O){s={error:O}}finally{try{_&&!_.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}if(n!==y.getSizeInBytes())throw new ke("Interleaving error: "+n+" and "+y.getSizeInBytes()+" differ.");return y},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),o=0;o<r;o++)i[o]=e[o]&255;new Um(kt.QR_CODE_FIELD_256).encode(i,n);for(var a=new Uint8Array(n),o=0;o<n;o++)a[o]=i[r+o];return a},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var o=r.getCharacterCountBits(n);if(e>=1<<o)throw new ke(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,n,r,i){switch(n){case Re.NUMERIC:t.appendNumericBytes(e,r);break;case Re.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Re.BYTE:t.append8BitBytes(e,r,i);break;case Re.KANJI:t.appendKanjiBytes(e,r);break;default:throw new ke("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getDigit(e.charAt(i));if(i+2<r){var a=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));n.appendBits(o*100+a*10+s,10),i+=3}else if(i+1<r){var a=t.getDigit(e.charAt(i+1));n.appendBits(o*10+a,7),i+=2}else n.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new ke;if(i+1<r){var a=t.getAlphanumericCode(e.charCodeAt(i+1));if(a===-1)throw new ke;n.appendBits(o*45+a,11),i+=2}else n.appendBits(o,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=qt.encode(e,r)}catch(l){throw new ke(l)}for(var o=0,a=i.length;o!==a;o++){var s=i[o];n.appendBits(s,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=qt.encode(e,qe.SJIS)}catch(f){throw new ke(f)}for(var i=r.length,o=0;o<i;o+=2){var a=r[o]&255,s=r[o+1]&255,l=a<<8&4294967295|s,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new ke("Invalid byte sequence");var d=(c>>8)*192+(c&255);n.appendBits(d,13)}},t.appendECI=function(e,n){n.appendBits(Re.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=qe.UTF8.getName(),t})();var OS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){OS(e,t);function e(n,r,i,o,a,s,l,c){var d=t.call(this,s,l)||this;if(d.yuvData=n,d.dataWidth=r,d.dataHeight=i,d.left=o,d.top=a,o+s>r||a+l>i)throw new oe("Crop rectangle does not fit within image data.");return c&&d.reverseHorizontal(s,l),d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Te.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Te.arraycopy(this.yuvData,a,o,0,i),o;for(var s=0;s<r;s++){var l=s*n;Te.arraycopy(this.yuvData,a,o,l,n),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var l=s*n,c=0;c<n;c++){var d=o[a+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+c]=4278190080|d*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<r;o++,a+=this.dataWidth)for(var s=a+n/2,l=a,c=a+n-1;l<s;l++,c--){var d=i[l];i[l]=i[c],i[c]=d}},e.prototype.invert=function(){return new Sl(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(ca);var kS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){kS(e,t);function e(n,r,i,o,a,s,l){var c=t.call(this,r,i)||this;if(c.dataWidth=o,c.dataHeight=a,c.left=s,c.top=l,n.BYTES_PER_ELEMENT===4){for(var d=r*i,f=new Uint8ClampedArray(d),h=0;h<d;h++){var g=n[h],p=g>>16&255,m=g>>7&510,w=g&255;f[h]=(p+m+w)/4&255}c.luminances=f}else c.luminances=n;if(o===void 0&&(c.dataWidth=r),a===void 0&&(c.dataHeight=i),s===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+r>c.dataWidth||c.top+i>c.dataHeight)throw new oe("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Te.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Te.arraycopy(this.luminances,a,o,0,i),o;for(var s=0;s<r;s++){var l=s*n;Te.arraycopy(this.luminances,a,o,l,n),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new Sl(this)},e})(ca);var RS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DS=function(t){RS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(qe),PS=function(){function t(){}return t.ISO_8859_1=qe.ISO8859_1,t}(),Ku,jS=301,MS=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=jS);return{LOG:t,ALOG:e}};Ku=MS([],[]),Ku.LOG;Ku.ALOG;var U0;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(U0||(U0={}));var $0=129,$m=230,LS=231,BS=235,FS=236,US=237,$S=238,HS=239,VS=240,yc=254,zS=254,H0="[)>05",V0="[)>06",z0="",Ee=0,ct=1,St=2,Ke=3,nt=4,vt=5,WS=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ee},t.prototype.encode=function(e){var n=ln.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ln.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case vt:e.writeCodeword(LS),e.signalEncoderChange(vt);return;case ct:e.writeCodeword($m),e.signalEncoderChange(ct);return;case Ke:e.writeCodeword($S),e.signalEncoderChange(Ke);break;case St:e.writeCodeword(HS),e.signalEncoderChange(St);break;case nt:e.writeCodeword(VS),e.signalEncoderChange(nt);break;default:throw new Error("Illegal mode: "+i)}else ln.isExtendedASCII(r)?(e.writeCodeword(BS),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(ln.isDigit(e)&&ln.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),GS=function(){function t(){}return t.prototype.getEncodingMode=function(){return vt},t.prototype.encode=function(e){var n=new ce;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=ln.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}var o=n.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(o<=249)n.setCharAt(0,he.getCharAt(o));else if(o<=1555)n.setCharAt(0,he.getCharAt(Math.floor(o/250)+249)),n.insert(1,he.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var c=0,r=n.length();c<r;c++)e.writeCodeword(this.randomize255State(n.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),mf=function(){function t(){}return t.prototype.getEncodingMode=function(){return ct},t.prototype.encodeMaximal=function(e){for(var n=new ce,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,r=this.encodeChar(a,n),n.length()%3===0&&(i=e.pos,o=n.length())}if(o!==n.length()){var s=Math.floor(n.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(n.length()%3);(d===2&&c!==2||d===1&&(r>3||c!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword($m),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new ce;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=Math.floor(n.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var l=new ce;for(n.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,n,l,i));n.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,n,l,i);break}var c=n.length();if(c%3===0){var d=ln.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),a=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(a),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(yc)}else if(a===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(yc),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(a>0||e.hasMoreCharacters())&&e.writeCodeword(yc)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ee)},t.prototype.encodeChar=function(e,n){if(e===" ".charCodeAt(0))return n.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return n.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return n.append(e-65+14),1;if(e<" ".charCodeAt(0))return n.append(0),n.append(e),2;if(e<="/".charCodeAt(0))return n.append(1),n.append(e-33),2;if(e<="@".charCodeAt(0))return n.append(1),n.append(e-58+15),2;if(e<="_".charCodeAt(0))return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new ce;return o.append(r),o.append(i),o.toString()},t}(),XS=function(){function t(){}return t.prototype.getEncodingMode=function(){return nt},t.prototype.encode=function(e){for(var n=new ce;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var o=n.toString().substring(4);n.setLengthToZero(),n.append(o);var a=ln.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}}n.append(he.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,s=this.encodeToCodewords(n.toString()),l=!e.hasMoreCharacters(),c=l&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}c?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(Ee)}},t.prototype.encodeChar=function(e,n){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?n.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?n.append(he.getCharAt(e-64)):ln.illegalCharacter(he.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,o=n>=3?e.charAt(2).charCodeAt(0):0,a=n>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(i<<12)+(o<<6)+a,l=s>>16&255,c=s>>8&255,d=s&255,f=new ce;return f.append(l),n>=2&&f.append(c),n>=3&&f.append(d),f.toString()},t}(),KS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(){function t(e,n,r,i,o,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,n,r,i,o){var a,s;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var l=QS(qS),c=l.next();!c.done;c=l.next()){var d=c.value;if(!(n===1&&d.rectangular)&&!(n===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),YS=function(t){KS(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(xe),qS=[new xe(!1,3,5,8,8,1),new xe(!1,5,7,10,10,1),new xe(!0,5,7,16,6,1),new xe(!1,8,10,12,12,1),new xe(!0,10,11,14,6,2),new xe(!1,12,12,14,14,1),new xe(!0,16,14,24,10,1),new xe(!1,18,14,16,16,1),new xe(!1,22,18,18,18,1),new xe(!0,22,18,16,10,2),new xe(!1,30,20,20,20,1),new xe(!0,32,24,16,14,2),new xe(!1,36,24,22,22,1),new xe(!1,44,28,24,24,1),new xe(!0,49,28,22,14,2),new xe(!1,62,36,14,14,4),new xe(!1,86,42,16,16,4),new xe(!1,114,48,18,18,4),new xe(!1,144,56,20,20,4),new xe(!1,174,68,22,22,4),new xe(!1,204,84,24,24,4,102,42),new xe(!1,280,112,14,14,16,140,56),new xe(!1,368,144,16,16,16,92,36),new xe(!1,456,192,18,18,16,114,48),new xe(!1,576,224,20,20,16,144,56),new xe(!1,696,272,22,22,16,174,68),new xe(!1,816,336,24,24,16,136,56),new xe(!1,1050,408,18,18,36,175,68),new xe(!1,1304,496,20,20,36,163,62),new YS],ZS=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(s){return s.charCodeAt(0)}),r=new ce,i=0,o=n.length;i<o;i++){var a=String.fromCharCode(n[i]&255);if(a==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new ce,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=xe.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),JS=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eb=function(t){JS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ke},e.prototype.encode=function(n){for(var r=new ce;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(n,r);var a=ln.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){n.signalEncoderChange(Ee);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case"*".charCodeAt(0):r.append(1);break;case">".charCodeAt(0):r.append(2);break;case" ".charCodeAt(0):r.append(3);break;default:n>="0".charCodeAt(0)&&n<="9".charCodeAt(0)?r.append(n-48+4):n>="A".charCodeAt(0)&&n<="Z".charCodeAt(0)?r.append(n-65+14):ln.illegalCharacter(he.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(zS),n.getNewEncoding()<0&&n.signalEncoderChange(Ee)},e}(mf),tb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nb=function(t){tb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return St},e.prototype.encodeChar=function(n,r){if(n===" ".charCodeAt(0))return r.append(3),1;if(n>="0".charCodeAt(0)&&n<="9".charCodeAt(0))return r.append(n-48+4),1;if(n>="a".charCodeAt(0)&&n<="z".charCodeAt(0))return r.append(n-97+14),1;if(n<" ".charCodeAt(0))return r.append(0),r.append(n),2;if(n<="/".charCodeAt(0))return r.append(1),r.append(n-33),2;if(n<="@".charCodeAt(0))return r.append(1),r.append(n-58+15),2;if(n>="[".charCodeAt(0)&&n<="_".charCodeAt(0))return r.append(1),r.append(n-91+22),2;if(n==="`".charCodeAt(0))return r.append(2),r.append(0),2;if(n<="Z".charCodeAt(0))return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(mf),rb=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=$0+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var a=new mf,s=[new WS,a,new nb,new eb,new XS,new GS],l=new ZS(e);l.setSymbolShape(n),l.setSizeConstraints(r,i),e.startsWith(H0)&&e.endsWith(z0)?(l.writeCodeword(FS),l.setSkipAtEnd(2),l.pos+=H0.length):e.startsWith(V0)&&e.endsWith(z0)&&(l.writeCodeword(US),l.setSkipAtEnd(2),l.pos+=V0.length);var c=Ee;for(o&&(a.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();d<f&&c!==Ee&&c!==vt&&c!==nt&&l.writeCodeword("");var h=l.getCodewords();for(h.length()<f&&h.append($0);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===Ke&&i===Ke){for(var o=Math.min(n+3,e.length),a=n;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return Ee}else if(r===nt&&i===nt){for(var o=Math.min(n+4,e.length),a=n;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return Ee}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===Ee?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(n+o===e.length){Ze.fill(a,0),Ze.fill(s,0);var l=this.findMinimums(i,s,ue.MAX_VALUE,a),c=this.getMinimumCount(a);if(s[Ee]===l)return Ee;if(c===1){if(a[vt]>0)return vt;if(a[nt]>0)return nt;if(a[St]>0)return St;if(a[Ke]>0)return Ke}return ct}var d=e.charCodeAt(n+o);if(o++,this.isDigit(d)?i[Ee]+=.5:this.isExtendedASCII(d)?(i[Ee]=Math.ceil(i[Ee]),i[Ee]+=2):(i[Ee]=Math.ceil(i[Ee]),i[Ee]++),this.isNativeC40(d)?i[ct]+=2/3:this.isExtendedASCII(d)?i[ct]+=8/3:i[ct]+=4/3,this.isNativeText(d)?i[St]+=2/3:this.isExtendedASCII(d)?i[St]+=8/3:i[St]+=4/3,this.isNativeX12(d)?i[Ke]+=2/3:this.isExtendedASCII(d)?i[Ke]+=13/3:i[Ke]+=10/3,this.isNativeEDIFACT(d)?i[nt]+=3/4:this.isExtendedASCII(d)?i[nt]+=17/4:i[nt]+=13/4,this.isSpecialB256(d)?i[vt]+=4:i[vt]++,o>=4){if(Ze.fill(a,0),Ze.fill(s,0),this.findMinimums(i,s,ue.MAX_VALUE,a),s[Ee]<this.min(s[vt],s[ct],s[St],s[Ke],s[nt]))return Ee;if(s[vt]<s[Ee]||s[vt]+1<this.min(s[ct],s[St],s[Ke],s[nt]))return vt;if(s[nt]+1<this.min(s[vt],s[ct],s[St],s[Ke],s[Ee]))return nt;if(s[St]+1<this.min(s[vt],s[ct],s[nt],s[Ke],s[Ee]))return St;if(s[Ke]+1<this.min(s[vt],s[ct],s[nt],s[St],s[Ee]))return Ke;if(s[ct]+1<this.min(s[Ee],s[vt],s[nt],s[St])){if(s[ct]<s[Ke])return ct;if(s[ct]===s[Ke]){for(var f=n+o+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Ke;if(!this.isNativeX12(h))break;f++}return ct}}}}},t.min=function(e,n,r,i,o){var a=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?a:Math.min(a,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var a=n[o]=Math.ceil(e[o]);r>a&&(r=a,Ze.fill(i,0)),r===a&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=ue.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}();const ln=rb;var wc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W0=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return qt.encode(e,this.charset)!=null}catch{return!1}},t}(),ib=function(){function t(e,n,r){var i,o,a,s,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new W0(DS.forName(k))}),this.encoders=[];var d=[];d.push(new W0(PS.ISO_8859_1));for(var f=n!=null&&n.name.startsWith("UTF"),h=0;h<e.length;h++){var g=!1;try{for(var p=(i=void 0,wc(d)),m=p.next();!m.done;m=p.next()){var w=m.value,x=e.charAt(h),v=x.charCodeAt(0);if(v===r||w.canEncode(x)){g=!0;break}}}catch(k){i={error:k}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!g)try{for(var y=(a=void 0,wc(this.ENCODERS)),E=y.next();!E.done;E=y.next()){var w=E.value;if(w.canEncode(e.charAt(h))){d.push(w),g=!0;break}}}catch(k){a={error:k}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}g||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var b=0;try{for(var I=wc(d),T=I.next();!T.done;T=I.next()){var w=T.value;this.encoders[b++]=w}}catch(k){l={error:k}}finally{try{T&&!T.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}}var _=-1;if(n!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&n.name===this.encoders[h].name){_=h;break}}this.priorityEncoderIndex=_}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return qt.encode(he.getCharAt(e),this.encoders[n].name)},t}(),ob=3,ab=function(){function t(e,n,r){this.fnc1=r;var i=new ib(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===r?1e3:a}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new ce,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,a){var s=e.charAt(i).charCodeAt(0),l=0,c=n.length();n.getPriorityEncoderIndex()>=0&&(s===a||n.canEncode(s,n.getPriorityEncoderIndex()))&&(l=n.getPriorityEncoderIndex(),c=l+1);for(var d=l;d<c;d++)(s===a||n.canEncode(s,d))&&this.addEdge(r,i+1,new G0(s,n,d,o,a))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new G0[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var a=1;a<=i;a++){for(var s=0;s<n.length();s++)o[a][s]!=null&&a<i&&this.addEdges(e,n,o,a,o[a][s],r);for(var s=0;s<n.length();s++)o[a-1][s]=null}for(var l=-1,c=ue.MAX_VALUE,s=0;s<n.length();s++)if(o[i][s]!=null){var d=o[i][s];d.cachedTotalSize<c&&(c=d.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=o[i][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var g=n.encode(h.c,h.encoderIndex),a=g.length-1;a>=0;a--)f.unshift(g[a]&255);var p=h.previous===null?0:h.previous.encoderIndex;p!==h.encoderIndex&&f.unshift(256+n.getECIValue(h.encoderIndex)),h=h.previous}for(var m=[],a=0;a<m.length;a++)m[a]=f[a];return m},t}(),G0=function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:n.encode(e,r).length,s=i===null?0:i.encoderIndex;s!==r&&(a+=ob),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),sb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__values;var lb=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};globalThis&&globalThis.__spread;var X0;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(X0||(X0={}));(function(t){sb(e,t);function e(n,r,i,o,a){var s=t.call(this,n,r,i)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(ab);var cb=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),K0=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),ub=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),db=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vf=function(t){db(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+ue.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(ub),fb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hb=function(t){fb(e,t);function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(vf);function gb(t,e,n){return new hb(t,e,n)}function co(t,e,n){return new vf(t,e,n)}var pb=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ur=0,zs=1,Qt=2,Hm=3,_n=4,mb=new vf(null,0,0),_c=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])],vb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function xb(t){var e,n;try{for(var r=vb(t),i=r.next();!i.done;i=r.next()){var o=i.value;Ze.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[ur][_n]=0,t[zs][_n]=0,t[zs][ur]=28,t[Hm][_n]=0,t[Qt][_n]=0,t[Qt][ur]=15,t}var Vm=xb(Ze.createInt32Array(6,6)),yb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wb=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=_c[this.mode][e];i=co(i,o&65535,o>>16),r+=o>>16}var a=e===Qt?4:5;return i=co(i,n,a),new t(i,e,0,r+a)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===Qt?4:5;return r=co(r,Vm[this.mode][e],i),r=co(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===_n||this.mode===Qt){var o=_c[r][ur];n=co(n,o&65535,o>>16),i+=o>>16,r=ur}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(n,r,this.binaryShiftByteCount+1,i+a);return s.binaryShiftByteCount===2047+31&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=gb(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(_c[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var a=new it;try{for(var s=yb(i),l=s.next();!l.done;l=s.next()){var c=l.value;c.appendTo(a,e)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},t.prototype.toString=function(){return he.format("%s bits=%d bytes=%d",pb[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(mb,ur,0,0),t}();function _b(t){var e=he.getCharCode(" "),n=he.getCharCode("."),r=he.getCharCode(",");t[ur][e]=1;for(var i=he.getCharCode("Z"),o=he.getCharCode("A"),a=o;a<=i;a++)t[ur][a]=a-o+2;t[zs][e]=1;for(var s=he.getCharCode("z"),l=he.getCharCode("a"),a=l;a<=s;a++)t[zs][a]=a-l+2;t[Qt][e]=1;for(var c=he.getCharCode("9"),d=he.getCharCode("0"),a=d;a<=c;a++)t[Qt][a]=a-d+2;t[Qt][r]=12,t[Qt][n]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[Hm][he.getCharCode(f[h])]=h;for(var g=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<g.length;h++)he.getCharCode(g[h])>0&&(t[_n][he.getCharCode(g[h])]=h);return t}var Ec=_b(Ze.createInt32Array(5,256)),Ba=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eb=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=he.getCharCode(" "),n=he.getCharCode(`
`),r=K0.singletonList(wb.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case he.getCharCode("\r"):o=a===n?2:0;break;case he.getCharCode("."):o=a===e?3:0;break;case he.getCharCode(","):o=a===e?4:0;break;case he.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(r=t.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var s=K0.min(r,function(l,c){return l.getBitCount()-c.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,o=[];try{for(var a=Ba(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,n,o)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,o=Ec[e.getMode()][i]>0,a=null,s=0;s<=_n;s++){var l=Ec[s][i];if(l>0){if(a==null&&(a=e.endBinaryShift(n)),!o||s===e.getMode()||s===Qt){var c=a.latchAndAppend(s,l);r.push(c)}if(!o&&Vm[e.getMode()][s]>=0){var d=a.shiftAndAppend(s,l);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||Ec[e.getMode()][i]===0){var f=e.addBinaryShiftChar(n);r.push(f)}},t.updateStateListForPair=function(e,n,r){var i,o,a=[];try{for(var s=Ba(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForPair(c,n,r,a)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(a)},t.updateStateForPair=function(e,n,r,i){var o=e.endBinaryShift(n);if(i.push(o.latchAndAppend(_n,r)),e.getMode()!==_n&&i.push(o.shiftAndAppend(_n,r)),r===3||r===4){var a=o.latchAndAppend(Qt,16-r).latchAndAppend(Qt,1);i.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(s)}},t.simplifyStates=function(e){var n,r,i,o,a=[];try{for(var s=Ba(e),l=s.next();!l.done;l=s.next()){var c=l.value,d=!0,f=function(w){if(w.isBetterThanOrEqualTo(c))return d=!1,"break";c.isBetterThanOrEqualTo(w)&&(a=a.filter(function(x){return x!==w}))};try{for(var h=(i=void 0,Ba(a)),g=h.next();!g.done;g=h.next()){var p=g.value,m=f(p);if(m==="break")break}}catch(w){i={error:w}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d&&a.push(c)}}catch(w){n={error:w}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},t}(),Cb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new Eb(e).encode(),o=ue.truncDivision(i.getSize()*n,100)+11,a=i.getSize()+o,s,l,c,d,f;if(r!==t.DEFAULT_AZTEC_LAYERS){if(s=r<0,l=Math.abs(r),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new oe(he.format("Illegal value %s for layers",r));c=t.totalBitsInLayer(l,s),d=t.WORD_SIZE[l];var h=c-c%d;if(f=t.stuffBits(i,d),f.getSize()+o>h)throw new oe("Data to large for user specified layer");if(s&&f.getSize()>d*64)throw new oe("Data to large for user specified layer")}else{d=0,f=null;for(var g=0;;g++){if(g>t.MAX_NB_BITS)throw new oe("Data too large for an Aztec code");if(s=g<=3,l=s?g+1:g,c=t.totalBitsInLayer(l,s),!(a>c)){(f==null||d!==t.WORD_SIZE[l])&&(d=t.WORD_SIZE[l],f=t.stuffBits(i,d));var h=c-c%d;if(!(s&&f.getSize()>d*64)&&f.getSize()+o<=h)break}}}var p=t.generateCheckWords(f,c,d),m=f.getSize()/d,w=t.generateModeMessage(s,l,m),x=(s?11:14)+l*4,v=new Int32Array(x),y;if(s){y=x;for(var g=0;g<v.length;g++)v[g]=g}else{y=x+1+2*ue.truncDivision(ue.truncDivision(x,2)-1,15);for(var E=ue.truncDivision(x,2),b=ue.truncDivision(y,2),g=0;g<E;g++){var I=g+ue.truncDivision(g,15);v[E-g-1]=b-I-1,v[E+g]=b+I+1}}for(var T=new Sn(y),g=0,_=0;g<l;g++){for(var k=(l-g)*4+(s?9:12),O=0;O<k;O++)for(var j=O*2,R=0;R<2;R++)p.get(_+j+R)&&T.set(v[g*2+R],v[g*2+O]),p.get(_+k*2+j+R)&&T.set(v[g*2+O],v[x-1-g*2-R]),p.get(_+k*4+j+R)&&T.set(v[x-1-g*2-R],v[x-1-g*2-O]),p.get(_+k*6+j+R)&&T.set(v[x-1-g*2-O],v[g*2+R]);_+=k*8}if(t.drawModeMessage(T,s,y,w),s)t.drawBullsEye(T,ue.truncDivision(y,2),5);else{t.drawBullsEye(T,ue.truncDivision(y,2),7);for(var g=0,O=0;g<ue.truncDivision(x,2)-1;g+=15,O+=16)for(var R=ue.truncDivision(y,2)&1;R<y;R+=2)T.set(ue.truncDivision(y,2)-O,R),T.set(ue.truncDivision(y,2)+O,R),T.set(R,ue.truncDivision(y,2)-O),T.set(R,ue.truncDivision(y,2)+O)}var A=new cb;return A.setCompact(s),A.setSize(y),A.setLayers(l),A.setCodeWords(m),A.setMatrix(T),A},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var o=n-i;o<=n+i;o++)e.set(o,n-i),e.set(o,n+i),e.set(n-i,o),e.set(n+i,o);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new it;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var o=ue.truncDivision(r,2);if(n)for(var a=0;a<7;a++){var s=o-3+a;i.get(a)&&e.set(s,o-5),i.get(a+7)&&e.set(o+5,s),i.get(20-a)&&e.set(s,o+5),i.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+ue.truncDivision(a,5);i.get(a)&&e.set(s,o-7),i.get(a+10)&&e.set(o+7,s),i.get(29-a)&&e.set(s,o+7),i.get(39-a)&&e.set(o-7,s)}},t.generateCheckWords=function(e,n,r){var i,o,a=e.getSize()/r,s=new Um(t.getGF(r)),l=ue.truncDivision(n,r),c=t.bitsToWords(e,r,l);s.encode(c,l-a);var d=n%r,f=new it;f.appendBits(0,d);try{for(var h=Cb(Array.from(c)),g=h.next();!g.done;g=h.next()){var p=g.value;f.appendBits(p,r)}}catch(m){i={error:m}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),o,a;for(o=0,a=e.getSize()/n;o<a;o++){for(var s=0,l=0;l<n;l++)s|=e.get(o*n+l)?1<<n-l-1:0;i[o]=s}return i},t.getGF=function(e){switch(e){case 4:return kt.AZTEC_PARAM;case 6:return kt.AZTEC_DATA_6;case 8:return kt.AZTEC_DATA_8;case 10:return kt.AZTEC_DATA_10;case 12:return kt.AZTEC_DATA_12;default:throw new oe("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new it,i=e.getSize(),o=(1<<n)-2,a=0;a<i;a+=n){for(var s=0,l=0;l<n;l++)(a+l>=i||e.get(a+l))&&(s|=1<<n-1-l);(s&o)===o?(r.appendBits(s&o,n),a--):s&o?r.appendBits(s,n):(r.appendBits(s|1,n),a--)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var Sb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bb=function(t){Sb(e,t);function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return e.makeBufferFromCanvasImageData=function(n){var r;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,r,i){for(var o=new Uint8ClampedArray(r*i),a=0,s=0,l=n.length;a<l;a+=4,s++){var c=void 0,d=n[a+3];if(d===0)c=255;else{var f=n[a],h=n[a+1],g=n[a+2];c=306*f+601*h+117*g+512>>10}o[s]=c}return o},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Sl(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=n*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),l=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);r.width=s,r.height=l;var c=r.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(s/2,l/2),c.rotate(i),c.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(ca);function zm(){return typeof navigator<"u"}function Ab(){return zm()&&!!navigator.mediaDevices}function Nb(){return!!(Ab()&&navigator.mediaDevices.enumerateDevices)}var mi=globalThis&&globalThis.__assign||function(){return mi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},mi.apply(this,arguments)},je=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Me=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Cc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tb={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Yi=function(){function t(e,n,r){n===void 0&&(n=new Map),r===void 0&&(r={}),this.reader=e,this.hints=n,this.options=mi(mi({},Tb),r)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ie.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,n){return je(this,void 0,void 0,function(){return Me(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return r.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var n,r,i=e.getVideoTracks();try{for(var o=Cc(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var n=e.getCapabilities();return"torch"in n}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new $e("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new $e("element with id '".concat(e,"' must be an ").concat(n," element"));return r},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var n=t.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var n=new bb(e),r=new Tm(n);return new Nm(r)},t.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new $e("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var n=document.createElement("canvas"),r=t.getMediaElementDimensions(e),i=r.width,o=r.height;return n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n},t.tryPlayVideo=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var n=t.createCaptureCanvas(e),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(r,e),n},t.createBinaryBitmapFromMediaElem=function(e){var n=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(n)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return je(this,void 0,void 0,function(){var e,n,r,i,o,a,s,l,c,d,f,h;return Me(this,function(g){switch(g.label){case 0:if(!zm())throw new Error("Can't enumerate devices, navigator is not present.");if(!Nb())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),n=[];try{for(r=Cc(e),i=r.next();!i.done;i=r.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device ".concat(n.length+1),c=o.groupId,d={deviceId:s,label:l,kind:a,groupId:c},n.push(d))}catch(p){f={error:p}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.findDeviceById=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:return[4,t.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,n){return je(this,void 0,void 0,function(){var r;return Me(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,a){var s=setTimeout(function(){t.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",l))},n),l=function(){t.tryPlayVideo(e).then(function(c){clearTimeout(s),e.removeEventListener("canplay",l),o(c)})};e.addEventListener("canplay",l)})]}})})},t.attachStreamToVideo=function(e,n,r){return r===void 0&&(r=5e3),je(this,void 0,void 0,function(){var i;return Me(this,function(o){switch(o.label){case 0:return i=t.prepareVideoElement(n),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(n,r){var i=1e4,o=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",a),r())},i),a=function(){clearTimeout(o),e.removeEventListener("load",a),n()};e.addEventListener("load",a)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new $e("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},t.prototype.decode=function(e){var n=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var n=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},t.prototype.decodeFromImageElement=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:if(!e)throw new $e("An image element must be provided.");return n=t.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:if(!e)throw new $e("An URL must be provided.");n=t.prepareImageElement(),n.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return t.destroyImageElement(n),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return je(this,void 0,void 0,function(){var i,o;return Me(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,n,r)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),t.disposeMediaStream(i),o;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,n,r){return je(this,void 0,void 0,function(){var i,o,a,s,l,c,d,f,h,g=this;return Me(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,n,i)];case 1:return o=p.sent(),a=function(){t.disposeMediaStream(e),t.cleanVideoSource(o)},s=this.scan(o,r,a),l=e.getVideoTracks(),c=mi(mi({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(m,w){return je(this,void 0,void 0,function(){var x,v,y,E,b,I,T;return Me(this,function(_){switch(_.label){case 0:x=w?l.filter(w):l,_.label=1;case 1:_.trys.push([1,6,7,8]),v=Cc(x),y=v.next(),_.label=2;case 2:return y.done?[3,5]:(E=y.value,[4,E.applyConstraints(m)]);case 3:_.sent(),_.label=4;case 4:return y=v.next(),[3,2];case 5:return[3,8];case 6:return b=_.sent(),I={error:b},[3,8];case 7:try{y&&!y.done&&(T=v.return)&&T.call(v)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return l.find(m).getConstraints()},streamVideoSettingsGet:function(m){return l.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return l.find(m).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=l==null?void 0:l.find(function(m){return t.mediaStreamIsTorchCompatibleTrack(m)}),h=function(m){return je(g,void 0,void 0,function(){return Me(this,function(w){switch(w.label){case 0:return[4,t.mediaStreamSetTorch(f,m)];case 1:return w.sent(),[2]}})})},c.switchTorch=h,c.stop=function(){return je(g,void 0,void 0,function(){return Me(this,function(m){switch(m.label){case 0:return s.stop(),[4,h(!1)];case 1:return m.sent(),[2]}})})}),[2,c]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return je(this,void 0,void 0,function(){var i,o;return Me(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,n){return je(this,void 0,void 0,function(){var r,i;return Me(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new $e("A video element must be provided.");return r=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,n)]}})})},t.prototype.decodeFromVideoUrl=function(e,n){return je(this,void 0,void 0,function(){var r,i,o,a;return Me(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new $e("An URL must be provided.");return r=t.prepareVideoElement(),r.src=e,i=function(){t.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,o)];case 1:return s.sent(),a=this.scan(r,n,i),[2,a]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return je(this,void 0,void 0,function(){var r;return Me(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return je(this,void 0,void 0,function(){var r,i,o;return Me(this,function(a){switch(a.label){case 0:return r=!!n,[4,t.attachStreamToVideo(e,n)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=a.sent(),[2,o];case 4:return r||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return je(this,void 0,void 0,function(){var r,i;return Me(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return je(this,void 0,void 0,function(){var n,r;return Me(this,function(i){switch(i.label){case 0:if(!e)throw new $e("A video element must be provided.");return n=t.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,r)];case 1:return i.sent(),[4,this.scanOneResult(n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return je(this,void 0,void 0,function(){var n,r;return Me(this,function(i){switch(i.label){case 0:if(!e)throw new $e("An URL must be provided.");n=t.prepareVideoElement(),n.src=e,r=this.decodeOnceFromVideoElement(n),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(n),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,n,r,i){var o=this;return n===void 0&&(n=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(a,s){o.scan(e,function(l,c,d){if(l){a(l),d.stop();return}if(c){if(c instanceof $&&n||c instanceof We&&r||c instanceof Y&&i)return;d.stop(),s(c)}})})},t.prototype.scan=function(e,n,r){var i=this;t.checkCallbackFnOrThrow(n);var o=t.createCaptureCanvas(e),a;try{a=o.getContext("2d",{willReadFrequently:!0})}catch{a=o.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){a=void 0,o=void 0},l=!1,c,d=function(){l=!0,clearTimeout(c),s(),r&&r()},f={stop:d},h=function(){if(!l)try{t.drawImageOnCanvas(a,e);var g=i.decodeFromCanvas(o);n(g,void 0,f),c=setTimeout(h,i.options.delayBetweenScanSuccess)}catch(x){n(void 0,x,f);var p=x instanceof We,m=x instanceof Y,w=x instanceof $;if(p||m||w){c=setTimeout(h,i.options.delayBetweenScanAttempts);return}s(),r&&r(x)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:return n=t.isImageLoaded(e),n?[3,2]:[4,t._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return je(this,void 0,void 0,function(){var n;return Me(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),t.streamTracker.push(n),[2,n]}})})},t.streamTracker=[],t}(),Ib=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Ib(e,t);function e(n,r){return t.call(this,new Fs,n,r)||this}return e})(Yi);var Ob=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Ob(e,t);function e(n,r){return t.call(this,new gi(n),n,r)||this}return e})(Yi);var kb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){kb(e,t);function e(n,r){return t.call(this,new $s,n,r)||this}return e})(Yi);var Rb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q0=function(t){Rb(e,t);function e(n,r){var i=this,o=new Fm;return o.setHints(n),i=t.call(this,o,n,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(Ie.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e}(Yi),Db=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Db(e,t);function e(n,r){return t.call(this,new Vs,n,r)||this}return e})(Yi);var Pb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Pb(e,t);function e(n,r){return t.call(this,new Hs,n,r)||this}return e})(Yi);const jb=(t,e)=>e.some(n=>t instanceof n);let Y0,q0;function Mb(){return Y0||(Y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lb(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wm=new WeakMap,Qu=new WeakMap,Gm=new WeakMap,Sc=new WeakMap,xf=new WeakMap;function Bb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(dr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Wm.set(n,t)}).catch(()=>{}),xf.set(e,t),e}function Fb(t){if(Qu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Qu.set(t,e)}let Yu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ub(t){Yu=t(Yu)}function $b(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bc(this),e,...n);return Gm.set(r,e.sort?e.sort():[e]),dr(r)}:Lb().includes(t)?function(...e){return t.apply(bc(this),e),dr(Wm.get(this))}:function(...e){return dr(t.apply(bc(this),e))}}function Hb(t){return typeof t=="function"?$b(t):(t instanceof IDBTransaction&&Fb(t),jb(t,Mb())?new Proxy(t,Yu):t)}function dr(t){if(t instanceof IDBRequest)return Bb(t);if(Sc.has(t))return Sc.get(t);const e=Hb(t);return e!==t&&(Sc.set(t,e),xf.set(e,t)),e}const bc=t=>xf.get(t);function Vb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=dr(a);return r&&a.addEventListener("upgradeneeded",l=>{r(dr(a.result),l.oldVersion,l.newVersion,dr(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const zb=["get","getKey","getAll","getAllKeys","count"],Wb=["put","add","delete","clear"],Ac=new Map;function Z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ac.get(e))return Ac.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Wb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zb.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return Ac.set(e,o),o}Ub(t=>({...t,get:(e,n,r)=>Z0(e,n)||t.get(e,n,r),has:(e,n)=>!!Z0(e,n)||t.has(e,n)}));const Gb="OfflineQueueDB",Ws="offlineQueue";async function Xm(){return Vb(Gb,1,{upgrade(t){t.objectStoreNames.contains(Ws)||t.createObjectStore(Ws,{keyPath:"createdAt"})}})}async function J0(){try{console.log(" Starting offline queue flush...");const e=(await Xm()).transaction(Ws,"readwrite"),n=e.store,r=await n.getAll();if(r.length===0){console.log(" No offline scans to sync");return}console.log(` Found ${r.length} offline scans to sync`);let i=0,o=0;for(const a of r)try{console.log(` Syncing scan ${a.createdAt}...`);const s=new FormData;if(s.append("qr_data",a.notes||""),a.photoDataUrl){const c=await(await fetch(a.photoDataUrl)).blob();s.append("photo",c,`offline-scan-${a.createdAt}.jpg`)}const l=await ne.post("/simple",s);if(l.status===200)await n.delete(a.createdAt),i++,console.log(` Synced scan ${a.createdAt}`);else{console.error(` Failed to sync scan ${a.createdAt}:`,l.status),o++;break}}catch(s){console.error(` Error syncing scan ${a.createdAt}:`,s),o++;break}await e.done,console.log(` Queue flush completed: ${i} success, ${o} errors`),i>0&&"serviceWorker"in navigator&&"Notification"in window&&Notification.permission==="granted"&&new Notification(" Sync Hon Thnh",{body:` sync ${i} check-in offline`,icon:"/logo.svg"})}catch(t){throw console.error(" Queue flush failed:",t),t}}async function Km(){try{const r=await(await Xm()).transaction(Ws,"readonly").store.getAll();return{count:r.length,items:r.map(i=>({createdAt:i.createdAt,notes:i.notes,hasPhoto:!!i.photoDataUrl}))}}catch(t){return console.error(" Failed to get queue status:",t),{count:0,items:[]}}}function Xb(){window.addEventListener("online",async()=>{console.log(" Back online - starting sync...");try{await J0()}catch(t){console.error(" Online sync failed:",t)}}),window.addEventListener("offline",()=>{console.log(" Gone offline")}),setInterval(async()=>{if(navigator.onLine)try{const t=await Km();t.count>0&&(console.log(` Found ${t.count} pending offline scans`),await J0())}catch(t){console.error(" Periodic sync failed:",t)}},3e4),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}const Dr=class Dr{constructor(){Nn(this,"activeStreams",new Map);Nn(this,"isMobile",!1);Nn(this,"isIOS",!1);Nn(this,"isAndroid",!1);this.detectDevice()}static getInstance(){return Dr.instance||(Dr.instance=new Dr),Dr.instance}detectDevice(){const e=navigator.userAgent;this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),this.isIOS=/iPad|iPhone|iPod/.test(e),this.isAndroid=/Android/i.test(e),console.log(" Device Detection:",{isMobile:this.isMobile,isIOS:this.isIOS,isAndroid:this.isAndroid,userAgent:e})}getOptimizedConstraints(e){const n={audio:!1,video:{}};if(this.isMobile)switch(e){case"qr":return{...n,video:{facingMode:"environment"}};case"photo":case"face":return{...n,video:{facingMode:"user"}};default:return{...n,video:{facingMode:"user"}}}else switch(e){case"qr":return{...n,video:{facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480},frameRate:{ideal:30,max:30},aspectRatio:{ideal:16/9},resizeMode:"crop-and-scale"}};case"photo":case"face":return{...n,video:{facingMode:"user",width:{ideal:640,max:1280},height:{ideal:480,max:720},frameRate:{ideal:24,max:30},aspectRatio:{ideal:4/3},resizeMode:"crop-and-scale"}};default:return n}}async getStream(e,n){try{console.log(` Getting camera stream for ${e}:`,n),await this.ensureSingleCameraStream(e);const r=await navigator.mediaDevices.getUserMedia(n);return this.activeStreams.set(e,r),console.log(` Camera stream obtained for ${e}`),r}catch(r){if(console.error(` Failed to get camera stream for ${e}:`,r),this.isMobile)return console.log(" Trying mobile fallback..."),await this.getMobileFallbackStream(e,n);throw r}}async getMobileFallbackStream(e,n){var i;const r={audio:!1,video:{facingMode:((i=n.video)==null?void 0:i.facingMode)||"user",width:{ideal:320,max:640},height:{ideal:240,max:480},frameRate:{ideal:10,max:15}}};try{console.log(" Trying mobile fallback constraints:",r);const o=await navigator.mediaDevices.getUserMedia(r);return this.activeStreams.set(e,o),console.log(` Mobile fallback stream obtained for ${e}`),o}catch(o){console.error(" Mobile fallback also failed:",o);const a={audio:!1,video:!0};console.log(" Trying minimal constraints:",a);const s=await navigator.mediaDevices.getUserMedia(a);return this.activeStreams.set(e,s),console.log(` Minimal stream obtained for ${e}`),s}}async stopStream(e){const n=this.activeStreams.get(e);n&&(console.log(` Stopping camera stream for ${e}`),n.getTracks().forEach(r=>{console.log(` Stopping track: ${r.kind} - ${r.label}`),r.stop()}),this.activeStreams.delete(e),await new Promise(r=>setTimeout(r,this.isMobile?800:500)))}async stopAllStreams(){console.log(" Stopping all camera streams...");const e=[];for(const[r,i]of this.activeStreams)console.log(` Stopping stream: ${r}`),i.getTracks().forEach(o=>{console.log(` Stopping track: ${o.kind} - ${o.label}`),e.push(o),o.stop()});this.activeStreams.clear(),await new Promise(r=>setTimeout(r,this.isMobile?1500:1e3));const n=e.filter(r=>r.readyState==="live");n.length>0&&(console.log(` Still ${n.length} active tracks, forcing stop...`),n.forEach(r=>{r.stop()}),await new Promise(r=>setTimeout(r,500))),console.log(" All camera streams stopped")}hasActiveStreams(){return this.activeStreams.size>0}getActiveStreams(){return Array.from(this.activeStreams.keys())}getIsMobile(){return this.isMobile}getIsIOS(){return this.isIOS}getIsAndroid(){return this.isAndroid}async forceStopAllStreams(){console.log(" FORCE STOPPING all camera streams...");const e=[];for(const[i,o]of this.activeStreams)console.log(` FORCE stopping stream: ${i}`),o.getTracks().forEach(a=>{console.log(` FORCE stopping track: ${a.kind} - ${a.label}`),e.push(a),a.stop()});this.activeStreams.clear();const n=this.isMobile?3e3:2e3;console.log(` Waiting ${n}ms for mobile: ${this.isMobile}`),await new Promise(i=>setTimeout(i,n)),e.forEach(i=>{i.readyState==="live"&&(console.log(` FORCE stopping remaining track: ${i.kind}`),i.stop())});const r=this.isMobile?2e3:1e3;console.log(` Extra wait ${r}ms for mobile: ${this.isMobile}`),await new Promise(i=>setTimeout(i,r)),console.log(" FORCE STOP completed")}async nuclearStopAllCamera(){console.log(" NUCLEAR STOP: Stopping ALL camera on system...");for(const[r,i]of this.activeStreams)console.log(` NUCLEAR stopping stream: ${r}`),i.getTracks().forEach(o=>{console.log(` NUCLEAR stopping track: ${o.kind} - ${o.label}`),o.stop()});this.activeStreams.clear();const e=this.isMobile?5e3:3e3;console.log(` NUCLEAR wait ${e}ms for mobile: ${this.isMobile}`),await new Promise(r=>setTimeout(r,e));try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(i=>{console.log(` NUCLEAR stopping temp track: ${i.kind}`),i.stop()})}catch(r){console.log(" NUCLEAR temp stream failed (expected):",r)}const n=this.isMobile?3e3:2e3;console.log(` NUCLEAR extra wait ${n}ms for mobile: ${this.isMobile}`),await new Promise(r=>setTimeout(r,n)),console.log(" NUCLEAR STOP completed")}async ultimateStopAllCamera(){console.log(" ULTIMATE STOP: Final attempt to stop ALL camera...");for(const[r,i]of this.activeStreams)console.log(` ULTIMATE stopping stream: ${r}`),i.getTracks().forEach(o=>{console.log(` ULTIMATE stopping track: ${o.kind} - ${o.label}`),o.stop()});this.activeStreams.clear();const e=this.isMobile?1e4:5e3;console.log(` ULTIMATE wait ${e}ms for mobile: ${this.isMobile}`),await new Promise(r=>setTimeout(r,e));try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(i=>{console.log(` ULTIMATE stopping temp track: ${i.kind}`),i.stop()})}catch(r){console.log(" ULTIMATE temp stream failed (expected):",r)}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}})).getTracks().forEach(i=>{console.log(` ULTIMATE stopping temp track 2: ${i.kind}`),i.stop()})}catch(r){console.log(" ULTIMATE temp stream 2 failed (expected):",r)}const n=this.isMobile?5e3:3e3;console.log(` ULTIMATE extra wait ${n}ms for mobile: ${this.isMobile}`),await new Promise(r=>setTimeout(r,n)),console.log(" ULTIMATE STOP completed")}async killGhostCameraStreams(){console.log(" GHOST KILLER: Killing ghost camera streams...");for(const[n,r]of this.activeStreams)console.log(` GHOST KILLER stopping stream: ${n}`),r.getTracks().forEach(i=>{console.log(` GHOST KILLER stopping track: ${i.kind} - ${i.label}`),i.stop()});this.activeStreams.clear(),await new Promise(n=>setTimeout(n,2e3));try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const n=await navigator.mediaDevices.getUserMedia({video:!0});console.log(" GHOST KILLER got temp stream, killing..."),n.getTracks().forEach(r=>{console.log(` GHOST KILLER killing temp track: ${r.kind}`),r.stop()})}}catch(n){console.log(" GHOST KILLER temp stream failed (expected):",n)}try{const n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});console.log(" GHOST KILLER got temp stream 2, killing..."),n.getTracks().forEach(r=>{console.log(` GHOST KILLER killing temp track 2: ${r.kind}`),r.stop()})}catch(n){console.log(" GHOST KILLER temp stream 2 failed (expected):",n)}try{const n=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});console.log(" GHOST KILLER got temp stream 3, killing..."),n.getTracks().forEach(r=>{console.log(` GHOST KILLER killing temp track 3: ${r.kind}`),r.stop()})}catch(n){console.log(" GHOST KILLER temp stream 3 failed (expected):",n)}const e=this.isMobile?5e3:3e3;console.log(` GHOST KILLER wait ${e}ms for mobile: ${this.isMobile}`),await new Promise(n=>setTimeout(n,e)),console.log(" GHOST KILLER completed")}getActiveStreamsMap(){return this.activeStreams}async debugCameraStatus(){console.log(" DEBUG: Camera Status Check..."),console.log(` Active streams: ${this.activeStreams.size}`),console.log(` Device: Mobile=${this.isMobile}, iOS=${this.isIOS}, Android=${this.isAndroid}`);for(const[e,n]of this.activeStreams)console.log(` Stream ${e}:`,{id:n.id,active:n.active,tracks:n.getTracks().map(r=>({kind:r.kind,label:r.label,readyState:r.readyState,enabled:r.enabled}))});try{const n=(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput");console.log(` Available video devices: ${n.length}`),n.forEach((r,i)=>{console.log(` Device ${i}:`,{deviceId:r.deviceId,label:r.label,groupId:r.groupId})})}catch(e){console.log(" Cannot enumerate devices:",e)}}async simpleStopAllStreams(){console.log(" SIMPLE STOP: Stopping all camera streams...");for(const[e,n]of this.activeStreams)console.log(` Stopping stream: ${e}`),n.getTracks().forEach(r=>{console.log(` Stopping track: ${r.kind} - ${r.label}`),r.stop()});this.activeStreams.clear(),await new Promise(e=>setTimeout(e,1e3)),console.log(" SIMPLE STOP completed")}async stopAllCameraTracks(){console.log(" STOP ALL CAMERA TRACKS: Stopping all camera tracks on system...");for(const[e,n]of this.activeStreams)console.log(` Stopping stream: ${e}`),n.getTracks().forEach(r=>{console.log(` Stopping track: ${r.kind} - ${r.label}`),r.stop()});this.activeStreams.clear(),await new Promise(e=>setTimeout(e,this.isMobile?1500:1e3)),console.log(" STOP ALL CAMERA TRACKS completed")}async ensureSingleCameraStream(e){console.log(` ENSURING SINGLE CAMERA: Only ${e} should be active...`);for(const[n,r]of this.activeStreams)n!==e&&(console.log(` Stopping other stream: ${n}`),r.getTracks().forEach(i=>{console.log(` Stopping track: ${i.kind} - ${i.label}`),i.stop()}),this.activeStreams.delete(n));await new Promise(n=>setTimeout(n,this.isMobile?1e3:500)),console.log(` SINGLE CAMERA ENSURED: Only ${e} is active`)}};Nn(Dr,"instance");let Gs=Dr;const Kb=({isActive:t,onError:e,onReady:n,className:r="",facingMode:i="user"})=>{const o=C.useRef(null),[a,s]=C.useState(null),[l,c]=C.useState(!1),[d,f]=C.useState(null),h=Gs.getInstance();return C.useEffect(()=>{let g=null;const p=async()=>{if(t){g&&(g.getTracks().forEach(w=>w.stop()),g=null,f(null)),o.current&&(o.current.srcObject=null),await h.stopAllCameraTracks(),c(!0),s(null);try{const w=i==="user"?"photo":"qr",x=h.getOptimizedConstraints(w);console.log(" Using optimized camera constraints:",x);const v=await h.getStream("final-camera",x);g=v,f(v),o.current&&(o.current.srcObject=v,o.current.addEventListener("loadedmetadata",()=>{var y;(y=o.current)==null||y.play().then(()=>{c(!1),n&&n()}).catch(()=>{s("Khng th pht video"),c(!1),e&&e("Khng th pht video")})},{once:!0}))}catch(w){console.error(" Camera error:",w);let x="Khng th khi ng camera";if(w.name==="NotReadableError")x="Camera ang c s dng. Vui lng ng ng dng khc v th li";else if(w.name==="NotAllowedError")x="Khng c quyn truy cp camera. Vui lng cho php truy cp camera";else if(w.name==="NotFoundError")x="Khng tm thy camera. Vui lng kim tra kt ni camera";else if(w.name==="OverconstrainedError"){x="Camera khng h tr ci t yu cu. ang th ci t khc...";try{const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:i},audio:!1});g=v,f(v),o.current&&(o.current.srcObject=v,o.current.addEventListener("loadedmetadata",()=>{var y;(y=o.current)==null||y.play().then(()=>{c(!1),n&&n()}).catch(()=>{s("Khng th pht video"),c(!1),e&&e("Khng th pht video")})},{once:!0}));return}catch(v){console.error(" Fallback camera error:",v),x="Khng th khi ng camera vi bt k ci t no"}}s(x),c(!1),e&&e(x)}}},m=async()=>{await h.stopStream("final-camera"),g&&(g=null,f(null)),o.current&&(o.current.srcObject=null),s(null),c(!1)};return t?p():m(),()=>{m()}},[t,i,e,n]),a?u.jsx("div",{className:`flex items-center justify-center w-full h-full bg-gray-900 text-white rounded-lg ${r}`,children:u.jsxs("div",{className:"text-center p-4",children:[u.jsx("p",{className:"text-red-500 mb-2 text-4xl",children:""}),u.jsx("p",{className:"text-sm font-medium mb-2",children:a}),u.jsx("button",{onClick:()=>{s(null),t&&(c(!0),setTimeout(()=>c(!1),100))},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm mt-2",children:" Th li"})]})}):u.jsxs("div",{className:`relative w-full h-full bg-black rounded-lg overflow-hidden ${r}`,children:[l&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75 text-white z-10",children:u.jsx("p",{children:"ang ti..."})}),u.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})]})},e1=()=>{const t=bn(),[e]=ul(),{user:n}=Ae(),r=e.get("task_id"),i=e.get("stop_id"),o=e.get("location_id"),a=C.useRef(null),s=C.useRef(null),l=C.useRef(null),[c,d]=C.useState(!1),[f,h]=C.useState(!1),[g,p]=C.useState(null),[m,w]=C.useState(!1),[x,v]=C.useState(""),[y,E]=C.useState(""),[b,I]=C.useState(null),[T,_]=C.useState("user"),[k,O]=C.useState("scan"),[j,R]=C.useState(!1),[A,D]=C.useState(null),[V,W]=C.useState(null),J=async()=>{try{if(a.current||(a.current=new Q0),!l.current){console.error(" Video element for QR scanner not found."),X.error("Li: Khng tm thy phn t video cho QR Scanner.");return}console.log(" Starting QR scanner with camera...");const L=await Q0.listVideoInputDevices();let z;const G=L.find(Z=>Z.label.toLowerCase().includes("back")||Z.label.toLowerCase().includes("environment"));if(G)z=G.deviceId,console.log(" Found environment camera:",G.label);else if(L.length>0)z=L[0].deviceId,console.warn(" Environment camera not found, using first available camera:",L[0].label);else{X.error("Khng tm thy thit b camera no."),console.error(" No video input devices found.");return}const re=await a.current.decodeFromVideoDevice(z,l.current,(Z,ye)=>{Z&&!x&&(console.log(" QR Code detected:",Z.getText()),s.current&&(s.current.stop(),console.log(" Camera stopped after QR detection")),N(Z.getText())),ye&&!(ye instanceof Error&&ye.name==="NotFoundException")&&console.log(" QR scan error:",ye)});s.current=re,console.log(" QR scanner started successfully"),r&&i&&o&&X.success("  vo ch  chm cng. Qut QR code ti v tr c giao!")}catch(L){console.error("QR Scanner error:",L),X.error("Khng th khi ng QR Scanner")}},N=async L=>{if(!x){if(console.log("QR Code scanned:",L),v(L),s.current)try{s.current.stop(),console.log(" QR Scanner stopped immediately after scan")}catch{console.log("Scanner stopped")}finally{s.current=null}try{const G=(await ne.get(`/qr-codes/validate/${encodeURIComponent(L)}`)).data;if(!G||!G.valid){v(""),W(null),D(null),X.error(` M khng hp l: ${L}`);return}W(L);const re={name:G.content||L,address:` qut QR: ${G.content||L}`,description:`QR Code: ${L}`,location_id:G.location_id};D(re),X.success(`  qut QR thnh cng: ${re.name}`),O("photo"),localStorage.setItem("lastScannedLocation",JSON.stringify(re)),localStorage.setItem("lastScannedQR",L)}catch(z){console.error("Li x l QR Code:",z),X.error("Li x l QR Code"),v("")}}},B=async()=>{try{if(console.log(" Enabling Photo Camera..."),w(!0),p(null),s.current)try{console.log(" Stopping QR Scanner before enabling selfie camera..."),s.current.stop()}catch{console.log("QR Scanner stopped")}finally{s.current=null}d(!1),await Gs.getInstance().forceStopAllStreams(),await new Promise(z=>setTimeout(z,1e3)),h(!0),w(!1),console.log(" Photo Camera enabled successfully")}catch(L){console.error(" Photo Camera error:",L),p("Khng th khi ng camera. Vui lng ng cc ng dng khc ang s dng camera v th li."),w(!1)}},H=()=>{console.log(" CAPTURE PHOTO: Starting with SimpleVideoCamera...");const L=document.querySelector("video");if(!L){console.error(" CAPTURE PHOTO: No video element found"),X.error("Khng tm thy video element");return}if(!L.videoWidth||!L.videoHeight){console.error(" CAPTURE PHOTO: Video element not ready"),X.error("Video cha sn sng. Vui lng i mt cht v th li.");return}try{const z=document.createElement("canvas"),G=z.getContext("2d");if(!G){console.error(" CAPTURE PHOTO: No canvas context"),X.error("Khng th to canvas context");return}z.width=L.videoWidth,z.height=L.videoHeight,G.drawImage(L,0,0,z.width,z.height);const re=new Date,ye=new Date(re.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});G.fillStyle="rgba(0, 0, 0, 0.8)",G.fillRect(10,z.height-50,300,40),G.fillStyle="white",G.font="bold 16px Arial",G.fillText(` ${ye}`,20,z.height-25);const gt=z.toDataURL("image/jpeg",.9);console.log(" CAPTURE PHOTO: Screenshot result:",gt?"SUCCESS":"FAILED"),gt?(I(gt),console.log(" CAPTURE PHOTO: Photo saved, length:",gt.length),X.success(`  chp nh selfie thnh cng! Thi gian: ${ye}`),O("submit")):(console.error(" CAPTURE PHOTO: Failed to generate image"),X.error("Khng th chp nh"))}catch(z){console.error(" CAPTURE PHOTO: Error:",z),X.error("Li khi chp nh: "+z.message)}},F=async()=>{var L;console.log(" SUBMIT CHECKIN: Starting..."),R(!0);try{if(!n){X.error("Vui lng ng nhp trc khi check-in!"),t("/");return}const z=localStorage.getItem("access_token");if(z)ne.defaults.headers.common.Authorization=`Bearer ${z}`,console.log(" Token restored for checkin:",z.substring(0,20)+"...");else{X.error("Token khng tn ti. Vui lng ng nhp li!"),t("/");return}console.log(" Starting checkin submission...");const G={qr_code:x||V||"manual_checkin",location_id:(A==null?void 0:A.location_id)||1,notes:y||`Check-in t QR Scanner: ${x||V}`,latitude:0,longitude:0,photo:b||"data:image/jpeg;base64,placeholder"};console.log(" Sending checkin data:",G);const re=await ne.post("/patrol-records/checkin",G);console.log(" Checkin response:",re.data),X.success("Check-in thnh cng!");const Z={taskId:r,stopId:i,locationId:o,checkinData:re.data,timestamp:new Date().toISOString(),user:(n==null?void 0:n.username)||(n==null?void 0:n.full_name)};console.log(" Dispatching checkin-success event:",Z),window.dispatchEvent(new CustomEvent("checkin-success",{detail:Z})),t(r&&i&&o?"/employee-dashboard":"/admin-dashboard")}catch(z){console.error(" Check-in error:",z),((L=z.response)==null?void 0:L.status)===401?(X.error("Phin ng nhp  ht hn. Vui lng ng nhp li!"),t("/")):X.error("Li khi submit check-in: "+z.message)}finally{R(!1)}};return C.useEffect(()=>{if(!n){console.log(" QRScannerPage: No user found, redirecting to login"),X.error("Vui lng ng nhp  s dng QR Scanner!"),t("/");return}console.log(" QRScannerPage: User authenticated:",n.username)},[n,t]),C.useEffect(()=>{const L=localStorage.getItem("lastScannedLocation"),z=localStorage.getItem("lastScannedQR");if(L&&z)try{const G=JSON.parse(L);D(G),W(z),v(z),console.log("Khi phc thng tin v tr t localStorage:",G)}catch(G){console.error("Li khi phc thng tin:",G)}Xb(),console.log(" Offline sync setup completed")},[]),C.useEffect(()=>()=>{s.current&&(s.current.stop(),console.log(" QR Scanner cleaned up on unmount"))},[]),C.useEffect(()=>{c&&!x?(w(!0),J().finally(()=>{w(!1)})):!c&&s.current&&(s.current.stop(),console.log(" QR Scanner stopped due to isCameraActive = false"),s.current=null)},[c,x]),u.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Qut QR & Check-in"}),u.jsxs("button",{onClick:()=>{t(r&&i&&o?"/employee-dashboard":"/dashboard")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:[" Quay li ",r&&i&&o?"Employee Dashboard":"Dashboard"]})]})}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Camera Qut QR"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>d(!c),className:`px-4 py-2 rounded-lg font-medium ${c?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:c?" Tt Camera":" Bt Camera"}),u.jsx("button",{onClick:()=>{D(null),W(null),v(""),localStorage.removeItem("lastScannedLocation"),localStorage.removeItem("lastScannedQR")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:" Reset"})]})]}),u.jsx("div",{className:"relative h-96",children:c?u.jsxs("div",{className:"qr-scanner-container w-full h-full rounded-lg overflow-hidden relative",children:[u.jsx("video",{ref:l,id:"qr-video",className:"w-full h-full object-cover"}),m&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg z-10",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),u.jsx("p",{className:"text-sm",children:"ang khi ng QR Scanner..."}),u.jsx("p",{className:"text-xs mt-2",children:"Camera sau s bt t ng"})]})}),u.jsx("div",{className:"absolute inset-0 border-4 border-blue-400 animate-pulse rounded-lg pointer-events-none"})]}):u.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("p",{className:"text-gray-600",children:'Nhn "Bt Camera"  bt u qut QR'})]})})}),u.jsx("div",{className:"mt-4",children:x&&A?u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:" QR Code  qut thnh cng:"}),u.jsx("p",{className:"text-green-700 font-mono text-sm break-all mb-2",children:x}),u.jsxs("p",{className:"text-green-600 font-medium",children:[" V tr: ",A.name]}),u.jsxs("p",{className:"text-green-600 text-sm",children:[" M t: ",A.description]})]}):x&&!A?u.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[u.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:" M khng hp l:"}),u.jsx("p",{className:"text-red-700 font-mono text-sm break-all",children:x}),u.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Vui lng qut li m QR hp l"})]}):u.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:u.jsx("p",{className:"text-gray-600 text-center",children:"Cha qut QR code no"})})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Chp nh selfie xc thc"}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:B,disabled:m,className:`px-4 py-2 rounded-lg font-medium transition-colors ${m?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:m?" ang khi ng...":" Bt Camera Selfie"})})]}),f?u.jsxs("div",{className:"relative",children:[m&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg z-10",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),u.jsx("p",{className:"text-sm",children:"ang khi ng camera..."})]})}),u.jsx(Kb,{isActive:f,onError:L=>p(L),onReady:()=>{console.log("Photo camera ready"),w(!1)},className:"w-full h-48 rounded-lg",facingMode:T}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{onClick:H,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium",children:" Chp nh"}),u.jsx("button",{onClick:()=>{h(!1),setTimeout(()=>{d(!0)},500)},className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 font-medium",children:" Tt Camera"})]})]}):u.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("p",{className:"text-gray-600 mb-2",children:'Nhn "Bt Camera Selfie"  chp nh'}),u.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" Lu : Camera QR s t ng tt khi bt camera selfie"}),u.jsx("p",{className:"text-xs text-blue-500",children:"  ti u cho mobile - Camera s khi ng nhanh hn"})]})}),g&&u.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"text-red-500 text-xl mr-3",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-red-700 font-medium mb-1",children:"Li Camera"}),u.jsx("p",{className:"text-red-600 text-sm",children:g}),u.jsxs("div",{className:"mt-2 text-xs text-red-500",children:[u.jsx("p",{children:" Gi :"}),u.jsxs("ul",{className:"list-disc list-inside ml-2",children:[u.jsx("li",{children:"m bo  cho php truy cp camera"}),u.jsx("li",{children:"ng cc ng dng khc ang s dng camera"}),u.jsx("li",{children:"Th refresh trang v bt li camera"}),u.jsx("li",{children:"Kim tra kt ni internet"})]})]}),u.jsx("button",{onClick:()=>{p(null),h(!1),w(!1)},className:"mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200",children:"ng thng bo"})]})]})}),b&&u.jsxs("div",{className:"mt-4",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"nh  chp:"}),u.jsx("img",{src:b,alt:"Captured",className:"w-full max-w-md h-48 object-cover rounded-lg border"}),u.jsx("div",{className:"mt-2",children:u.jsx("button",{onClick:()=>{I(null),O("photo")},className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-sm",children:" Chp li"})})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Gi bo co"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch (ty chn):"}),u.jsx("textarea",{value:y,onChange:L=>E(L.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Nhp ghi ch..."})]}),u.jsx("button",{onClick:F,disabled:j,className:`w-full px-6 py-3 rounded-lg font-medium ${j?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:j?" ang x l...":" Gi bo co"})]}),k==="success"&&u.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:"Check-in thnh cng!"}),u.jsx("p",{className:"text-green-700",children:"Bo co  c gi thnh cng"}),u.jsx("div",{className:"mt-4",children:u.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-lg",children:[u.jsx("span",{className:"animate-spin mr-2",children:""}),"ang reset form..."]})})]})})]})})},Qb=()=>{const[t]=ul(),e=bn(),{user:n,isAuthenticated:r}=Ae(),[i,o]=C.useState(!0),a=t.get("location_id"),s=t.get("location_name");return C.useEffect(()=>{(async()=>{console.log(" SmartQRPage loaded!"),console.log(" Location ID:",a,"Name:",s),console.log(" Is authenticated:",r,"User:",n);try{if(!a){console.log(" No location ID"),X.error("QR code khng hp l"),e("/");return}if(!r||!n){console.log(" Not authenticated, redirecting to login"),X.success(` Cha ng nhp! Vui lng ng nhp  chm cng ti ${s||"v tr ny"}`),e(`/?location_id=${a}&location_name=${encodeURIComponent(s||"")}`);return}console.log(" Authenticated, redirecting to QR scanner"),X.success(`  ng nhp! Chuyn n chm cng ti ${s||"v tr ny"}`),e(`/qr-scanner?location_id=${a}&location_name=${encodeURIComponent(s||"")}`)}catch(c){console.error("Error handling smart QR:",c),X.error("C li xy ra khi x l QR code"),e("/")}finally{o(!1)}})()},[a,s,r,n,e]),i?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"ang x l QR code..."})]})}):null},Yb=()=>{const[t,e]=C.useState([]),[n,r]=C.useState([]),[i,o]=C.useState(""),[a,s]=C.useState(""),[l,c]=C.useState(""),[d,f]=C.useState(""),[h,g]=C.useState(""),[p,m]=C.useState(""),[w,x]=C.useState([]),[v,y]=C.useState(!1),[E,b]=C.useState(!1),[I,T]=C.useState(null),[_,k]=C.useState(!1),[O,j]=C.useState(""),R=async()=>{var N,B,H,F;b(!0);try{const L=Date.now(),[z,G]=await Promise.all([ne.get("/patrol-records/report",{params:{user_id:i||void 0,location_id:a||void 0,start_date:l||void 0,end_date:d||void 0,record_id:h||void 0,task_id:p||void 0,_t:L}}),ne.get("/locations/").catch(re=>{var Z,ye;if(console.error("Locations API error:",re),((Z=re==null?void 0:re.response)==null?void 0:Z.status)===401||((ye=re==null?void 0:re.response)==null?void 0:ye.status)===403)return console.log("Authentication error for locations, returning empty array"),{data:[]};throw re})]);console.log("Loaded records:",z.data.length),e(z.data),r(G.data||[])}catch(L){if(console.error("Load error:",L),((N=L==null?void 0:L.response)==null?void 0:N.status)===401||((B=L==null?void 0:L.response)==null?void 0:B.status)===403){console.log("Authentication error, redirecting to login"),Ae.getState().logout(),window.location.href="/";return}X.error(((F=(H=L==null?void 0:L.response)==null?void 0:H.data)==null?void 0:F.detail)||"Ti bo co tht bi")}finally{b(!1)}};C.useEffect(()=>{R()},[]);const A=()=>{const N=new URLSearchParams;i&&N.append("user_id",i),a&&N.append("location_id",a),l&&N.append("start_date",l),d&&N.append("end_date",d),h&&N.append("record_id",h),p&&N.append("task_id",p),window.open(`https://rolanda-skinless-sue.ngrok-free.dev/api/patrol-records/report/csv?${N.toString()}`,"_blank")},D=async N=>{var B,H,F;if(confirm("Bn c chc chn mun xa bn ghi ny? Hnh ng ny khng th hon tc!")){if(v||I===N){console.log("Already deleting record",N,", ignoring request");return}y(!0),T(N);try{console.log("Deleting record:",N);const L=await ne.delete(`/patrol-records/${N}`);console.log("Delete response:",L.data),X.success("Xa bn ghi thnh cng!"),await R()}catch(L){console.error("Error deleting record:",L),console.error("Error response:",L.response),((B=L.response)==null?void 0:B.status)===404?(X.error("Bn ghi  khng tn ti hoc  b xa!"),await R()):X.error("Khng th xa bn ghi: "+(((F=(H=L.response)==null?void 0:H.data)==null?void 0:F.detail)||L.message||"Li khng xc nh"))}finally{y(!1),T(null)}}},V=async()=>{var H,F;if(w.length===0){X.error("Vui lng chn t nht mt bn ghi  xa!");return}if(!confirm(`Bn c chc chn mun xa ${w.length} bn ghi  chn? Hnh ng ny khng th hon tc!`))return;y(!0);const N=[],B=[];try{console.log("Deleting selected records:",w);for(const L of w)try{const z=await ne.delete(`/patrol-records/${L}`);console.log(`Deleted record ${L}:`,z.data),N.push(L)}catch(z){console.error(`Failed to delete record ${L}:`,z),B.push(L)}N.length>0?B.length===0?X.success(` xa thnh cng ${N.length} bn ghi!`):X.success(` xa thnh cng ${N.length} bn ghi, ${B.length} bn ghi tht bi!`):X.error("Khng th xa bt k bn ghi no!"),await R(),x([])}catch(L){console.error("Error in bulk delete:",L),X.error("Li khi xa hng lot: "+(((F=(H=L.response)==null?void 0:H.data)==null?void 0:F.detail)||L.message||"Li khng xc nh"))}finally{y(!1)}},W=N=>{x(B=>B.includes(N)?B.filter(H=>H!==N):[...B,N])},J=()=>{w.length===t.length?x([]):x(t.map(N=>N.id))};return u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Bo co tun tra"}),u.jsxs("div",{className:"card mb-6",children:[u.jsxs("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-3 mb-4",children:[u.jsx("input",{className:"input-field",placeholder:"Record ID",value:h,onChange:N=>g(N.target.value)}),u.jsx("input",{className:"input-field",placeholder:"User ID",value:i,onChange:N=>o(N.target.value)}),u.jsx("input",{className:"input-field",placeholder:"Task ID",value:p,onChange:N=>m(N.target.value)}),u.jsxs("select",{className:"input-field",value:a,onChange:N=>s(N.target.value),children:[u.jsx("option",{value:"",children:"Tt c v tr"}),n.map(N=>u.jsx("option",{value:N.id,children:N.name},N.id))]})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:[u.jsx("input",{className:"input-field",type:"date",placeholder:"T ngy",value:l,onChange:N=>c(N.target.value)}),u.jsx("input",{className:"input-field",type:"date",placeholder:"n ngy",value:d,onChange:N=>f(N.target.value)}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"btn-primary flex-1",onClick:R,disabled:E,children:E?"ang ti...":"Lc"}),u.jsx("button",{className:"btn-secondary flex-1",onClick:A,disabled:E,children:"Ti CSV"}),u.jsx("button",{className:"btn-secondary flex-1",onClick:()=>{console.log("Manual refresh triggered"),R()},disabled:E,title:"Lm mi d liu",children:""})]})]}),w.length>0&&u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{className:"btn-danger flex items-center gap-2",onClick:V,disabled:v,children:[u.jsx(Yo,{className:"w-4 h-4"}),v?"ang xa...":`Xa ${w.length} bn ghi`]})})]}),!1,u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Kt qu tm kim (",t.length," bn ghi)",E&&u.jsx("span",{className:"text-blue-500 ml-2",children:"(ang ti...)"}),v&&u.jsx("span",{className:"text-red-500 ml-2",children:"(ang xa...)"})]}),(h||i||p||a||l||d)&&u.jsx("button",{className:"btn-secondary text-sm",onClick:()=>{g(""),o(""),m(""),s(""),c(""),f(""),x([]),R()},children:"Xa b lc"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u.jsx("input",{type:"checkbox",checked:w.length===t.length&&t.length>0,onChange:J,className:"rounded border-gray-300"})}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-in"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-out"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"nh"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hnh ng"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(N=>{var B,H,F,L;return u.jsxs("tr",{className:w.includes(N.id)?"bg-blue-50":"",children:[u.jsx("td",{className:"px-4 py-2",children:u.jsx("input",{type:"checkbox",checked:w.includes(N.id),onChange:()=>W(N.id),className:"rounded border-gray-300"})}),u.jsx("td",{className:"px-4 py-2",children:N.id}),u.jsx("td",{className:"px-4 py-2",children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:((B=N.user)==null?void 0:B.full_name)||`User ${N.user_id}`}),u.jsxs("div",{className:"text-sm text-gray-500",children:["@",((H=N.user)==null?void 0:H.username)||N.user_id]})]})}),u.jsx("td",{className:"px-4 py-2",children:u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-medium",children:((F=N.task)==null?void 0:F.title)||"Check-in t do"}),u.jsxs("div",{className:"text-gray-500",children:["ID: ",N.task_id]})]})}),u.jsx("td",{className:"px-4 py-2",children:u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-medium",children:((L=N.location)==null?void 0:L.name)||`Location ${N.location_id}`}),u.jsxs("div",{className:"text-gray-500",children:["ID: ",N.location_id]})]})}),u.jsx("td",{className:"px-4 py-2",children:u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-medium",children:new Date(N.check_in_time).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"})}),u.jsx("div",{className:"text-gray-500",children:new Date(N.check_in_time).toLocaleTimeString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})}),u.jsx("td",{className:"px-4 py-2",children:N.check_out_time?u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-medium",children:new Date(N.check_out_time).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"})}),u.jsx("div",{className:"text-gray-500",children:new Date(N.check_out_time).toLocaleTimeString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}):u.jsx("span",{className:"text-gray-400",children:"-"})}),u.jsx("td",{className:"px-4 py-2",children:N.photo_url?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:No(N.photo_url),alt:"Patrol photo",className:"w-12 h-12 object-cover rounded border cursor-pointer hover:opacity-80",onClick:()=>{N.photo_url&&(j(No(N.photo_url)),k(!0))},onLoad:()=>{console.log(" Image loaded:",N.photo_url)},onError:z=>{console.error(" Image failed to load:",N.photo_url);const G=z.target;G.style.display="none"}}),u.jsx("button",{className:"btn-secondary text-xs",onClick:()=>{N.photo_url&&(j(No(N.photo_url)),k(!0))},children:"Xem nh"})]}):u.jsx("span",{className:"text-gray-400 text-sm",children:"Khng c nh"})}),u.jsx("td",{className:"px-4 py-2",children:u.jsxs("button",{onClick:()=>D(N.id),disabled:v||I===N.id,className:"flex items-center gap-1 px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:I===N.id?"ang xa...":"Xa bn ghi",children:[u.jsx(Yo,{className:"w-4 h-4"}),I===N.id?"ang xa...":"Xa"]})})]},N.id)})})]})})]}),_&&O&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-60 p-4",children:u.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[u.jsx("img",{src:O,alt:"nh chm cng y ",className:"max-w-full max-h-full object-contain rounded-lg"}),u.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},t1=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(""),[i,o]=C.useState(""),[a,s]=C.useState(""),[l,c]=C.useState("employee"),[d,f]=C.useState(""),[h,g]=C.useState(!1),[p,m]=C.useState(!1),[w,x]=C.useState(null),[v,y]=C.useState(""),[E,b]=C.useState(""),[I,T]=C.useState("employee"),[_,k]=C.useState(""),[O,j]=C.useState(""),R=async()=>{var F,L,z,G,re;try{console.log("Loading users...");const Z=await ne.get("/users/",{params:{include_inactive:p}});console.log("Users loaded successfully:",Z.data),e(Z.data)}catch(Z){console.error("Error loading users:",Z),console.error("Error response:",(F=Z==null?void 0:Z.response)==null?void 0:F.data),console.error("Error status:",(L=Z==null?void 0:Z.response)==null?void 0:L.status),((z=Z==null?void 0:Z.response)==null?void 0:z.status)===401?(X.error("Phin ng nhp  ht hn. Vui lng ng nhp li."),window.location.href="/"):X.error(((re=(G=Z==null?void 0:Z.response)==null?void 0:G.data)==null?void 0:re.detail)||"Ti danh sch ngi dng li")}};C.useEffect(()=>{R()},[p]);const A=async()=>{var F,L,z,G,re;if(!n||!i||!a||!d)return X.error("in  thng tin bt buc");g(!0);try{console.log("Creating user with data:",{username:n,email:i,full_name:a,role:l,password:"***"});const Z=await ne.post("/users/",{username:n,email:i,full_name:a,role:l,password:d});console.log("User created successfully:",Z.data),X.success("To ti khon thnh cng"),r(""),o(""),s(""),f(""),c("employee"),await R()}catch(Z){console.error("Error creating user:",Z),console.error("Error response:",(F=Z==null?void 0:Z.response)==null?void 0:F.data),console.error("Error status:",(L=Z==null?void 0:Z.response)==null?void 0:L.status),((z=Z==null?void 0:Z.response)==null?void 0:z.status)===401?(X.error("Phin ng nhp  ht hn. Vui lng ng nhp li."),window.location.href="/"):X.error(((re=(G=Z==null?void 0:Z.response)==null?void 0:G.data)==null?void 0:re.detail)||"To ti khon tht bi")}finally{g(!1)}},D=async F=>{if(H&&F.id===H.id)return X.error("Khng th t kha ti khon ca chnh bn");try{await ne.put(`/users/${F.id}`,{is_active:!F.is_active}),X.success("Cp nht trng thi thnh cng"),await R()}catch{X.error("Cp nht tht bi")}},V=F=>{x(F),y(F.full_name),b(F.email),T(F.role),k(F.phone||""),j("")},W=async()=>{var F,L;if(w)try{const z={full_name:v,email:E,role:I};_!==w.phone&&(z.phone=_),await ne.put(`/users/${w.id}`,z),X.success("Lu thay i thnh cng"),x(null),await R()}catch(z){X.error(((L=(F=z==null?void 0:z.response)==null?void 0:F.data)==null?void 0:L.detail)||"Lu tht bi")}},J=async()=>{if(!w||!O)return X.error("Nhp mt khu mi");try{await ne.put(`/users/${w.id}`,{password:O}),X.success("t li mt khu thnh cng"),j("")}catch{X.error("t li mt khu tht bi")}},N=async F=>{if(confirm(`Xa ti khon ${F.username}? Ti khon s b n khi danh sch.`))try{await ne.delete(`/users/${F.id}`),X.success("Xa ti khon thnh cng"),await R()}catch{X.error("Xa tht bi")}},B=async F=>{if(confirm(`XA HON TON ti khon ${F.username}? Hnh ng ny KHNG TH HON TC!`))try{await ne.delete(`/users/${F.id}/hard-delete`),X.success("Xa hon ton ti khon thnh cng"),await R()}catch{X.error("Xa hon ton tht bi")}},{user:H}=Ae();return u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Qun l nhn vin"}),(H==null?void 0:H.role)==="admin"&&u.jsxs("div",{className:"card mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-3",children:"To ti khon nhanh"}),u.jsxs("div",{className:"grid md:grid-cols-5 gap-3",children:[u.jsx("input",{className:"form-input",placeholder:"Username",value:n,onChange:F=>r(F.target.value)}),u.jsx("input",{className:"form-input",placeholder:"Email",value:i,onChange:F=>o(F.target.value)}),u.jsx("input",{className:"form-input",placeholder:"H tn",value:a,onChange:F=>s(F.target.value)}),u.jsxs("select",{className:"form-input",value:l,onChange:F=>c(F.target.value),children:[u.jsx("option",{value:"employee",children:"Employee"}),u.jsx("option",{value:"manager",children:"Manager"}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx("input",{className:"form-input",placeholder:"Mt khu",type:"password",value:d,onChange:F=>f(F.target.value)})]}),u.jsx("div",{className:"mt-3",children:u.jsx("button",{className:"btn-primary",onClick:A,disabled:h,children:h?"ang to...":"To ti khon"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h2",{className:"text-lg font-semibold",children:p?"Tt c ngi dng (bao gm  kha)":"Danh sch ngi dng ang hot ng"}),(H==null?void 0:H.role)==="admin"&&u.jsx("div",{className:"flex items-center space-x-2",children:u.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:p,onChange:F=>m(F.target.checked),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),u.jsx("span",{children:"Hin th ti khon  kha"})]})})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"H tn"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vai tr"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trng thi"}),u.jsx("th",{className:"px-4 py-2"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(F=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2",children:F.id}),u.jsx("td",{className:"px-4 py-2",children:F.username}),u.jsx("td",{className:"px-4 py-2",children:F.email}),u.jsx("td",{className:"px-4 py-2",children:F.full_name}),u.jsx("td",{className:"px-4 py-2 capitalize",children:F.role}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:F.is_active?"Hot ng":" kha"})}),u.jsxs("td",{className:"px-4 py-2 text-right space-x-2",children:[u.jsx("button",{className:"btn-secondary",onClick:()=>V(F),children:"Sa"}),(!H||F.id!==H.id)&&u.jsxs(u.Fragment,{children:[F.is_active?u.jsx("button",{className:"btn-danger",onClick:()=>N(F),children:"Xa/n"}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-primary",onClick:()=>D(F),children:"Khi phc"}),(H==null?void 0:H.role)==="admin"&&u.jsx("button",{className:"btn-danger",onClick:()=>B(F),children:"Xa hon ton"})]}),u.jsx("button",{className:"btn-secondary",onClick:()=>D(F),children:F.is_active?"Kha":"M kha"})]})]})]},F.id))})]})})]}),w&&u.jsxs("div",{className:"card mt-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3",children:["Sa ti khon: ",w.username]}),u.jsxs("div",{className:"grid md:grid-cols-4 gap-3 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"form-label",children:"H tn"}),u.jsx("input",{className:"form-input",placeholder:"Nhp h tn",value:v,onChange:F=>y(F.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"form-label",children:"Email"}),u.jsx("input",{className:"form-input",placeholder:"Nhp email",value:E,onChange:F=>b(F.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"form-label",children:"S in thoi"}),u.jsx("input",{className:"form-input",placeholder:"Nhp s in thoi",value:_,onChange:F=>k(F.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"form-label",children:"Vai tr"}),u.jsxs("select",{className:"form-input",value:I,onChange:F=>T(F.target.value),children:[u.jsx("option",{value:"employee",children:"Employee"}),u.jsx("option",{value:"manager",children:"Manager"}),u.jsx("option",{value:"admin",children:"Admin"})]})]})]}),u.jsxs("div",{className:"border-t pt-4 mb-4",children:[u.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"t li mt khu"}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"form-label",children:"Mt khu mi"}),u.jsx("input",{className:"form-input",type:"password",placeholder:"Nhp mt khu mi",value:O,onChange:F=>j(F.target.value)})]}),u.jsx("div",{className:"flex items-end",children:u.jsx("button",{className:"btn-primary w-full",onClick:J,disabled:!O,children:"t li mt khu"})})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"btn-primary",onClick:W,children:"Lu thay i"}),u.jsx("button",{className:"btn-secondary",onClick:()=>x(null),children:"Hy"})]})]})]})},qb="modulepreload",Zb=function(t){return"/"+t},n1={},Qm=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Zb(o),o in n1)return;n1[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":qb,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},Ym=({isOpen:t,onClose:e,onSuccess:n,mode:r,username:i,onRegisterSuccess:o})=>{const a=C.useRef(null),s=C.useRef(null),[l,c]=C.useState(null),[d,f]=C.useState(!1),[h,g]=C.useState(!1),[p,m]=C.useState(null),[w,x]=C.useState(null),[v,y]=C.useState(!1),E=C.useCallback(async()=>{try{m(null),y(!1),console.log(" Starting face auth camera..."),l&&(l.getTracks().forEach(_=>{_.stop(),console.log(" Stopped existing face auth track")}),c(null));const T=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});c(T),a.current&&(a.current.srcObject=T,await new Promise((_,k)=>{a.current&&(a.current.onloadedmetadata=()=>{a.current&&a.current.play().then(()=>{console.log(" Face auth video started playing"),y(!0),_(!0)}).catch(k)})}))}catch(T){m("Li bt camera: "+T.message),console.error(" Error starting face auth camera:",T)}},[l]),b=C.useCallback(()=>{console.log(" Stopping face auth camera..."),l&&(l.getTracks().forEach(T=>{console.log(` Stopping track: ${T.kind} - ${T.label}`),T.stop()}),c(null)),a.current&&(a.current.srcObject=null),y(!1),console.log(" Face Auth: Stop camera n gin")},[l]),I=C.useCallback(async()=>{if(!a.current||!s.current||!v){m("Camera cha sn sng");return}f(!0),m(null);try{const T=a.current,_=s.current,k=_.getContext("2d");if(!k)throw new Error("Khng th ly canvas context");_.width=T.videoWidth,_.height=T.videoHeight,k.drawImage(T,0,0,_.width,_.height);const O=await new Promise(V=>{_.toBlob(W=>{W&&V(W)},"image/jpeg",.8)}),j=await new Promise(V=>{const W=new FileReader;W.onload=()=>{const J=W.result;V(J.split(",")[1])},W.readAsDataURL(O)});g(!0);const A=await fetch(r==="register"?"/api/face-auth/register":"/api/face-auth/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({image:j,username:i})}),D=await A.json();A.ok?(x(D.message||"Thnh cng!"),n(D),r==="register"&&o&&o()):m(D.detail||"Li x l nh")}catch(T){m("Li chp nh: "+T.message),console.error(" Error capturing photo:",T)}finally{f(!1),g(!1)}},[v,r,i,n,o]);return C.useEffect(()=>(t?E():b(),()=>{b()}),[t,E,b]),t?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:r==="register"?"ng k khun mt":"Xc thc khun mt"}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:u.jsx(Zn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"relative mb-4",children:[u.jsx("video",{ref:a,className:"w-full h-64 bg-gray-200 rounded-lg",playsInline:!0,muted:!0,autoPlay:!0}),p&&u.jsx("div",{className:"absolute top-2 left-2 right-2 bg-red-500 text-white p-2 rounded text-sm",children:p}),v&&u.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white p-2 rounded text-sm",children:"Camera sn sng"}),w&&u.jsx("div",{className:"absolute top-2 left-2 right-2 bg-green-500 text-white p-2 rounded text-sm",children:w})]}),u.jsx("canvas",{ref:s,className:"hidden"}),u.jsx("div",{className:"mb-4 text-center",children:u.jsx("p",{className:"text-gray-600 text-sm",children:r==="register"?'Nhn "Chp nh"  ng k khun mt':'Nhn "Chp nh"  xc thc khun mt'})}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:I,disabled:!v||d||h,className:"flex-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white py-2 px-4 rounded-lg flex items-center justify-center space-x-2",children:d||h?u.jsxs(u.Fragment,{children:[u.jsx(W_,{className:"w-4 h-4 animate-spin"}),u.jsx("span",{children:h?"ang x l...":"ang chp..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Qo,{className:"w-4 h-4"}),u.jsx("span",{children:"Chp nh"})]})}),u.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"ng"})]})]})]})}):null},Jb=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[i,o]=C.useState(!1),[a,s]=C.useState(!1),{login:l,isLoading:c,user:d}=Ae(),f=bn(),[h]=ul(),[g,p]=C.useState(null),[m,w]=C.useState(!1),[x,v]=C.useState(null);C.useEffect(()=>{const _=h.get("ref"),k=h.get("qr"),O=h.get("location_id"),j=h.get("location_name");_?(p(_),X.success(` qut QR code: "${_}". Vui lng ng nhp  tip tc.`)):k==="quick"?(p("QR Login"),X.success("  qut QR Login! Vui lng ng nhp  tip tc.")):O&&(p(`V tr: ${j||"V tr "+O}`),X.success(`  qut QR ti ${j||"v tr ny"}! Vui lng ng nhp  chm cng.`))},[h]),C.useEffect(()=>{const _=localStorage.getItem("remembered-credentials");if(_)try{const{username:k,password:O,rememberMe:j}=JSON.parse(_);e(k||""),r(O||""),s(j||!1)}catch(k){console.error("Error loading saved credentials:",k),localStorage.removeItem("remembered-credentials")}},[]);const y=async()=>{try{const{api:_}=await Qm(()=>Promise.resolve().then(()=>Jp),void 0),O=(await _.get("/face-auth/status")).data;console.log(" Face auth status:",O),v(O)}catch(_){console.error("Error checking face auth status:",_),v({has_face_data:!0,message:"C th ng nhp bng khun mt"})}},E=async _=>{try{if(console.log(" Face login successful:",_),!_){console.error(" No user data received:",_),X.error("Khng nhn c d liu ngi dng");return}if(!_.id||!_.username||!_.role){console.error(" Missing required user fields:",_),X.error("D liu ngi dng thiu thng tin cn thit");return}if(Ae.getState().setUser(_),_.token&&(localStorage.setItem("auth_token",_.token),Ae.getState().setToken(_.token)),_.username&&localStorage.setItem("username",_.username),Ae.getState().setIsAuthenticated(!0),X.success(` Xin cho ${_.full_name||_.username}! ng nhp bng khun mt thnh cng.`),w(!1),g)g.includes("QR Login")?f("/dashboard"):(g.includes("V tr:"),f("/checkin"));else{const k=_.role;f(k==="admin"?"/admin-dashboard":k==="manager"?"/tasks":"/dashboard")}}catch(k){console.error("Error handling face login:",k),X.error("C li xy ra khi ng nhp")}};C.useEffect(()=>{y()},[]);const b=async _=>{var k,O,j;if(_.preventDefault(),console.log("=== LOGIN FORM SUBMITTED ==="),console.log("Username:",t),console.log("Password:",n),console.log("Form event:",_),!t.trim()){X.error("Vui lng nhp tn ng nhp");return}if(!n.trim()){X.error("Vui lng nhp mt khu");return}try{if(console.log("Calling login function..."),await l(t,n),console.log("Login successful!"),localStorage.setItem("username",t),console.log("Username saved for face verification:",t),a){const A={username:t,password:n,rememberMe:!0};localStorage.setItem("remembered-credentials",JSON.stringify(A)),console.log("Credentials saved"),X.success(" ng nhp thnh cng! Thng tin  c lu  ln sau.")}else localStorage.removeItem("remembered-credentials"),console.log("Credentials cleared"),X.success(" ng nhp thnh cng!");try{const A=Ae.getState().user;if(A&&A.role!=="admin"){const V=(await ne.get(`/patrol-tasks/user/${A.id}/new-tasks`)).data;V&&V.length>0&&X.success(` Bn c ${V.length} nhim v mi!`,{duration:5e3,icon:""})}}catch(A){console.error("Error checking new tasks:",A)}const R=h.get("ref");if(R)X.success(" ng nhp thnh cng! Chuyn n chm cng..."),f(`/qr-scanner?ref=${R}`);else{const A=(k=Ae.getState().user)==null?void 0:k.role;f(A==="admin"||A==="manager"?"/tasks":"/dashboard")}}catch(R){X.error(((j=(O=R.response)==null?void 0:O.data)==null?void 0:j.detail)||"ng nhp tht bi")}},I=async()=>{var _;if(!t&&!(d!=null&&d.email))return X.error("Nhp email   Tn ng nhp hoc ng nhp  ly email");try{const k=t.includes("@")?t:(d==null?void 0:d.email)||"";if(!k)return X.error("Hy nhp email  nhn m t li");const j=(_=(await ne.post("/auth/forgot-password",{email:k})).data)==null?void 0:_.token;j?X.success(" to m t li (demo): "+j):X.success("Nu email tn ti, h thng  gi lin kt t li")}catch{X.error("Khng gi c yu cu")}},T=()=>{localStorage.removeItem("remembered-credentials"),e(""),r(""),s(!1),X.success(" xa thng tin ng nhp  lu")};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-red-500 rounded-xl flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-xl",children:"MT"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MANHTOAN"}),u.jsx("p",{className:"text-sm text-gray-600",children:"PLASTIC"})]})]})}),u.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"H thng Tun tra"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"ng nhp  tip tc"}),g&&u.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-sm font-medium text-green-800",children:"  qut QR Code"}),u.jsxs("p",{className:"text-xs text-green-600 mt-1",children:['Ni dung: "',g,'"']})]})})})]}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"form-label",children:"Tn ng nhp"}),u.jsxs("div",{className:"relative",children:[u.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{id:"username",name:"username",type:"text",className:"input-field pl-10",placeholder:"Nhp tn ng nhp",value:t,onChange:_=>e(_.target.value)})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"form-label",children:"Mt khu"}),u.jsxs("div",{className:"relative",children:[u.jsx(G_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{id:"password",name:"password",type:i?"text":"password",className:"input-field pl-10 pr-10",placeholder:"Nhp mt khu",value:n,onChange:_=>r(_.target.value)}),u.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>o(!i),children:i?u.jsx(z_,{className:"h-5 w-5"}):u.jsx(em,{className:"h-5 w-5"})})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:_=>s(_.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded cursor-pointer"}),u.jsx("label",{htmlFor:"remember-me",className:"text-sm text-gray-700 cursor-pointer select-none",children:" Ghi nh mt khu"})]}),u.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors",onClick:I,children:"Qun mt khu?"})]}),localStorage.getItem("remembered-credentials")&&u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-green-600",children:""}),u.jsx("span",{className:"text-sm text-green-800 font-medium",children:"Thng tin ng nhp  c lu"})]}),u.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-800 hover:underline font-medium",onClick:T,children:" Xa"})]})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{type:"submit",disabled:c,className:"btn-primary flex-1 flex justify-center items-center",children:c?"ang ng nhp...":"ng nhp"}),u.jsx("button",{type:"button",onClick:()=>w(!0),disabled:c,className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg flex items-center justify-center",title:"ng nhp bng khun mt",children:u.jsx(Qo,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:" Hoc bm nt camera  ng nhp bng khun mt"})})]})]}),u.jsx(Ym,{isOpen:m,onClose:()=>w(!1),onSuccess:E,onRegisterSuccess:()=>{},mode:"verify"})]})})},e8=({isActive:t,onError:e,onReady:n,className:r="",facingMode:i="user"})=>{const o=C.useRef(null),a=C.useRef(null),[s,l]=C.useState(null),[c,d]=C.useState(!1),f=C.useCallback(()=>{a.current&&(a.current.getTracks().forEach(g=>g.stop()),a.current=null),o.current&&(o.current.srcObject=null),l(null),d(!1)},[]),h=C.useCallback(async()=>{if(t){a.current&&(console.log(" Stopping existing stream before switching facingMode"),a.current.getTracks().forEach(g=>{g.stop(),console.log(" Track stopped:",g.kind,g.label)}),a.current=null),o.current&&(o.current.srcObject=null),await new Promise(g=>setTimeout(g,300)),d(!0),l(null);try{const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:i},audio:!1});console.log(" New stream obtained for facingMode:",i),o.current&&(a.current=g,o.current.srcObject=g,o.current.addEventListener("loadedmetadata",()=>{var p;(p=o.current)==null||p.play().then(()=>{console.log(" Camera ready for facingMode:",i),d(!1),n&&n()}).catch(()=>{l("Khng th pht video"),d(!1),e&&e("Khng th pht video")})},{once:!0}))}catch(g){console.error(" Camera error for facingMode:",i,g);let p="Khng th khi ng camera";g.name==="NotReadableError"&&(p="Camera ang c s dng. Vui lng ng ng dng khc v th li"),l(p),d(!1),e&&e(p)}}},[t,i,e,n]);return C.useEffect(()=>(t?h():f(),()=>{f()}),[t,h,f]),C.useEffect(()=>{t&&h()},[i,h]),s?u.jsx("div",{className:`flex items-center justify-center w-full h-full bg-gray-900 text-white rounded-lg ${r}`,children:u.jsxs("div",{className:"text-center p-4",children:[u.jsx("p",{className:"text-red-500 mb-2 text-4xl",children:""}),u.jsx("p",{className:"text-sm font-medium mb-2",children:s}),u.jsx("button",{onClick:()=>{l(null),t&&h()},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:" Th li"})]})}):u.jsxs("div",{className:`relative w-full h-full bg-black rounded-lg overflow-hidden ${r}`,children:[c&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75 text-white z-10",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),u.jsx("p",{className:"text-sm",children:"ang khi ng camera..."})]})}),u.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})]})},t8=()=>{var R;const[t]=ul(),e=bn();Ae();const[n,r]=C.useState(null),[i,o]=C.useState(null),[a,s]=C.useState(!1),[l,c]=C.useState(""),[d,f]=C.useState(null),[h,g]=C.useState(null),[p,m]=C.useState(!1),[w,x]=C.useState(!1),[v,y]=C.useState(null),[E,b]=C.useState("user"),I=C.useRef(null);C.useEffect(()=>{const A=t.get("task_id");A&&(r(A),T(A))},[t]);const T=async A=>{try{s(!0);const D=await ne.get(`/patrol-tasks/${A}`);o(D.data)}catch(D){console.error("Error fetching task info:",D),X.error("Khng th ti thng tin nhim v")}finally{s(!1)}},_=async()=>{if(!n||!d){X.error("Vui lng chp nh trc khi check-in");return}try{s(!0);const A=new FormData;A.append("task_id",n),A.append("photo",d),A.append("notes",l),await ne.post("/patrol-records/checkin",A,{headers:{"Content-Type":"multipart/form-data"}}),x(!0),X.success("Check-in thnh cng!")}catch(A){console.error("Check-in error:",A),X.error("Li khi check-in")}finally{s(!1)}},k=()=>{const A=I.current;if(!A){X.error("Khng tm thy video element");return}const D=document.createElement("canvas"),V=D.getContext("2d");if(!V){X.error("Khng th to canvas context");return}D.width=A.videoWidth,D.height=A.videoHeight,V.drawImage(A,0,0,D.width,D.height),D.toBlob(W=>{if(W){const J=new File([W],"checkin-photo.jpg",{type:"image/jpeg"});f(J),g(URL.createObjectURL(W)),X.success(" chp nh thnh cng!")}},"image/jpeg",.9)},O=()=>{m(!p),p&&y(null)},j=()=>{b(A=>A==="user"?"environment":"user")};return a&&!i?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"ang ti thng tin nhim v..."})]})}):i?w?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold text-green-600 mb-4",children:"Check-in thnh cng!"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Bn  hon thnh nhim v ny."}),u.jsx("button",{onClick:()=>e("/dashboard"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Quay li Dashboard"})]})}):u.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Check-in Nhim v"}),u.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[u.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:i.title}),u.jsx("p",{className:"text-blue-600",children:i.description}),u.jsxs("p",{className:"text-sm text-blue-500 mt-2",children:["V tr: ",((R=i.location)==null?void 0:R.name)||"Khng xc nh"]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Chp nh xc thc"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:j,className:"px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600",children:E==="user"?" Selfie":" Back"}),u.jsx("button",{onClick:O,className:`px-4 py-2 rounded-lg font-medium ${p?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:p?" Tt Camera":" Bt Camera"})]})]}),p?u.jsxs("div",{className:"relative",children:[u.jsx(e8,{isActive:p,onError:A=>{y(A),console.error("Camera error:",A)},onReady:()=>{y(null),console.log("Camera ready")},className:"w-full h-64 rounded-lg",facingMode:E}),u.jsx("div",{className:"mt-4 flex gap-2",children:u.jsx("button",{onClick:k,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium",children:" Chp nh"})})]}):u.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("p",{className:"text-gray-600",children:'Nhn "Bt Camera"  chp nh'})]})}),v&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700",children:v})}),h&&u.jsxs("div",{className:"mt-4",children:[u.jsx("h4",{className:"font-semibold mb-2",children:"nh  chp:"}),u.jsx("img",{src:h,alt:"Captured",className:"w-full max-w-md h-48 object-cover rounded-lg border"})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch (ty chn):"}),u.jsx("textarea",{value:l,onChange:A=>c(A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Nhp ghi ch..."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>e("/dashboard"),className:"flex-1 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 font-medium",children:"Hy"}),u.jsx("button",{onClick:_,disabled:a||!d,className:`flex-1 px-6 py-3 rounded-lg font-medium ${a||!d?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:a?" ang x l...":" Check-in"})]})]})})}):u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Khng tm thy nhim v"}),u.jsx("button",{onClick:()=>e("/dashboard"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Quay li Dashboard"})]})})},qm=({steps:t,title:e="FlowStep",className:n=""})=>{const r=o=>{if(!o)return"";try{const a=new Date(o);return isNaN(a.getTime())?"":a.toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},i=(o,a)=>o.completed?{circleClass:"bg-green-500 text-white",lineClass:"bg-green-500",icon:u.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8.486 8.486a1 1 0 01-1.414 0L3.293 12.179a1 1 0 011.414-1.414L8 13.059l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}:o.isOverdue?{circleClass:"bg-red-500 text-white",lineClass:"bg-red-500",icon:u.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}:o.isActive?{circleClass:"bg-yellow-500 text-white animate-pulse",lineClass:"bg-yellow-500",icon:u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}:{circleClass:"bg-gray-400 text-white",lineClass:"bg-gray-400",icon:u.jsx("span",{className:"text-sm font-medium",children:a+1})};return u.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-4 sm:p-6 ${n}`,children:[e&&u.jsxs("div",{className:"mb-4 sm:mb-6",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:e}),t.length>0&&t[0].taskCreatedAt&&u.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[" Nhim v c giao: ",r(t[0].taskCreatedAt)]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute top-6 left-6 sm:left-8 right-6 sm:right-8 h-0.5 bg-gray-200"}),u.jsx("div",{className:"absolute top-6 left-6 sm:left-8 h-0.5 bg-green-500 transition-all duration-500",style:{width:t.length>1?`calc(${(t.filter(o=>o.completed).length-1)/(t.length-1)*100}% - ${t.length>1?"12px":"0px"})`:"0%"}}),u.jsx("div",{className:"flex justify-between items-start overflow-x-auto pb-2",children:t.map((o,a)=>{const s=i(o,a);return t.length-1,u.jsxs("div",{className:"flex flex-col items-center relative z-10 min-w-0 flex-1 px-1",children:[u.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center ${s.circleClass} shadow-lg flex-shrink-0 ${o.onStepClick?"cursor-pointer hover:scale-110 transition-transform":"cursor-not-allowed opacity-75"}`,onClick:()=>{console.log("Step clicked:",o),console.log("onStepClick function:",o.onStepClick),o.onStepClick?o.onStepClick(o):console.log("No onStepClick function available")},title:o.onStepClick?o.completed?"Nhn  xem chi tit chm cng":"Nhn  xem thng tin v tr":"Cha n gi chm cng",children:s.icon}),u.jsxs("div",{className:"mt-2 sm:mt-3 text-center min-w-0",children:[u.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900 break-words leading-tight",children:o.name}),o.scheduledTime&&o.scheduledTime!=="Cha xc nh"&&u.jsx("div",{className:"mt-1 text-xs text-green-600 font-medium",children:o.scheduledTime}),o.completed&&o.completedAt&&u.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[u.jsxs("div",{className:"break-words",children:[" ",new Date(o.completedAt).toLocaleTimeString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",hour:"2-digit",minute:"2-digit"})]}),o.completedBy&&u.jsx("div",{className:"font-medium break-words",children:o.completedBy}),o.taskCreatedAt&&u.jsxs("div",{className:"text-xs text-blue-600 font-medium mt-1",children:[" ",new Date(o.taskCreatedAt).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",day:"2-digit",month:"2-digit",year:"numeric"})]})]}),o.statusText&&!o.completed&&u.jsx("div",{className:`mt-1 text-xs font-medium ${o.statusColor==="red"?"text-red-600":o.statusColor==="yellow"?"text-yellow-600":o.statusColor==="green"?"text-green-600":"text-gray-600"}`,children:o.statusText})]})]},o.id)})})]})]})},Zm=({isOpen:t,onClose:e,record:n})=>{var s,l,c,d,f,h,g,p,m,w,x,v,y,E,b,I,T,_,k,O,j,R,A,D,V,W;const[r,i]=C.useState(!1);if(!t||!n)return null;console.log(" ===== CHECKIN DETAIL MODAL OPENED ====="),console.log(" CheckinDetailModal opened with record:",n),console.log(" Record photo_url:",n.photo_url),console.log(" Record check_in_time:",n.check_in_time),console.log(" Record keys:",Object.keys(n)),console.log(" ==========================================="),console.log(" HOT RELOAD TEST - CheckinDetailModal updated!"),console.log(" TEST: record.photo_url =",n.photo_url),console.log(" TEST: typeof record.photo_url =",typeof n.photo_url),console.log(" CheckinDetailModal - Record:",{id:n.id,check_in_time:n.check_in_time,photo_url:n.photo_url,task_title:n.task_title,location_name:n.location_name});const o=J=>{try{if(!J)return"-";const N=new Date(J);return isNaN(N.getTime())?"-":N.toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return"-"}},a=(J,N)=>!J||!N?"Khng c thng tin GPS":`${J.toFixed(6)}, ${N.toFixed(6)}`;return u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Chi tit chm cng"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:((s=n.user_name)==null?void 0:s.charAt(0))||"U"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.user_name}),u.jsxs("p",{className:"text-gray-600",children:["@",n.user_username||((l=n.user_name)==null?void 0:l.toLowerCase())]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Thng tin nhim v"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Nhim v:"})," ",n.task_title]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"V tr:"})," ",n.location_name]})]})]}),u.jsxs("div",{className:`rounded-lg p-4 ${n.check_in_time&&n.check_in_time.trim()?(c=n.notes)!=null&&c.includes("ng gi")?"bg-green-50":(d=n.notes)!=null&&d.includes("qu sm")?"bg-blue-50":(f=n.notes)!=null&&f.includes("qu mun")?"bg-red-50":"bg-orange-50":"bg-red-50"}`,children:[u.jsx("h4",{className:`font-medium mb-2 ${n.check_in_time&&n.check_in_time.trim()?(h=n.notes)!=null&&h.includes("ng gi")?"text-green-900":(g=n.notes)!=null&&g.includes("qu sm")?"text-blue-900":(p=n.notes)!=null&&p.includes("qu mun")?"text-red-900":"text-orange-900":"text-red-900"}`,children:n.check_in_time&&n.check_in_time.trim()?"Thi gian chm cng":"Trng thi chm cng"}),u.jsx("p",{className:`text-lg font-semibold ${n.check_in_time&&n.check_in_time.trim()?(m=n.notes)!=null&&m.includes("ng gi")?"text-green-800":(w=n.notes)!=null&&w.includes("qu sm")?"text-blue-800":(x=n.notes)!=null&&x.includes("qu mun")?"text-red-800":"text-orange-800":"text-red-800"}`,children:n.check_in_time&&n.check_in_time.trim()?o(n.check_in_time):"Cha chm cng"}),n.check_in_time&&n.check_in_time.trim()&&u.jsx("p",{className:`text-sm mt-1 ${(v=n.notes)!=null&&v.includes(" c chm cng")?"text-green-700":(y=n.notes)!=null&&y.includes("qu sm")?"text-blue-700":(E=n.notes)!=null&&E.includes("qu mun")?"text-red-700":"text-green-700"}`,children:(b=n.notes)!=null&&b.includes(" c chm cng")?"  chm cng":(I=n.notes)!=null&&I.includes("qu sm")?" Chm cng qu sm":(T=n.notes)!=null&&T.includes("qu mun")?" Chm cng qu mun":"  chm cng"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"nh chm cng"}),n.photo_url?u.jsxs("div",{className:"relative",children:[(()=>{const J=No(n.photo_url);return console.log(" ===== IMAGE LOADING START ====="),console.log(" Loading image with URL:",J),console.log(" Full imageUrl length:",J.length),console.log(" record.photo_url:",n.photo_url),console.log(" ================================"),u.jsx("img",{src:J,alt:"nh chm cng",className:"w-full h-64 object-cover rounded-lg border border-gray-200",onLoad:N=>{console.log(" Image loaded successfully:",J);const B=N.target;B.style.display="block";const H=B.nextElementSibling;H&&(H.style.display="none")},onError:N=>{console.error(" ===== IMAGE LOAD ERROR ====="),console.error(" Li ti nh:",N),console.error(" URL nh:",J),console.error(" record.photo_url gc:",n.photo_url),console.error(" =============================");const B=N.target;B.style.display="none";const H=B.nextElementSibling;H&&(H.style.display="flex")}})})(),u.jsxs("div",{className:"w-full h-64 bg-gray-100 rounded-lg border border-gray-200 flex flex-col items-center justify-center text-gray-500",style:{display:"none"},children:[u.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("p",{className:"text-sm",children:"Khng th ti nh"}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Vui lng th li sau"})]}),u.jsx("button",{onClick:()=>i(!0),className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors",title:"Xem nh y ",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}):u.jsxs("div",{className:`w-full h-64 rounded-lg flex flex-col items-center justify-center ${n.check_in_time&&n.check_in_time.trim()?(_=n.notes)!=null&&_.includes(" c chm cng")?"bg-green-100 text-green-700":(k=n.notes)!=null&&k.includes("qu sm")?"bg-blue-100 text-blue-700":(O=n.notes)!=null&&O.includes("qu mun")?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700":"bg-red-100 text-red-600"}`,children:[(()=>(console.log(" No photo_url found in record:",n),console.log(" Record keys:",Object.keys(n)),null))(),u.jsx("div",{className:"flex items-center justify-center mb-2",children:n.check_in_time&&n.check_in_time.trim()?(j=n.notes)!=null&&j.includes(" c chm cng")?u.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(R=n.notes)!=null&&R.includes("qu sm")?u.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):(A=n.notes)!=null&&A.includes("qu mun")?u.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):u.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):u.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("p",{className:"font-medium text-center",children:n.check_in_time&&n.check_in_time.trim()?(D=n.notes)!=null&&D.includes(" c chm cng")?" chm cng nhng khng c nh":(V=n.notes)!=null&&V.includes("qu sm")?" chm cng qu sm nhng khng c nh":(W=n.notes)!=null&&W.includes("qu mun")?" chm cng qu mun nhng khng c nh":" chm cng nhng khng c nh":"Cha chm cng"}),u.jsx("p",{className:"text-sm mt-1 text-center px-4",children:n.check_in_time&&n.check_in_time.trim()?"C th do li upload nh hoc khng chp nh":"Cn qut QR v chp nh  hon thnh"})]})]}),n.notes&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ghi ch"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsx("p",{className:"text-gray-700",children:n.notes})})]}),n.gps_latitude&&n.gps_longitude&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"V tr GPS"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-700",children:a(n.gps_latitude,n.gps_longitude)}),u.jsx("a",{href:`https://maps.google.com/?q=${n.gps_latitude},${n.gps_longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm mt-2 inline-block",children:"Xem trn Google Maps "})]})]})]}),u.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:u.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"ng"})})]}),r&&n.photo_url&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-60 p-4",children:u.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[u.jsx("img",{src:No(n.photo_url),alt:"nh chm cng y ",className:"max-w-full max-h-full object-contain rounded-lg"}),u.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},n8=()=>{const{user:t}=Ae(),[e,n]=C.useState([]),[r,i]=C.useState([]),[o,a]=C.useState(!0),[s,l]=C.useState(""),[c,d]=C.useState(new Date),[f,h]=C.useState([]);C.useState(!1);const[g,p]=C.useState(null),[m,w]=C.useState(!1);C.useEffect(()=>{if((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager"){x(),v();const _=setInterval(()=>{x(!0),v()},5e3),k=O=>{console.log(" ADMIN: Checkin success event received:",O.detail),console.log(" ADMIN: Event detail:",JSON.stringify(O.detail,null,2)),Promise.all([x(!0),v()]).then(()=>{console.log(" ADMIN: Data refreshed successfully after checkin"),X.success("  cp nht d liu sau khi chm cng!")}).catch(j=>{console.error(" ADMIN: Error refreshing data:",j),X.error(" Li cp nht d liu")})};return window.addEventListener("checkin-success",k),()=>{clearInterval(_),window.removeEventListener("checkin-success",k)}}},[t]);const x=async(_=!1)=>{var k,O;try{const R=(await ne.get("/checkin/admin/all-records")).data;if(console.log(" ADMIN: Total records:",R.length),console.log(" ADMIN: Latest records:",R.slice(0,3)),console.log(" ADMIN: All records:",R),!_&&e.length>0){const A=R.filter(D=>!e.some(V=>V.id===D.id));A.length>0&&(h(A),A.forEach(D=>{X.success(` ${D.user_name} va hon thnh nhim v "${D.task_title}"!`,{duration:5e3})}))}n(R),d(new Date)}catch(j){console.error("Error fetching checkin records:",j),l(((O=(k=j.response)==null?void 0:k.data)==null?void 0:O.detail)||"C li xy ra")}finally{a(!1)}},v=async()=>{var _,k;try{console.log(" ADMIN DASHBOARD: Fetching tasks...");const j=(await ne.get("/patrol-tasks/")).data;console.log(" ADMIN DASHBOARD: Fetched tasks:",j),j.forEach((R,A)=>{console.log(` ADMIN DASHBOARD: Task ${A+1}:`,{id:R.id,title:R.title,stops:R.stops,stopsLength:R.stops?R.stops.length:0})}),i(j),console.log(" Tasks fetched:",j.length),console.log(" Task details:",j.map(R=>{var A;return{id:R.id,title:R.title,stops:((A=R.stops)==null?void 0:A.length)||0}})),console.log(" All tasks:",j)}catch(O){console.error(" ADMIN DASHBOARD: Error fetching tasks:",O),console.error(" ADMIN DASHBOARD: Error response:",O.response),X.error("Khng th ti danh sch nhim v: "+(((k=(_=O.response)==null?void 0:_.data)==null?void 0:k.detail)||O.message))}},y=async _=>{var k,O;if(confirm("Bn c chc chn mun xa nhim v ny?"))try{await ne.delete(`/patrol-tasks/${_}`),X.success("Xa nhim v thnh cng!"),v()}catch(j){console.error("Error deleting task:",j),X.error("Khng th xa nhim v: "+(((O=(k=j.response)==null?void 0:k.data)==null?void 0:O.detail)||"Li khng xc nh"))}},E=(_,k,O,j)=>{console.log(" ===== FINDING CHECKIN RECORD ====="),console.log(" Looking for task:",_,"location:",k),console.log(" Total records available:",e.length);const R=j?new Date(j).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];console.log(" Task date:",R);const A=e.filter(D=>{if(!D.task_id||!D.location_id||!D.check_in_time)return!1;const V=new Date(D.check_in_time).toISOString().split("T")[0],W=V===R,J=D.task_id===_&&D.location_id===k;return console.log(` Record ${D.id}: task_id=${D.task_id}, location_id=${D.location_id}, date=${V}, isSameDate=${W}, isMatching=${J}`),J&&W});if(console.log(" Matching records count (today only):",A.length),console.log("Available records:",e.map(D=>({id:D.id,task_id:D.task_id,location_id:D.location_id,check_in_time:D.check_in_time,check_out_time:D.check_out_time,photo_url:D.photo_url,date:D.check_in_time?new Date(D.check_in_time).toISOString().split("T")[0]:"no-date"}))),A.length>0){const D=A.sort((V,W)=>new Date(W.check_in_time||0).getTime()-new Date(V.check_in_time||0).getTime())[0];return console.log(" ===== FOUND CHECKIN RECORD ====="),console.log(" Record ID:",D.id),console.log(" Task ID:",D.task_id),console.log(" Location ID:",D.location_id),console.log(" Check-in time:",D.check_in_time),console.log(" Photo URL length:",D.photo_url?D.photo_url.length:"NO_PHOTO"),console.log(" ================================"),D}return console.log(" ===== NO CHECKIN RECORD FOUND ====="),console.log(" No matching records for task:",_,"location:",k,"taskDate:",R),console.log(" ==================================="),null},b=async(_,k)=>{try{await ne.put(`/patrol-tasks/${_}`,{status:k}),console.log(` Updated task ${_} status to ${k}`)}catch(O){console.error(` Error updating task ${_} status:`,O)}},I=(_,k)=>{if(!_||!k)return{status:"pending",color:"gray",text:"Cha xc nh"};const O=E(k.id,_.location_id,_.scheduled_time,k.created_at),j=new Date,R=new Date(j.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),A=R.toISOString().split("T")[0],D=R.getHours()*60+R.getMinutes();let V=null;if(_.scheduled_time&&_.scheduled_time!=="Cha xc nh"){const[H,F]=_.scheduled_time.split(":").map(Number);V=H*60+F}else try{const H=JSON.parse(k.schedule_week);if(H.startTime){const F=parseInt(H.startTime.split(":")[0]),L=parseInt(H.startTime.split(":")[1]);V=(F+_.sequence)*60+L}}catch{}let W=null;try{k.created_at&&(W=new Date(k.created_at).toISOString().split("T")[0])}catch(H){console.log("Error parsing task date:",H)}if(!V)return{status:"pending",color:"gray",text:"Cha xc nh"};const J=W===A,N=W&&W<A,B=W&&W>A;if(O&&O.check_in_time)return console.log(` Location ${_.location_id} has checkin record - showing as completed`),{status:"completed",color:"green",text:" chm cng"};if(J&&!O){const H=_.scheduled_time;if(console.log(` STOP ${_.location_id}: scheduled_time=${H}, type=${typeof H}`),H&&typeof H=="string"){const F=D,L=parseInt(H.split(":")[0]),z=parseInt(H.split(":")[1]),G=L*60+z,re=F>G+15;if(console.log(` OVERDUE CHECK: Stop ${_.location_id}`,{scheduledTime:H,currentTimeInMinutes:F,scheduledTimeInMinutes:G,timeDiff:F-G,isOverdue:re}),re)return console.log(` STOP ${_.location_id} IS OVERDUE!`),{status:"overdue",color:"red",text:"Qu hn"}}}return _.completed?(console.log(` Task ${k.id} stop ${_.location_id} is completed from stops:`,_),k.status!=="completed"&&(console.log(` Updating task ${k.id} status to completed`),b(k.id,"completed")),{status:"completed",color:"green",text:" chm cng"}):N?O&&O.check_in_time?(console.log(" PAST TASK COMPLETED: Task hm qua  chm cng"),{status:"completed",color:"green",text:" chm cng"}):(console.log(" PAST TASK OVERDUE: Task hm qua cha chm cng"),{status:"overdue",color:"red",text:"Qu hn (cha chm cng)"}):B?(console.log(" FUTURE TASK: Cha n ngy"),{status:"pending",color:"gray",text:"Cha n ngy"}):J?(console.log(" PENDING: Waiting for checkin"),{status:"pending",color:"blue",text:"Ch chm cng"}):(console.log(" UNKNOWN: Cannot determine task date"),{status:"pending",color:"gray",text:"Cha xc nh"})},T=async _=>{var k;if(console.log(" ADMIN: handleStepClick called with step:",_),console.log(" ADMIN: step.taskId:",_.taskId),console.log(" ADMIN: step.locationId:",_.locationId),console.log(" ADMIN: step.scheduledTime:",_.scheduledTime),_.taskId&&_.locationId){const O=r.find(R=>R.id===_.taskId);let j=E(_.taskId,_.locationId,_.scheduledTime,O==null?void 0:O.created_at);if(console.log(" ADMIN: Found record:",j),console.log(" ADMIN: Record photo_url:",j==null?void 0:j.photo_url),!j){console.log(" ADMIN: Record not found in local state, fetching from API...");try{const A=(await ne.get("/checkin/admin/all-records")).data;console.log(" ADMIN: All records from API:",A.length);const D=A.filter(V=>{if(!V.location_id||!V.check_in_time||V.task_id&&V.task_id!==_.taskId)return!1;if(!V.task_id){const W=new Date(V.check_in_time).toISOString().split("T")[0],J=O!=null&&O.created_at?new Date(O.created_at).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return W===J&&V.location_id===_.locationId}return V.location_id===_.locationId});if(console.log(" ADMIN: Location records found:",D.length),console.log(" ADMIN: Location records:",D),D.length>0){const V=_.scheduledTime;if(V&&V!=="Cha xc nh"){const W=parseInt(V.split(":")[0]),J=parseInt(V.split(":")[1]),N=W*60+J;if(console.log(" ADMIN: Finding closest record to scheduled time:",N),console.log(" ADMIN: Available records:",D.map(B=>({id:B.id,check_in_time:B.check_in_time,time_in_minutes:new Date(B.check_in_time).getHours()*60+new Date(B.check_in_time).getMinutes(),diff:Math.abs(new Date(B.check_in_time).getHours()*60+new Date(B.check_in_time).getMinutes()-N)}))),j=D.reduce((B,H)=>{if(!H.check_in_time)return B;const F=new Date(H.check_in_time),L=F.getHours()*60+F.getMinutes(),z=Math.abs(L-N),G=B?Math.abs(new Date(B.check_in_time).getHours()*60+new Date(B.check_in_time).getMinutes()-N):1/0;return console.log(" ADMIN: Comparing:",{current:{id:H.id,time:H.check_in_time,diff:z},closest:B?{id:B.id,time:B.check_in_time,diff:G}:null,winner:z<G?"current":"closest"}),z<G?H:B},null),console.log(" ADMIN: Selected record:",j?{id:j.id,time:j.check_in_time}:null),j&&j.check_in_time){const B=new Date(j.check_in_time),H=B.getHours(),F=B.getMinutes(),z=H*60+F-N;console.log(" ADMIN: Time diff:",z,"minutes"),(z<0||z>15)&&(console.log(" ADMIN: Record rejected due to time diff:",z),j=null)}}}console.log(" ADMIN: Found record from API:",j),console.log(" ADMIN: Final record photo_url:",j==null?void 0:j.photo_url)}catch(R){console.error("Error fetching records from API:",R)}}if(console.log(" ADMIN: Final record to show in modal:",j),console.log(" ADMIN: Final record photo_url:",j==null?void 0:j.photo_url),j){const R=r.find(V=>V.id===_.taskId),A=(k=R==null?void 0:R.stops)==null?void 0:k.find(V=>V.location_id===_.locationId);console.log(` Showing checkin record for Stop ${A==null?void 0:A.sequence} (${A==null?void 0:A.scheduled_time}) - Has checkin record`),console.log(` STOP DETAILS: location_id=${_.locationId}, scheduled_time=${A==null?void 0:A.scheduled_time}, checkin_time=${j.check_in_time}`);const D={...j,notes:`V tr "${_.name}"  c chm cng. Thi gian: ${j.check_in_time?new Date(j.check_in_time).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"}):"Cha xc nh"}. Trng thi:  hon thnh`};console.log(" ADMIN: Enhanced record photo_url:",D.photo_url),console.log(" ADMIN: Enhanced record:",D),p(D),w(!0)}else{const R=r.find(D=>D.id===_.taskId);console.log("Found task:",R);const A={id:0,user_name:(R==null?void 0:R.assigned_user_name)||"Nhn vin",user_username:"user",task_title:(R==null?void 0:R.title)||"Nhim v",location_name:_.name,check_in_time:null,check_out_time:null,photo_url:null,checkout_photo_url:null,notes:`V tr "${_.name}" cha c chm cng. Thi gian d kin: ${_.scheduledTime||"Cha xc nh"}. Trng thi: ${_.statusText||"Cha xc nh"}`,gps_latitude:void 0,gps_longitude:void 0};console.log("Showing mock record:",A),p(A),w(!0)}}else console.log("Missing taskId or locationId:",{taskId:_.taskId,locationId:_.locationId})};return(t==null?void 0:t.role)!=="admin"&&(t==null?void 0:t.role)!=="manager"?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Khng c quyn truy cp"}),u.jsx("p",{className:"text-gray-600",children:"Ch admin v manager mi c truy cp trang ny"})]})}):o?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"ang ti d liu..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:[u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Admin Dashboard"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Qun l chm cng v tun tra real-time"})]}),u.jsx("div",{className:"text-right",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>{console.log(" FORCE REFRESH: Clearing cache and reloading data..."),n([]),i([]),setTimeout(()=>{x(!0),v()},100)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:" Force Refresh"}),u.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),x(),v(),X.success(" lm mi d liu")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:" Lm mi"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-gray-500",children:"Cp nht ln cui:"}),u.jsx("div",{className:"text-sm font-medium text-gray-700",children:c?c.toLocaleTimeString("vi-VN"):"-"}),u.jsxs("div",{className:"flex items-center mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),u.jsx("span",{className:"text-xs text-green-600",children:"Auto-refresh: 10s"})]})]})]})})]})}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[u.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng chm cng"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),u.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hon thnh"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(_=>_.check_out_time).length})]})]})}),u.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ang lm"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(_=>!_.check_out_time).length})]})]})}),u.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hm nay"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(_=>{const k=new Date().toDateString();return _.check_in_time&&new Date(_.check_in_time).toDateString()===k}).length})]})]})})]}),s&&u.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:s}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden",children:[u.jsx("div",{className:"px-6 py-6 bg-gradient-to-r from-green-600 to-blue-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold",children:" Tin trnh nhim v tun tra"}),u.jsx("p",{className:"text-green-100 mt-1",children:"Theo di tin trnh thc hin nhim v ca nhn vin theo thi gian thc"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-green-100",children:"Tng nhim v"}),u.jsx("div",{className:"text-2xl font-bold",children:r.length})]})]})}),u.jsx("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:r.length>0?r.map(_=>{var j,R;const O=(A=>{if(console.log(` TASK ${A.id} (${A.title}): Checking overall status...`),!A.stops||A.stops.length===0)return console.log(` TASK ${A.id}: No stops found`),{color:"gray",text:"Cha c stops"};const D=A.stops.map(N=>{const B=I(N,A);return console.log(` STOP ${N.location_id} (${N.scheduled_time}): ${B.status} - ${B.text}`),B});return D.every(N=>N.status==="completed")?(console.log(` TASK ${A.id}: ALL STOPS COMPLETED - showing " chm cng"`),{color:"green",text:" chm cng"}):D.some(N=>N.status==="overdue")?(console.log(` TASK ${A.id}: HAS OVERDUE STOPS - showing "Qu hn"`),{color:"red",text:"Qu hn (cha chm cng)"}):D.some(N=>N.status==="completed")?(console.log(` TASK ${A.id}: SOME STOPS COMPLETED - showing "ang thc hin"`),{color:"blue",text:"ang thc hin"}):(console.log(` TASK ${A.id}: DEFAULT - showing "Ch thc hin"`),{color:"yellow",text:"Ch thc hin"})})(_);return u.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow ${O.color==="red"?"border-red-300 bg-red-50":O.color==="green"?"border-green-300 bg-green-50":O.color==="blue"?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:_.title}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 text-xs sm:text-sm text-gray-600",children:[u.jsxs("span",{children:["Nhn vin: ",((j=_.assigned_user)==null?void 0:j.full_name)||((R=_.assigned_user)==null?void 0:R.username)||"Cha giao"]}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsxs("span",{children:["Lch: ",(()=>{try{const A=JSON.parse(_.schedule_week);return`${new Date(A.date).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"})} | ${A.startTime} - ${A.endTime}`}catch{return _.schedule_week}})()]}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsxs("span",{className:"flex items-center",children:["Trng thi:",u.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${O.color==="red"?"bg-red-100 text-red-800":O.color==="green"?"bg-green-100 text-green-800":O.color==="blue"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:O.text})]})]})]}),u.jsx("button",{onClick:()=>y(_.id),className:"text-red-600 hover:text-red-800 text-sm self-start sm:self-auto",children:"Xa"})]}),_.stops&&_.stops.length>0?u.jsx(qm,{steps:_.stops.sort((A,D)=>A.sequence-D.sequence).map((A,D)=>{var L,z;const V=I(A,_),W=!0;let J="Cha xc nh";if(A.scheduled_time)J=A.scheduled_time;else try{const G=JSON.parse(_.schedule_week);if(G.startTime){const re=parseInt(G.startTime.split(":")[0]),Z=parseInt(G.startTime.split(":")[1]),ye=re+A.sequence,gt=String(ye).padStart(2,"0"),gn=String(Z).padStart(2,"0");J=`${gt}:${gn}`}}catch{J="Cha xc nh"}const N=e.filter(G=>{if(!G.location_id||!G.check_in_time||G.task_id&&G.task_id!==_.id)return!1;if(!G.task_id){const re=new Date(G.check_in_time).toISOString().split("T")[0],Z=new Date(_.created_at).toISOString().split("T")[0];return re===Z&&G.location_id===A.location_id}return G.location_id===A.location_id});let B=null;if(N.length>0&&A.scheduled_time&&A.scheduled_time!=="Cha xc nh"){const G=parseInt(A.scheduled_time.split(":")[0]),re=parseInt(A.scheduled_time.split(":")[1]),Z=G*60+re;if(B=N.reduce((ye,gt)=>{if(!gt.check_in_time)return ye;const gn=new Date(gt.check_in_time),da=gn.getHours(),qr=gn.getMinutes(),Nl=da*60+qr,Tl=Math.abs(Nl-Z),Zr=ye?Math.abs(new Date(ye.check_in_time).getHours()*60+new Date(ye.check_in_time).getMinutes()-Z):1/0;return Tl<Zr?gt:ye},null),B&&B.check_in_time){const ye=new Date(B.check_in_time),gt=ye.getHours(),gn=ye.getMinutes(),qr=gt*60+gn-Z;(qr<0||qr>15)&&(B=null)}}const F=new Date(_.created_at).toISOString().split("T")[0];return console.log(` ADMIN Stop ${A.sequence} (${A.location_id}):`,{task_date:F,scheduled_time:A.scheduled_time,allLocationRecords_count:N.length,allLocationRecords:N.map(G=>({id:G.id,check_in_time:G.check_in_time,check_in_date:G.check_in_time?new Date(G.check_in_time).toISOString().split("T")[0]:null,photo_url:G.photo_url,same_date:G.check_in_time?new Date(G.check_in_time).toISOString().split("T")[0]===F:!1})),latestCheckin_time:B==null?void 0:B.check_in_time,latestCheckin_photo:B==null?void 0:B.photo_url,final_completedAt:(B==null?void 0:B.check_in_time)||A.completed_at,final_photoUrl:(B==null?void 0:B.photo_url)||null}),{id:`stop-${_.id}-${A.location_id}-${A.sequence}`,name:A.location_name,completed:B!==null,completedAt:(B==null?void 0:B.check_in_time)||void 0,completedBy:((L=_.assigned_user)==null?void 0:L.full_name)||((z=_.assigned_user)==null?void 0:z.username)||"Nhn vin",isActive:V.status==="active",isOverdue:V.status==="overdue",locationId:A.location_id,taskId:_.id,scheduledTime:J,statusText:V.text,statusColor:V.color,photoUrl:(B==null?void 0:B.photo_url)||void 0,taskCreatedAt:_.created_at,onStepClick:W?T:void 0}})}):u.jsxs("div",{className:"text-center text-gray-500 py-8",children:[u.jsx("div",{className:"text-sm",children:"Nhim v n gin - khng c im dng"}),u.jsxs("div",{className:"text-xs mt-1",children:["V tr: ",_.location_name||"Cha xc nh"]})]})]},_.id)}):u.jsxs("div",{className:"text-center text-gray-500 py-8",children:[u.jsx("div",{className:"text-lg",children:"Cha c nhim v no"}),u.jsx("div",{className:"text-sm mt-1",children:"To nhim v mi  bt u theo di tin trnh"})]})})]})})]}),u.jsx(Zm,{isOpen:m,onClose:()=>{w(!1),p(null)},record:g})]})},r8=()=>{const{user:t}=Ae(),[e,n]=C.useState([]),[r,i]=C.useState([]),[o,a]=C.useState(!0),[s,l]=C.useState(""),[c,d]=C.useState(new Date),[f,h]=C.useState([]),[g,p]=C.useState(null),[m,w]=C.useState(!1),[x,v]=C.useState(new Date);C.useEffect(()=>{const _=O=>{if(console.error("Global error caught:",O.error),O.error&&O.error.message&&O.error.message.includes("onboarding"))return console.log("Ignoring onboarding.js error from browser extension"),O.preventDefault(),!1},k=O=>{if(console.error("Unhandled promise rejection:",O.reason),O.reason&&O.reason.message&&O.reason.message.includes("onboarding"))return console.log("Ignoring onboarding.js promise rejection from browser extension"),O.preventDefault(),!1};return window.addEventListener("error",_),window.addEventListener("unhandledrejection",k),()=>{window.removeEventListener("error",_),window.removeEventListener("unhandledrejection",k)}},[]),C.useEffect(()=>{if((t==null?void 0:t.role)==="employee"){y(),E();const _=setInterval(()=>{y(!0),E()},1e4),k=O=>{console.log(" EMPLOYEE: Checkin success event received:",O.detail),console.log(" EMPLOYEE: Event detail:",JSON.stringify(O.detail,null,2)),Promise.all([y(!0),E()]).then(()=>{console.log(" EMPLOYEE: Data refreshed successfully after checkin"),X.success("  cp nht d liu sau khi chm cng!")}).catch(j=>{console.error(" EMPLOYEE: Error refreshing data:",j),X.error(" Li cp nht d liu")})};return window.addEventListener("checkin-success",k),()=>{clearInterval(_),window.removeEventListener("checkin-success",k)}}},[t]),C.useEffect(()=>{const _=setInterval(()=>{v(new Date)},1e3);return()=>clearInterval(_)},[]);const y=async(_=!1)=>{var k,O;try{console.log(" Fetching checkin records for employee:",t==null?void 0:t.username);let j,R=[];try{j=await ne.get("/checkin/admin/all-records"),R=j.data,console.log(" Used /checkin/admin/all-records:",R.length,"records"),console.log(" EMPLOYEE: All records before filtering:",R.length),console.log(" EMPLOYEE: User info:",{username:t==null?void 0:t.username,full_name:t==null?void 0:t.full_name,id:t==null?void 0:t.id}),R=R.filter(D=>D.user_username===(t==null?void 0:t.username)||D.user_name===(t==null?void 0:t.full_name)||D.user_id===(t==null?void 0:t.id)),console.log(" EMPLOYEE: Filtered records for employee:",R.length,"records"),console.log(" EMPLOYEE: Filtered records:",R)}catch{try{j=await ne.get("/patrol-records/my-records"),R=j.data,console.log(" Used /patrol-records/my-records (fallback):",R.length,"records")}catch{try{j=await ne.get("/patrol-records/",{params:{user_id:t==null?void 0:t.id}}),R=j.data,console.log(" Used /patrol-records/ with user_id (fallback):",R.length,"records")}catch(W){console.error(" All endpoints failed:",W),R=[]}}}const A=R;if(console.log(" All records before filtering:",R.map(D=>({id:D.id,task_id:D.task_id,location_id:D.location_id,user_username:D.user_username,user_name:D.user_name,user_id:D.user_id,check_in_time:D.check_in_time}))),console.log(" Final employee records:",{totalRecords:R.length,filteredRecords:A.length,employeeUsername:t==null?void 0:t.username,employeeName:t==null?void 0:t.full_name,employeeId:t==null?void 0:t.id,filteredRecordsDetails:A.map(D=>({id:D.id,task_id:D.task_id,location_id:D.location_id,user_username:D.user_username,check_in_time:D.check_in_time}))}),!_&&e.length>0){const D=A.filter(V=>!e.some(W=>W.id===V.id));D.length>0&&(h(D),D.forEach(V=>{X.success(` Bn va hon thnh nhim v "${V.task_title}"!`,{duration:5e3})}))}n(A),d(new Date)}catch(j){console.error("Error fetching checkin records:",j),l(((O=(k=j.response)==null?void 0:k.data)==null?void 0:O.detail)||"C li xy ra")}finally{a(!1)}},E=async()=>{try{console.log(" Fetching tasks for employee:",t==null?void 0:t.username);let _,k=[];try{_=await ne.get("/patrol-tasks/"),k=_.data,console.log(" Used /patrol-tasks/ (admin):",k.length,"tasks")}catch{try{_=await ne.get("/patrol-tasks/my-tasks"),k=_.data,console.log(" Used /patrol-tasks/my-tasks (fallback):",k.length,"tasks")}catch(R){console.error(" All task endpoints failed:",R),k=[]}}console.log(" All tasks before filtering:",k.map(j=>{var R;return{id:j.id,title:j.title,assigned_user:j.assigned_user,stops:(R=j.stops)==null?void 0:R.map(A=>({id:A.id,location_name:A.location_name,location_id:A.location_id,sequence:A.sequence}))}}));let O=k.filter(j=>{var A,D,V;const R=((A=j.assigned_user)==null?void 0:A.username)===(t==null?void 0:t.username)||((D=j.assigned_user)==null?void 0:D.full_name)===(t==null?void 0:t.full_name)||((V=j.assigned_user)==null?void 0:V.id)===(t==null?void 0:t.id);return console.log(" Task filter check:",{taskId:j.id,taskTitle:j.title,assignedUser:j.assigned_user,currentUser:{username:t==null?void 0:t.username,full_name:t==null?void 0:t.full_name,id:t==null?void 0:t.id},isAssigned:R}),R});O.length===0&&(console.log(" No tasks found for employee:",t==null?void 0:t.username),O=[]),console.log(" Final employee tasks:",{totalTasks:k.length,filteredTasks:O.length,employeeUsername:t==null?void 0:t.username,employeeName:t==null?void 0:t.full_name,employeeId:t==null?void 0:t.id,filteredTasksDetails:O.map(j=>{var R;return{id:j.id,title:j.title,assigned_user:j.assigned_user,stopsCount:((R=j.stops)==null?void 0:R.length)||0}})}),i(O)}catch(_){console.error("Error fetching tasks:",_),X.error("Khng th ti danh sch nhim v")}},b=(_,k,O,j)=>{console.log(" EMPLOYEE: Finding checkin record for task:",_,"location:",k);const R=j?new Date(j).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];console.log(" EMPLOYEE: Task date:",R);const A=e.filter(D=>{if(!D.task_id||!D.location_id||!D.check_in_time)return!1;const V=new Date(D.check_in_time).toISOString().split("T")[0],W=V===R,J=D.task_id===_&&D.location_id===k;return console.log(` EMPLOYEE Record ${D.id}: task_id=${D.task_id}, location_id=${D.location_id}, date=${V}, isSameDate=${W}, isMatching=${J}`),J&&W});if(console.log(" EMPLOYEE: Matching records count (today only):",A.length),A.length>0){const D=A.sort((V,W)=>new Date(W.check_in_time||0).getTime()-new Date(V.check_in_time||0).getTime())[0];return console.log(" EMPLOYEE: Found checkin record (today only):",{task_id:D.task_id,location_id:D.location_id,check_in_time:D.check_in_time,check_out_time:D.check_out_time,photo_url:D.photo_url}),D}return console.log(" EMPLOYEE: No checkin record found for today"),null},I=(_,k)=>{if(!_||!k)return{status:"pending",color:"gray",text:"Cha xc nh"};const O=new Date;new Date(O.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})).toISOString().split("T")[0],k.created_at&&new Date(k.created_at).toISOString().split("T")[0];const R=b(k.id,_.location_id,_.scheduled_time,k.created_at),A=x,D=new Date(A.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),V=D.toISOString().split("T")[0],W=D.getHours()*60+D.getMinutes();console.log(` EMPLOYEE: Current time: ${D.toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})}`),console.log(` EMPLOYEE: Stop ${_.location_id} scheduled_time: ${_.scheduled_time}`),console.log(` EMPLOYEE: Current date: ${V}, Current time in minutes: ${W}`);let J=null;if(_.scheduled_time&&_.scheduled_time!=="Cha xc nh"){const[L,z]=_.scheduled_time.split(":").map(Number);J=L*60+z,console.log(` EMPLOYEE: Using stop.scheduled_time: ${_.scheduled_time} = ${J} minutes`)}else try{const L=JSON.parse(k.schedule_week);if(L.startTime){const z=parseInt(L.startTime.split(":")[0]),G=parseInt(L.startTime.split(":")[1]);J=(z+_.sequence)*60+G,console.log(` EMPLOYEE: Calculated from schedule: startTime=${L.startTime}, sequence=${_.sequence}, result=${J} minutes`)}}catch(L){console.log(" EMPLOYEE: Error parsing schedule:",L)}let N=null;try{k.created_at&&(N=new Date(k.created_at).toISOString().split("T")[0],console.log(` EMPLOYEE: Task created_at: ${k.created_at}, parsed date: ${N}`))}catch(L){console.log(" EMPLOYEE: Error parsing task date:",L)}if(!J)return console.log(` EMPLOYEE: No scheduled time found for stop ${_.location_id}`),{status:"pending",color:"gray",text:"Cha xc nh"};const B=N===V,H=N&&N<V,F=N&&N>V;if(console.log(" EMPLOYEE: Date comparison:",{taskDate:N,currentDate:V,isToday:B,isPastTask:H,isFutureTask:F}),R&&R.check_in_time)return console.log(` EMPLOYEE: Location ${_.location_id} has checkin record - showing as completed`),{status:"completed",color:"green",text:" chm cng"};if(_.completed)return console.log(` EMPLOYEE: Task ${k.id} stop ${_.location_id} is completed from stops:`,_),{status:"completed",color:"green",text:" chm cng"};if(B&&!R){const L=_.scheduled_time;if(console.log(` EMPLOYEE STOP ${_.location_id}: scheduled_time=${L}, type=${typeof L}`),L&&L!=="Cha xc nh"&&typeof L=="string"){const z=parseInt(L.split(":")[0]),G=parseInt(L.split(":")[1]),re=z*60+G,Z=W>re+15;if(console.log(` EMPLOYEE OVERDUE CHECK: Stop ${_.location_id}`,{scheduledTime:L,currentTimeInMinutes:W,scheduledTimeInMinutes:re,timeDiff:W-re,isOverdue:Z}),Z)return console.log(` EMPLOYEE STOP ${_.location_id} IS OVERDUE!`),{status:"overdue",color:"red",text:"Qu hn"}}}if(H)return R&&R.check_in_time?(console.log(" EMPLOYEE: PAST TASK COMPLETED: Task hm qua  chm cng"),{status:"completed",color:"green",text:" chm cng"}):(console.log(" EMPLOYEE: PAST TASK OVERDUE: Task hm qua cha chm cng"),{status:"overdue",color:"red",text:"Qu hn (cha chm cng)"});if(F)return console.log(" EMPLOYEE: FUTURE TASK: Cha n ngy"),{status:"pending",color:"gray",text:"Cha n ngy"};if(B){if(_.scheduled_time&&_.scheduled_time!=="Cha xc nh"&&typeof _.scheduled_time=="string"){const L=W,z=parseInt(_.scheduled_time.split(":")[0]),G=parseInt(_.scheduled_time.split(":")[1]),re=z*60+G;if(L>re+15)return console.log(" EMPLOYEE: OVERDUE: Past deadline"),{status:"overdue",color:"red",text:"Cha chm cng (qu hn)"}}return console.log(" EMPLOYEE: PENDING: Waiting for checkin"),{status:"pending",color:"blue",text:"Ch chm cng"}}return console.log(" EMPLOYEE: UNKNOWN: Cannot determine task date"),{status:"pending",color:"gray",text:"Cha xc nh"}},T=async _=>{var k;if(console.log("handleStepClick called with step:",_),_.taskId&&_.locationId){const O=e.filter(R=>{if(!R.location_id||!R.check_in_time||R.task_id&&R.task_id!==_.taskId)return!1;if(!R.task_id){const A=new Date(R.check_in_time).toISOString().split("T")[0],D=new Date().toISOString().split("T")[0];return A===D&&R.location_id===_.locationId}return R.location_id===_.locationId});let j=null;if(O.length>0&&_.scheduledTime&&_.scheduledTime!=="Cha xc nh"&&typeof _.scheduledTime=="string"){const R=parseInt(_.scheduledTime.split(":")[0]),A=parseInt(_.scheduledTime.split(":")[1]),D=R*60+A;if(j=O.reduce((V,W)=>{if(!W.check_in_time)return V;const J=new Date(W.check_in_time),N=J.getHours(),B=J.getMinutes(),H=N*60+B,F=Math.abs(H-D),L=V?Math.abs(new Date(V.check_in_time).getHours()*60+new Date(V.check_in_time).getMinutes()-D):1/0;return F<L?W:V},null),j){const V=new Date(j.check_in_time),W=V.getHours(),J=V.getMinutes(),B=W*60+J-D;(B<0||B>15)&&(j=null)}}if(j){const R=r.find(V=>V.id===_.taskId),A=(k=R==null?void 0:R.stops)==null?void 0:k.find(V=>V.location_id===_.locationId);console.log(` Showing checkin record for Stop ${A==null?void 0:A.sequence} (${A==null?void 0:A.scheduled_time}) - Has checkin record`);const D={...j,notes:`V tr "${_.name}"  c chm cng. Thi gian: ${j.check_in_time?new Date(j.check_in_time).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"}):"Cha xc nh"}. Trng thi:  hon thnh`,photo_url:j.photo_url||null,user_name:j.user_name||(t==null?void 0:t.full_name)||"Nhn vin",user_username:j.user_username||(t==null?void 0:t.username)||"user"};p(D),w(!0)}else{const R=r.find(D=>D.id===_.taskId),A={id:0,user_name:(t==null?void 0:t.full_name)||"Nhn vin",user_username:(t==null?void 0:t.username)||"user",task_title:(R==null?void 0:R.title)||"Nhim v",location_name:_.name,check_in_time:null,check_out_time:null,photo_url:null,checkout_photo_url:null,notes:`V tr "${_.name}" cha c chm cng. Thi gian d kin: ${_.scheduledTime||"Cha xc nh"}. Trng thi: ${_.statusText||"Cha xc nh"}`,gps_latitude:void 0,gps_longitude:void 0};p(A),w(!0)}}};if(o)return u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"ang ti..."})});if(s)return u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-red-500 text-xl mb-4",children:["Li: ",s]}),u.jsx("button",{onClick:()=>{l(""),a(!0),y(),E()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Th li"})]})});try{return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:[u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Employee Dashboard"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Nhim v tun tra ca bn"})]}),u.jsx("div",{className:"text-right",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),y(),E(),X.success(" lm mi d liu")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:" Lm mi"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-gray-500",children:"Thi gian hin ti:"}),u.jsx("div",{className:"text-sm font-medium text-gray-700",children:x.toLocaleTimeString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cp nht: ",c?c.toLocaleTimeString("vi-VN"):"-"]}),u.jsxs("div",{className:"flex items-center mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),u.jsx("span",{className:"text-xs text-green-600",children:"Real-time: 1s"})]})]})]})})]})}),f.length>0&&u.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-300 rounded-lg",children:[u.jsx("h3",{className:"text-green-800 font-semibold mb-2",children:" Hot ng mi!"}),f.map(_=>u.jsxs("div",{className:"text-sm text-green-700",children:['Bn va hon thnh nhim v "',_.task_title,'" ti ',_.location_name]},_.id))]}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden",children:[u.jsx("div",{className:"px-6 py-6 bg-gradient-to-r from-green-600 to-blue-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold",children:" Tin trnh nhim v tun tra"}),u.jsx("p",{className:"text-green-100 mt-1",children:"Theo di tin trnh thc hin nhim v ca bn theo thi gian thc"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-green-100",children:"Tng nhim v"}),u.jsx("div",{className:"text-2xl font-bold",children:r.length})]})]})}),u.jsx("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:r.length>0?r.map(_=>{var j,R;const O=(A=>{if(console.log(` EMPLOYEE TASK ${A.id} (${A.title}): Checking overall status...`),!A.stops||A.stops.length===0)return console.log(` EMPLOYEE TASK ${A.id}: No stops found`),{color:"gray",text:"Cha c stops"};const D=A.stops.map(N=>{const B=I(N,A);return console.log(` EMPLOYEE STOP ${N.location_id} (${N.scheduled_time}): ${B.status} - ${B.text}`),B});return D.every(N=>N.status==="completed")?(console.log(` EMPLOYEE TASK ${A.id}: ALL STOPS COMPLETED - showing " chm cng"`),{color:"green",text:" chm cng"}):D.some(N=>N.status==="overdue")?(console.log(` EMPLOYEE TASK ${A.id}: HAS OVERDUE STOPS - showing "Qu hn"`),{color:"red",text:"Qu hn (cha chm cng)"}):D.some(N=>N.status==="completed")?(console.log(` EMPLOYEE TASK ${A.id}: SOME STOPS COMPLETED - showing "ang thc hin"`),{color:"blue",text:"ang thc hin"}):(console.log(` EMPLOYEE TASK ${A.id}: DEFAULT - showing "Ch thc hin"`),{color:"yellow",text:"Ch thc hin"})})(_);return u.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow ${O.color==="red"?"border-red-300 bg-red-50":O.color==="green"?"border-green-300 bg-green-50":O.color==="blue"?"border-blue-300 bg-blue-50":O.color==="yellow"?"border-yellow-300 bg-yellow-50":"border-gray-200 bg-white"}`,children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0",children:u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:_.title}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 text-xs sm:text-sm text-gray-600",children:[u.jsxs("span",{children:["Nhn vin: ",((j=_.assigned_user)==null?void 0:j.full_name)||((R=_.assigned_user)==null?void 0:R.username)||"Cha giao"]}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsxs("span",{children:["Lch: ",(()=>{try{const A=JSON.parse(_.schedule_week);return`${new Date(A.date).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit"})} | ${A.startTime} - ${A.endTime}`}catch{return _.schedule_week}})()]}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsxs("span",{className:"flex items-center",children:["Trng thi:",u.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${O.color==="red"?"bg-red-100 text-red-800":O.color==="green"?"bg-green-100 text-green-800":O.color==="blue"?"bg-blue-100 text-blue-800":O.color==="yellow"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:O.text})]})]})]})}),u.jsx("div",{className:"mt-6",children:_.stops&&_.stops.length>0?u.jsx(qm,{steps:_.stops.map(A=>{const D=I(A,_),V=!0;let W="Cha xc nh";if(A.scheduled_time)W=A.scheduled_time;else try{const B=JSON.parse(_.schedule_week);if(B.startTime){const H=parseInt(B.startTime.split(":")[0]),F=parseInt(B.startTime.split(":")[1]),L=H+A.sequence,z=String(L).padStart(2,"0"),G=String(F).padStart(2,"0");W=`${z}:${G}`}}catch{W="Cha xc nh"}const J=e.filter(B=>{if(!B.location_id||!B.check_in_time||B.task_id&&B.task_id!==_.id)return!1;if(!B.task_id){const H=new Date(B.check_in_time).toISOString().split("T")[0],F=new Date(_.created_at).toISOString().split("T")[0];return H===F&&B.location_id===A.location_id}return B.location_id===A.location_id});let N=null;if(J.length>0&&A.scheduled_time&&A.scheduled_time!=="Cha xc nh"){const B=parseInt(A.scheduled_time.split(":")[0]),H=parseInt(A.scheduled_time.split(":")[1]),F=B*60+H;if(N=J.reduce((L,z)=>{if(!z.check_in_time)return L;const G=new Date(z.check_in_time),re=G.getHours(),Z=G.getMinutes(),ye=re*60+Z,gt=Math.abs(ye-F),gn=L?Math.abs(new Date(L.check_in_time).getHours()*60+new Date(L.check_in_time).getMinutes()-F):1/0;return gt<gn?z:L},null),N){const L=new Date(N.check_in_time),z=L.getHours(),G=L.getMinutes(),Z=z*60+G-F;(Z<0||Z>15)&&(N=null)}}return console.log(` EMPLOYEE Stop ${A.sequence} (${A.location_id}):`,{scheduled_time:A.scheduled_time,completed_at:A.completed_at,allLocationRecords:J.map(B=>({id:B.id,check_in_time:B.check_in_time,photo_url:B.photo_url,location_id:B.location_id})),latestCheckin_time:N==null?void 0:N.check_in_time,latestCheckin_photo:N==null?void 0:N.photo_url,final_completedAt:(N==null?void 0:N.check_in_time)||A.completed_at}),{id:`stop-${_.id}-${A.location_id}-${A.sequence}`,name:A.location_name,completed:N!==null,completedAt:(N==null?void 0:N.check_in_time)||void 0,completedBy:(N==null?void 0:N.user_name)||(N==null?void 0:N.user_username)||(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"Nhn vin",isActive:D.status==="active",isOverdue:D.status==="overdue",locationId:A.location_id,taskId:_.id,scheduledTime:W,statusText:D.text,statusColor:D.color,photoUrl:(N==null?void 0:N.photo_url)||void 0,taskCreatedAt:_.created_at,onStepClick:V?T:void 0}})}):u.jsxs("div",{className:"text-center text-gray-500 py-8",children:[u.jsx("div",{className:"text-sm",children:"Nhim v n gin - khng c im dng"}),u.jsxs("div",{className:"text-xs mt-1",children:["V tr: ",_.location_name||"Cha xc nh"]})]})})]},_.id)}):u.jsxs("div",{className:"text-center text-gray-500 py-8",children:[u.jsx("div",{className:"text-lg",children:"Cha c nhim v no"}),u.jsx("div",{className:"text-sm mt-1",children:"Lin h admin  c giao nhim v"})]})})]})})]}),m&&g&&u.jsx(Zm,{isOpen:m,record:g,onClose:()=>{w(!1),p(null)}})]})}catch(_){return console.error("Employee Dashboard render error:",_),u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-red-500 text-xl mb-4",children:"Li hin th trang"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Ti li trang"})]})})}},i8=()=>{const{user:t}=Ae(),e=bn(),[n,r]=C.useState(null),[i,o]=C.useState(!0),[a,s]=C.useState(!1),[l,c]=C.useState(!1),d=async()=>{try{o(!0);const{api:g}=await Qm(()=>Promise.resolve().then(()=>Jp),void 0),m=(await g.get("/face-auth/status")).data;console.log(" Face status for current user:",m),r(m)}catch(g){console.error("Error fetching face status:",g),X.error("Khng th ti thng tin khun mt")}finally{o(!1)}},f=()=>{d(),X.success("ng k khun mt thnh cng!")},h=async()=>{if(confirm("Bn c chc chn mun xa d liu khun mt? Hnh ng ny khng th hon tc."))try{c(!0);const g=Ae.getState().token||localStorage.getItem("access_token");if(!g){X.error("Vui lng ng nhp li");return}const m=await(await fetch(`${{}.VITE_API_URL||"https://rolanda-skinless-sue.ngrok-free.dev"}/api/face-auth/unregister`,{method:"DELETE",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}})).json();m.success?(X.success("Xa d liu khun mt thnh cng"),d()):X.error(m.message||"C li xy ra")}catch(g){console.error("Error deleting face data:",g),X.error("Khng th xa d liu khun mt")}finally{c(!1)}};return C.useEffect(()=>{d()},[]),i?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"ang ti..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(V_,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ci t khun mt"}),u.jsx("p",{className:"text-gray-600",children:"Qun l xc thc khun mt cho ti khon ca bn"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(qo,{className:"w-8 h-8 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t==null?void 0:t.full_name}),u.jsxs("p",{className:"text-gray-600",children:["@",t==null?void 0:t.username]}),u.jsx("p",{className:"text-sm text-gray-500 capitalize",children:t==null?void 0:t.role})]})]})}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trng thi khun mt"}),n!=null&&n.has_face_data?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx(yn,{className:"w-6 h-6 text-green-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-800",children:" ng k khun mt"}),u.jsxs("p",{className:"text-sm text-green-600",children:["ng k lc: ",new Date(n.registered_at).toLocaleString("vi-VN")]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("button",{onClick:()=>s(!0),className:"flex items-center justify-center space-x-2 p-4 border border-blue-300 text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[u.jsx(Qo,{className:"w-5 h-5"}),u.jsx("span",{children:"Cp nht khun mt"})]}),u.jsxs("button",{onClick:h,disabled:l,className:"flex items-center justify-center space-x-2 p-4 border border-red-300 text-red-700 bg-red-50 rounded-lg hover:bg-red-100 transition-colors disabled:opacity-50",children:[l?u.jsx("div",{className:"w-5 h-5 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):u.jsx(Yo,{className:"w-5 h-5"}),u.jsx("span",{children:"Xa d liu"})]})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[u.jsx(Si,{className:"w-6 h-6 text-orange-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-orange-800",children:"Cha ng k khun mt"}),u.jsx("p",{className:"text-sm text-orange-600",children:"ng k khun mt  s dng tnh nng ng nhp nhanh"})]})]}),u.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center space-x-2 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Qo,{className:"w-5 h-5"}),u.jsx("span",{children:"ng k khun mt"})]})]})]}),u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Hng dn s dng"}),u.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[u.jsxs("p",{children:[" ",u.jsx("strong",{children:"ng k khun mt:"})," Chp nh khun mt r nt, m bo nh sng "]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"ng nhp nhanh:"})," S dng khun mt  ng nhp thay v nhp mt khu"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Bo mt:"})," D liu khun mt c m ha v lu tr an ton"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Cp nht:"})," C th cp nht khun mt bt k lc no"]})]})]})]}),u.jsx(Ym,{isOpen:a,onClose:()=>s(!1),onSuccess:()=>{},onRegisterSuccess:f,mode:"register",username:t==null?void 0:t.username})]})},Pr=class Pr{constructor(){Nn(this,"registration",null);Nn(this,"subscription",null)}static getInstance(){return Pr.instance||(Pr.instance=new Pr),Pr.instance}async initialize(){if(console.log(" Initializing push notifications..."),!("serviceWorker"in navigator)||!("PushManager"in window))return console.log(" Push messaging is not supported"),!1;try{if(console.log(" Getting service worker registration..."),!navigator.serviceWorker.controller){console.log(" No service worker controller, trying to register...");try{await navigator.serviceWorker.register("/sw.js"),console.log(" Service worker registered")}catch{return console.log(" Service worker registration failed, continuing without push..."),this.enableLocalNotifications()}}const e=navigator.serviceWorker.ready,n=new Promise((i,o)=>setTimeout(()=>o(new Error("Service worker timeout")),5e3));this.registration=await Promise.race([e,n]),console.log(" Service worker ready"),console.log(" Requesting notification permission...");const r=await Notification.requestPermission();if(console.log(" Permission result:",r),r!=="granted")return console.log(" Notification permission denied"),!1;if(console.log(" Notification permission granted"),console.log(" Creating push subscription..."),!this.registration.pushManager)return console.log(" Push manager not available, using local notifications..."),this.enableLocalNotifications();try{this.subscription=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array("BGSuFsu3HNKp0o88tO-gWVzv2WCtmndy4hnkua0hN8EJUmTwJnBos8XwikcVXCRegKdPDcGtIP2JKiHYjiGNHV4")}),console.log(" Push subscription created")}catch(i){return console.log(" Push subscription failed:",i),console.log(" Falling back to local notifications..."),this.enableLocalNotifications()}return console.log(" Sending subscription to server..."),await this.sendSubscriptionToServer(this.subscription),console.log(" Push notifications initialized successfully"),!0}catch(e){return console.error(" Error initializing push notifications:",e),!1}}async sendSubscriptionToServer(e){try{console.log(" Sending subscription to server...");const n=await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({endpoint:e.endpoint,keys:{p256dh:e.getKey("p256dh")?btoa(String.fromCharCode(...new Uint8Array(e.getKey("p256dh")))):"",auth:e.getKey("auth")?btoa(String.fromCharCode(...new Uint8Array(e.getKey("auth")))):""},user_agent:navigator.userAgent}),signal:AbortSignal.timeout(1e4)});if(!n.ok){const i=await n.text();throw console.error(" Server response error:",n.status,i),new Error(`Server error: ${n.status} - ${i}`)}const r=await n.json();console.log(" Subscription sent to server successfully:",r)}catch(n){console.error(" Error sending subscription to server:",n)}}async enableLocalNotifications(){try{return console.log(" Enabling local notifications only..."),await Notification.requestPermission()!=="granted"?(console.log(" Notification permission denied"),!1):(console.log(" Local notifications enabled"),this.showNotification(" Thng bo  c bt!",{body:"Bn s nhn c thng bo local khi c nhim v mi.",tag:"notification-enabled"}),!0)}catch(e){return console.error(" Error enabling local notifications:",e),!1}}urlBase64ToUint8Array(e){const n="=".repeat((4-e.length%4)%4),r=(e+n).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(r),o=new Uint8Array(i.length);for(let a=0;a<i.length;++a)o[a]=i.charCodeAt(a);return o}async isSubscribed(){return this.registration||(this.registration=await navigator.serviceWorker.ready),await this.registration.pushManager.getSubscription()!==null}async unsubscribe(){try{return this.subscription?(await this.subscription.unsubscribe(),this.subscription=null,console.log("Unsubscribed from push notifications"),!0):!1}catch(e){return console.error("Error unsubscribing from push notifications:",e),!1}}showNotification(e,n){this.registration&&this.registration.showNotification(e,{icon:"/icon-192x192.png",badge:"/icon-96x96.png",vibrate:[100,50,100],...n})}async testNotification(){try{console.log(" Testing notification...");const e=localStorage.getItem("access_token");if(!e)throw console.log(" No authentication token found"),new Error("No authentication token");const n=await fetch("/api/push/test",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log(" Test response status:",n.status),!n.ok){const i=await n.text();throw console.error(" Test failed:",n.status,i),new Error(`Test failed: ${n.status} - ${i}`)}const r=await n.json();return console.log(" Test notification result:",r),r.success}catch(e){return console.error(" Error testing notification:",e),!1}}};Nn(Pr,"instance");let qu=Pr;const Ir=qu.getInstance(),o8=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[i,o]=C.useState(!1),[a,s]=C.useState("default");C.useEffect(()=>{l(),c(),d()},[]);const l=()=>{const p="serviceWorker"in navigator&&"PushManager"in window;e(p)},c=()=>{"Notification"in window&&s(Notification.permission)},d=async()=>{try{const p=await Ir.isSubscribed();r(p)}catch(p){console.error("Error checking subscription:",p)}},f=async()=>{o(!0);try{await Ir.initialize()&&(r(!0),Ir.showNotification(" Thng bo  c bt!",{body:"Bn s nhn c thng bo khi c nhim v mi.",tag:"notification-enabled"}))}catch(p){console.error("Error enabling notifications:",p)}finally{o(!1)}},h=async()=>{o(!0);try{await Ir.unsubscribe(),r(!1)}catch(p){console.error("Error disabling notifications:",p)}finally{o(!1)}},g=async()=>{try{o(!0),await Ir.testNotification()?Ir.showNotification(" Test thnh cng!",{body:"Thng bo test  c gi t server.",tag:"test-success"}):Ir.showNotification(" Test tht bi",{body:"Khng th gi thng bo test t server.",tag:"test-failed"})}catch(p){console.error("Error testing notification:",p)}finally{o(!1)}};return u.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(ku,{className:"w-8 h-8 text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Push Notifications"}),u.jsx("p",{className:"text-gray-600",children:"Qun l thng bo y cho ng dng"})]})]}),u.jsx("div",{className:"flex items-center",children:n?u.jsx(yn,{className:"w-6 h-6 text-green-500"}):u.jsx(lc,{className:"w-6 h-6 text-gray-400"})})]}),u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[t?u.jsx(yn,{className:"w-5 h-5 text-green-500 mr-2"}):u.jsx(Si,{className:"w-5 h-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-sm font-medium",children:t?"Trnh duyt h tr push notifications":"Trnh duyt khng h tr push notifications"})]})})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Trng thi quyn"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[a==="granted"?u.jsx(yn,{className:"w-5 h-5 text-green-500 mr-2"}):a==="denied"?u.jsx(Si,{className:"w-5 h-5 text-red-500 mr-2"}):u.jsx(Si,{className:"w-5 h-5 text-yellow-500 mr-2"}),u.jsxs("span",{className:"text-sm font-medium",children:["Quyn thng bo: ",a==="granted"?" cp":a==="denied"?"B t chi":"Cha xc nh"]})]})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Trng thi ng k"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[n?u.jsx(yn,{className:"w-5 h-5 text-green-500 mr-2"}):u.jsx(lc,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"text-sm font-medium",children:n?" ng k push notifications":"Cha ng k push notifications"})]})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Hnh ng"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:g,disabled:i,className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 disabled:bg-gray-100 disabled:cursor-not-allowed flex items-center justify-center",children:[u.jsx(J_,{className:"w-4 h-4 mr-2"}),"Test thng bo"]}),u.jsxs("button",{onClick:h,disabled:i,className:"bg-red-100 text-red-700 px-6 py-3 rounded-lg hover:bg-red-200 disabled:bg-gray-100 disabled:cursor-not-allowed flex items-center justify-center",children:[u.jsx(lc,{className:"w-4 h-4 mr-2"}),"Tt thng bo"]})]}):u.jsx("button",{onClick:f,disabled:i||a==="denied"||!t,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"ang bt..."]}):u.jsxs(u.Fragment,{children:[u.jsx(ku,{className:"w-4 h-4 mr-2"}),"Bt thng bo"]})})})]}),u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx(nm,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Thng tin"}),u.jsx("p",{className:"text-sm text-blue-800",children:"Push notifications cho php bn nhn thng bo ngay c khi khng m ng dng. Thng bo s c gi khi c nhim v mi c giao cho bn."})]})]})})]})})},a8=()=>{const t=C.useRef(null),[e,n]=C.useState(null),[r,i]=C.useState(null),[o,a]=C.useState(!1),s=C.useCallback(async()=>{try{i(null);const c={video:{width:{ideal:640},height:{ideal:480},facingMode:"user",frameRate:{ideal:15},aspectRatio:{ideal:4/3}}};console.log("Requesting camera with constraints:",c);const d=await navigator.mediaDevices.getUserMedia(c);console.log("Camera stream obtained:",d),n(d),t.current&&(t.current.srcObject=d,t.current.onloadedmetadata=()=>{console.log("Video metadata loaded"),t.current&&t.current.play().then(()=>{console.log("Video started playing"),a(!0)}).catch(f=>{console.error("Error playing video:",f),i("Khng th pht video")})},t.current.onplay=()=>{console.log("Video is playing"),a(!0)},t.current.onpause=()=>{console.log("Video is paused"),a(!1)},t.current.onerror=f=>{console.error("Video error:",f),i("Li video")})}catch(c){console.error("Camera error:",c),i(`Li camera: ${c.message}`)}},[]),l=C.useCallback(()=>{e&&(e.getTracks().forEach(c=>{console.log("Stopping track:",c.kind),c.stop()}),n(null),a(!1))},[e]);return C.useEffect(()=>(s(),()=>{l()}),[s,l]),u.jsxs("div",{className:"p-8 max-w-2xl mx-auto",children:[u.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Camera Test"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded mr-2",children:"Start Camera"}),u.jsx("button",{onClick:l,className:"bg-red-500 text-white px-4 py-2 rounded",children:"Stop Camera"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("p",{children:["Status: ",o?"Playing":"Not Playing"]}),u.jsxs("p",{children:["Stream: ",e?"Active":"Inactive"]}),r&&u.jsxs("p",{className:"text-red-500",children:["Error: ",r]})]}),u.jsxs("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",children:[u.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-96 object-cover",style:{transform:"scaleX(-1)",filter:"brightness(1.1) contrast(1.1)",objectFit:"cover"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-48 h-48 border-4 border-white border-dashed rounded-full opacity-70",children:u.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 text-white text-sm font-medium",children:"Test Camera Here"})})})]}),u.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[u.jsx("p",{children:"Nu camera vn b git, c th do:"}),u.jsxs("ul",{className:"list-disc list-inside mt-2",children:[u.jsx("li",{children:"Browser khng h tr tt camera"}),u.jsx("li",{children:"Camera ang c s dng bi app khc"}),u.jsx("li",{children:"Hardware khng  mnh"}),u.jsx("li",{children:"Network lag (nu dng remote camera)"})]})]})]})},s8=()=>{const[t,e]=C.useState(navigator.onLine),[n,r]=C.useState(0),[i,o]=C.useState(!1);return C.useEffect(()=>{const a=()=>{e(!0),o(!0),setTimeout(()=>o(!1),2e3)},s=()=>e(!1);window.addEventListener("online",a),window.addEventListener("offline",s);const l=async()=>{try{const d=await Km();r(d.count)}catch(d){console.error("Failed to check queue status:",d)}};l();const c=setInterval(l,5e3);return()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s),clearInterval(c)}},[]),t&&n===0?null:u.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 text-white px-4 py-2 text-center text-sm font-medium",children:t?i?u.jsx("div",{className:"bg-blue-600",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Y_,{className:"w-4 h-4 animate-spin"}),u.jsx("span",{children:"ang sync d liu offline..."})]})}):n>0?u.jsx("div",{className:"bg-orange-600",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(r3,{className:"w-4 h-4"}),u.jsxs("span",{children:["C ",n," check-in offline cha sync. ang th sync..."]})]})}):u.jsx("div",{className:"bg-green-600",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(yn,{className:"w-4 h-4"}),u.jsx("span",{children:" sync thnh cng tt c d liu offline!"})]})}):u.jsx("div",{className:"bg-red-600",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(n3,{className:"w-4 h-4"}),u.jsx("span",{children:"Bn ang offline. Check-in s c lu v sync khi c mng."})]})})})},l8=()=>{const[t,e]=C.useState(null),[n,r]=C.useState(!1),[i,o]=C.useState(!1);C.useEffect(()=>{(()=>{if(window.matchMedia("(display-mode: standalone)").matches){o(!0);return}if(window.navigator.standalone===!0){o(!0);return}})();const d=h=>{h.preventDefault(),e(h),r(!0)},f=()=>{o(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",f)}},[]);const a=async()=>{if(t)try{await t.prompt();const{outcome:c}=await t.userChoice;console.log(c==="accepted"?"PWA: User accepted the install prompt":"PWA: User dismissed the install prompt"),e(null),r(!1)}catch(c){console.error("PWA: Error during install:",c)}},s=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};if(i||!n)return null;const l=localStorage.getItem("pwa-install-dismissed");return l&&Date.now()-parseInt(l)<24*60*60*1e3?null:u.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-bounce",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(q_,{className:"w-5 h-5 text-blue-600"}),u.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Ci t App"})]}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(Zn,{className:"w-4 h-4"})})]}),u.jsx("p",{className:"text-gray-600 text-xs mb-3",children:"Ci t ManhToan Patrol  truy cp nhanh hn v s dng offline!"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("button",{onClick:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium py-2 px-3 rounded-md transition-colors flex items-center justify-center space-x-1",children:[u.jsx(Ru,{className:"w-3 h-3"}),u.jsx("span",{children:"Ci t"})]}),u.jsx("button",{onClick:s,className:"px-3 py-2 text-gray-500 hover:text-gray-700 text-xs transition-colors",children:"B qua"})]})]})})};function c8(){const{isAuthenticated:t,user:e}=Ae();return C.useEffect(()=>{console.log("PWA Update Manager temporarily disabled"),window.addEventListener("error",n=>{console.error("Global error caught:",n.error),n.error&&n.error.message&&n.error.message.includes("onboarding")&&(console.log("Ignoring onboarding.js error from browser extension"),n.preventDefault())}),window.addEventListener("unhandledrejection",n=>{console.error("Unhandled promise rejection:",n.reason),n.reason&&n.reason.message&&n.reason.message.includes("onboarding")&&(console.log("Ignoring onboarding.js promise rejection from browser extension"),n.preventDefault())})},[]),t?u.jsxs("div",{className:"App",children:[u.jsx(o3,{children:u.jsxs(wy,{children:[u.jsx(st,{path:"/",element:u.jsx(Bh,{to:"/dashboard",replace:!0})}),u.jsx(st,{path:"/dashboard",element:u.jsx(K3,{})}),u.jsx(st,{path:"/tasks",element:u.jsx(U4,{})}),u.jsx(st,{path:"/qr-scan",element:u.jsx(e1,{})}),u.jsx(st,{path:"/qr-scanner",element:u.jsx(e1,{})}),u.jsx(st,{path:"/smart-qr",element:u.jsx(Qb,{})}),u.jsx(st,{path:"/checkin",element:u.jsx(t8,{})}),u.jsx(st,{path:"/admin-dashboard",element:u.jsx(n8,{})}),u.jsx(st,{path:"/employee-dashboard",element:u.jsx(r8,{})}),u.jsx(st,{path:"/face-auth-settings",element:u.jsx(i8,{})}),u.jsx(st,{path:"/push-notifications",element:u.jsx(o8,{})}),u.jsx(st,{path:"/camera-test",element:u.jsx(a8,{})}),u.jsx(st,{path:"/profile",element:u.jsx(t1,{})}),u.jsx(st,{path:"/reports",element:u.jsx(Yb,{})}),u.jsx(st,{path:"/users",element:u.jsx(t1,{})}),u.jsx(st,{path:"*",element:u.jsx(Bh,{to:"/dashboard",replace:!0})})]})}),u.jsx(s8,{}),u.jsx(l8,{})]}):u.jsx(Jb,{})}const u8=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d8(t){if("serviceWorker"in navigator){if(new URL({}.PUBLIC_URL||"",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${{}.PUBLIC_URL||""}/sw.js`;u8?(f8(n,t),navigator.serviceWorker.ready.then(()=>{console.log("PWA: Service worker  sn sng. ng dng c th hot ng offline.")})):Jm(n,t)})}}function Jm(t,e){navigator.serviceWorker.register(t).then(n=>{console.log("PWA: Service Worker  ng k thnh cng"),n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("PWA: Ni dung mi  c sn v s c ti khi tt c cc tab ang m c ng."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("PWA: Ni dung  c cache  s dng offline."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(n=>{console.error("PWA: Li ng k Service Worker:",n)})}function f8(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):Jm(t,e)}).catch(()=>{console.log("PWA: Khng c kt ni internet. ng dng ang chy  ch  offline.")})}let vi;window.addEventListener("beforeinstallprompt",t=>{console.log("PWA: Install prompt triggered"),t.preventDefault(),vi=t,h8()});function h8(){const t=document.createElement("button");t.textContent=" Ci t App",t.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #1e40af;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
    z-index: 1000;
    transition: all 0.3s ease;
  `,t.addEventListener("click",async()=>{if(vi){vi.prompt();const{outcome:e}=await vi.userChoice;console.log(`PWA: User choice: ${e}`),vi=null,t.remove()}}),t.addEventListener("mouseenter",()=>{t.style.transform="translateY(-2px)",t.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.4)"}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(0)",t.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.3)"}),document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},1e4)}window.addEventListener("appinstalled",()=>{console.log("PWA: App  c ci t thnh cng!"),vi=null;const t=document.createElement("div");t.textContent=" App  c ci t thnh cng!",t.style.cssText=`
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #10b981;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  `,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)});Nc.createRoot(document.getElementById("root")).render(u.jsx(nd.StrictMode,{children:u.jsxs(Ty,{children:[u.jsx(c8,{}),u.jsx(X3,{position:"top-right",toastOptions:{duration:2e3,style:{background:"#363636",color:"#fff",cursor:"pointer",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",maxWidth:"400px"},onClick:(t,e)=>{e.dismiss()}}})]})}));d8({});
