#!/usr/bin/env python3
"""
Script Ä‘á»ƒ táº¡o 8 QR codes cá»‘ Ä‘á»‹nh cho 8 vá»‹ trÃ­ trong nhÃ  mÃ¡y
"""

import qrcode
import os
from datetime import datetime

# 8 vá»‹ trÃ­ cá»‘ Ä‘á»‹nh trong nhÃ  mÃ¡y
FIXED_LOCATIONS = [
    {"id": 1, "name": "Cá»•ng chÃ­nh", "description": "Vá»‹ trÃ­ cá»•ng chÃ­nh vÃ o nhÃ  mÃ¡y"},
    {"id": 2, "name": "Khu vá»±c sáº£n xuáº¥t A", "description": "Khu vá»±c sáº£n xuáº¥t chÃ­nh"},
    {"id": 3, "name": "Khu vá»±c sáº£n xuáº¥t B", "description": "Khu vá»±c sáº£n xuáº¥t phá»¥"},
    {"id": 4, "name": "Kho nguyÃªn liá»‡u", "description": "Kho chá»©a nguyÃªn liá»‡u"},
    {"id": 5, "name": "Kho thÃ nh pháº©m", "description": "Kho chá»©a sáº£n pháº©m hoÃ n thÃ nh"},
    {"id": 6, "name": "PhÃ²ng mÃ¡y", "description": "PhÃ²ng Ä‘iá»u khiá»ƒn mÃ¡y mÃ³c"},
    {"id": 7, "name": "Khu vá»±c báº£o trÃ¬", "description": "Khu vá»±c báº£o trÃ¬ thiáº¿t bá»‹"},
    {"id": 8, "name": "Khu vá»±c vÄƒn phÃ²ng", "description": "Khu vá»±c vÄƒn phÃ²ng lÃ m viá»‡c"}
]

def create_qr_code(data: str, filename: str) -> str:
    """Táº¡o QR code vÃ  lÆ°u file"""
    qr = qrcode.QRCode(version=1, box_size=10, border=5)
    qr.add_data(data)
    qr.make(fit=True)
    
    # Táº¡o áº£nh
    img = qr.make_image(fill_color="black", back_color="white")
    
    # LÆ°u file
    file_path = f"uploads/qr_codes/{filename}"
    os.makedirs(os.path.dirname(file_path), exist_ok=True)
    img.save(file_path)
    
    return file_path

def main():
    print("ğŸ­ Táº¡o 8 QR codes cá»‘ Ä‘á»‹nh cho nhÃ  mÃ¡y...")
    
    # Táº¡o thÆ° má»¥c náº¿u chÆ°a cÃ³
    os.makedirs("uploads/qr_codes", exist_ok=True)
    
    for location in FIXED_LOCATIONS:
        # Táº¡o ná»™i dung QR code
        qr_content = f"https://10.10.68.106:5173/checkin?location_id={location['id']}&name={location['name']}"
        
        # Táº¡o tÃªn file
        filename = f"location_{location['id']:02d}_{location['name'].replace(' ', '_').lower()}.png"
        
        # Táº¡o QR code
        file_path = create_qr_code(qr_content, filename)
        
        print(f"âœ… Táº¡o QR code cho {location['name']} (ID: {location['id']})")
        print(f"   ğŸ“ File: {file_path}")
        print(f"   ğŸ”— URL: {qr_content}")
        print()
    
    print("ğŸ‰ HoÃ n thÃ nh! ÄÃ£ táº¡o 8 QR codes cá»‘ Ä‘á»‹nh.")
    print("ğŸ“‹ Danh sÃ¡ch QR codes:")
    for location in FIXED_LOCATIONS:
        print(f"   {location['id']}. {location['name']} - {location['description']}")

if __name__ == "__main__":
    main()
