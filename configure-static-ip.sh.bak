#!/bin/bash

# Script tá»± Ä‘á»™ng cáº¥u hÃ¬nh Static IP trÃªn macOS
if [ $# -ne 3 ]; then
    echo "Sá»­ dá»¥ng: $0 <IP_ADDRESS> <GATEWAY> <SUBNET_MASK>"
    echo "VÃ­ dá»¥: $0 10.10.68.72 10.10.68.72 255.255.255.0"
    exit 1
fi

STATIC_IP=$1
GATEWAY=$2
SUBNET_MASK=$3

echo "ğŸ”§ Cáº¥u hÃ¬nh Static IP: $STATIC_IP"
echo ""

# TÃ¬m interface máº¡ng Ä‘ang hoáº¡t Ä‘á»™ng
INTERFACE=$(route -n get default | grep interface | awk '{print $2}')
echo "ğŸ“ Interface: $INTERFACE"

# Táº¡o file cáº¥u hÃ¬nh máº¡ng
echo "ğŸ“ Táº¡o file cáº¥u hÃ¬nh máº¡ng..."

# Backup cáº¥u hÃ¬nh cÅ©
sudo cp /etc/hostconfig /etc/hostconfig.backup 2>/dev/null || true

# Cáº¥u hÃ¬nh IP tÄ©nh
echo "ğŸ”§ Cáº¥u hÃ¬nh IP tÄ©nh..."
sudo networksetup -setmanual $INTERFACE $STATIC_IP $SUBNET_MASK $GATEWAY

# Cáº¥u hÃ¬nh DNS
echo "ğŸ”§ Cáº¥u hÃ¬nh DNS..."
sudo networksetup -setdnsservers $INTERFACE 8.8.8.8 8.8.4.4

# Khá»Ÿi Ä‘á»™ng láº¡i máº¡ng
echo "ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i máº¡ng..."
sudo networksetup -setnetworkserviceenabled $INTERFACE off
sleep 2
sudo networksetup -setnetworkserviceenabled $INTERFACE on

echo "âœ… HoÃ n thÃ nh cáº¥u hÃ¬nh Static IP!"
echo "ğŸ“ IP má»›i: $STATIC_IP"
echo "ğŸŒ Gateway: $GATEWAY"
echo "ğŸ” Subnet: $SUBNET_MASK"
echo ""
echo "âš ï¸  LÆ°u Ã½: Náº¿u máº¥t káº¿t ná»‘i, cháº¡y:"
echo "   sudo networksetup -setdhcp $INTERFACE"
echo "   Ä‘á»ƒ khÃ´i phá»¥c DHCP"
