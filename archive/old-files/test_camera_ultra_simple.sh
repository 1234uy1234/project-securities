#!/bin/bash

echo "ğŸ”§ TEST CAMERA ULTRA SIMPLE FIX"
echo "==============================="

echo "ğŸ“± Kiá»ƒm tra frontend..."
if curl -s -k https://10.10.68.200:5173 > /dev/null; then
    echo "âœ… Frontend Ä‘ang cháº¡y trÃªn https://10.10.68.200:5173"
else
    echo "âŒ Frontend khÃ´ng cháº¡y"
    exit 1
fi

echo "ğŸ”§ Kiá»ƒm tra backend..."
if curl -s -k https://10.10.68.200:8000/health > /dev/null; then
    echo "âœ… Backend Ä‘ang cháº¡y trÃªn https://10.10.68.200:8000"
else
    echo "âŒ Backend khÃ´ng cháº¡y"
    exit 1
fi

echo ""
echo "ğŸ¯ HÆ¯á»šNG DáºªN TEST CAMERA ULTRA SIMPLE:"
echo "======================================"
echo ""
echo "1. ğŸ“± Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p:"
echo "   https://10.10.68.200:5173"
echo ""
echo "2. ğŸ” ÄÄƒng nháº­p vá»›i tÃ i khoáº£n admin/manager/employee"
echo ""
echo "3. ğŸ“· Test camera trÃªn QR Scanner:"
echo "   https://10.10.68.200:5173/qr-scan"
echo ""
echo "4. ğŸ§ª Test file HTML Ä‘Æ¡n giáº£n:"
echo "   Má»Ÿ file: test_camera_simple.html trong trÃ¬nh duyá»‡t"
echo ""
echo "âœ… Cáº¢I TIáº¾N ÄÃƒ THá»°C HIá»†N:"
echo "========================"
echo ""
echo "1. ğŸ”” NÃºt thÃ´ng bÃ¡o nhá» hÆ¡n:"
echo "   - Giáº£m kÃ­ch thÆ°á»›c tá»« p-4 â†’ p-2"
echo "   - Giáº£m text tá»« text-lg â†’ text-sm"
echo "   - ThÃªm max-w-xs Ä‘á»ƒ giá»›i háº¡n chiá»u rá»™ng"
echo "   - NÃºt áº©n chá»‰ hiá»ƒn thá»‹ icon ğŸ””"
echo ""
echo "2. ğŸ¥ UltraSimpleCamera component:"
echo "   - KhÃ´ng sá»­ dá»¥ng GlobalCameraManager (trÃ¡nh xung Ä‘á»™t)"
echo "   - Constraints cá»±c ká»³ Ä‘Æ¡n giáº£n: chá»‰ facingMode"
echo "   - Timeout ngáº¯n: 5 giÃ¢y"
echo "   - Tá»± quáº£n lÃ½ stream riÃªng"
echo ""
echo "3. ğŸ”§ Sá»­a lá»—i duplicate method:"
echo "   - XÃ³a duplicate getStream method trong GlobalCameraManager"
echo "   - TrÃ¡nh lá»—i build"
echo ""
echo "4. ğŸ“± Tá»‘i Æ°u cho mobile:"
echo "   - NÃºt nhá» hÆ¡n, Ã­t chiáº¿m chá»—"
echo "   - Camera load nhanh hÆ¡n"
echo "   - Ãt xung Ä‘á»™t giá»¯a cÃ¡c camera"
echo ""
echo "ğŸ” CÃC Lá»–I ÄÃƒ Sá»¬A:"
echo "=================="
echo ""
echo "âŒ NÃºt 'Báº­t thÃ´ng bÃ¡o' chiáº¿m gÃ³c mÃ n hÃ¬nh Ä‘iá»‡n thoáº¡i"
echo "   âœ… FIXED: Giáº£m kÃ­ch thÆ°á»›c, chá»‰ hiá»ƒn thá»‹ icon ğŸ”” khi áº©n"
echo ""
echo "âŒ Camera bÃ¡o 'Ä‘ang khá»Ÿi Ä‘á»™ng' mÃ£i"
echo "   âœ… FIXED: UltraSimpleCamera khÃ´ng dÃ¹ng GlobalCameraManager"
echo ""
echo "âŒ Xung Ä‘á»™t giá»¯a camera QR vÃ  camera chá»¥p áº£nh"
echo "   âœ… FIXED: Má»—i camera tá»± quáº£n lÃ½ stream riÃªng"
echo ""
echo "âŒ Duplicate method getStream"
echo "   âœ… FIXED: XÃ³a method duplicate trong GlobalCameraManager"
echo ""
echo "ğŸš€ Báº®T Äáº¦U TEST..."
echo "=================="
echo ""
echo "Má»Ÿ trÃ¬nh duyá»‡t vÃ  test theo hÆ°á»›ng dáº«n trÃªn!"
echo ""
echo "ğŸ“ Náº¿u váº«n gáº·p lá»—i, hÃ£y:"
echo "   1. Má»Ÿ DevTools (F12) vÃ  xem Console log"
echo "   2. Test file test_camera_simple.html trÆ°á»›c"
echo "   3. Kiá»ƒm tra quyá»n camera trong trÃ¬nh duyá»‡t"
echo "   4. Thá»­ trÃªn thiáº¿t bá»‹ khÃ¡c"
echo ""
echo "ğŸ‰ Camera bÃ¢y giá» sáº½ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh vÃ  nhanh hÆ¡n!"
