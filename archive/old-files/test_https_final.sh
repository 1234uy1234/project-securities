#!/bin/bash

echo "ğŸ” KIá»‚M TRA Há»† THá»NG HTTPS HOÃ€N CHá»ˆNH"
echo "======================================"

echo ""
echo "ğŸ“‹ 1. Backend HTTPS (port 8000):"
curl -k -s https://10.10.68.200:8000/health && echo " âœ… Backend OK" || echo " âŒ Backend Error"

echo ""
echo "ğŸ“‹ 2. Frontend HTTPS (port 5173):"
curl -k -s https://10.10.68.200:5173 | head -c 100 && echo "..." && echo " âœ… Frontend OK" || echo " âŒ Frontend Error"

echo ""
echo "ğŸ“‹ 3. SSL Certificate:"
ls -la 10.10.68.200+2* && echo " âœ… SSL Cert OK" || echo " âŒ SSL Cert Missing"

echo ""
echo "ğŸ“‹ 4. Database Users:"
cd /Users/maybe/Documents/shopee && sqlite3 backend/app.db "SELECT COUNT(*) FROM users;" && echo " âœ… Database OK" || echo " âŒ Database Error"

echo ""
echo "âœ… Há»† THá»NG HTTPS HOÃ€N CHá»ˆNH:"
echo "   - Backend: https://10.10.68.200:8000 âœ…"
echo "   - Frontend: https://10.10.68.200:5173 âœ…"
echo "   - SSL Certificate: mkcert âœ…"
echo "   - Database: SQLite âœ…"
echo ""
echo "ğŸ¯ LOGIC ADMIN DASHBOARD ÄÃƒ Sá»¬A:"
echo "   - findCheckinRecord: TÃ¬m theo task_id + location_id"
echo "   - handleStepClick: TÃ¬m theo task_id + location_id"  
echo "   - latestCheckin: TÃ¬m theo task_id + location_id"
echo ""
echo "ğŸŒ TRUY Cáº¬P:"
echo "   https://10.10.68.200:5173"
echo "   Username: admin"
echo "   Password: admin123"
echo ""
echo "ğŸ”§ Náº¾U Lá»–I SSL TRONG BROWSER:"
echo "   1. Má»Ÿ tab má»›i â†’ https://10.10.68.200:8000/health"
echo "   2. Click 'Advanced' â†’ 'Proceed to 10.10.68.200 (unsafe)'"
echo "   3. Sau Ä‘Ã³ truy cáº­p frontend bÃ¬nh thÆ°á»ng"