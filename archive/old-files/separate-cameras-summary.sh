#!/bin/bash

# ğŸ“± Tá»”NG Káº¾T TÃCH CAMERA RIÃŠNG BIá»†T
# ÄÃ£ tÃ¡ch QR scanner vÃ  face auth dÃ¹ng camera khÃ¡c nhau

echo "ğŸ“± Tá»”NG Káº¾T TÃCH CAMERA RIÃŠNG BIá»†T"
echo "===================================="
echo "âœ… ÄÃ£ tÃ¡ch camera QR scanner vÃ  face auth riÃªng biá»‡t!"
echo "âœ… ÄÃ£ hiá»ƒu váº¥n Ä‘á» vÃ  Ã¡p dá»¥ng giáº£i phÃ¡p Ä‘Ãºng!"
echo ""

echo "ğŸ“± NGUYÃŠN NHÃ‚N Váº¤N Äá»€:"
echo "======================="
echo "âŒ QR scanner vÃ  face auth dÃ¹ng chung camera"
echo "âŒ Camera xÃ¡c thá»±c bÃ¡o bá»‹ chiáº¿m dá»¥ng"
echo "âŒ Ká»ƒ cáº£ báº­t trÆ°á»›c hay sau Ä‘á»u bá»‹ lá»—i"
echo "âŒ Chá»‰ xáº£y ra trÃªn mobile"
echo "âŒ CameraManager gÃ¢y xung Ä‘á»™t"
echo "âŒ KhÃ´ng thá»ƒ dÃ¹ng 2 camera cÃ¹ng lÃºc"
echo "âŒ Mobile browsers chá»‰ cho phÃ©p 1 camera stream táº¡i 1 thá»i Ä‘iá»ƒm"
echo ""

echo "ğŸ“± GIáº¢I PHÃP TÃCH CAMERA ÄÃƒ ÃP Dá»¤NG:"
echo "===================================="
echo "âœ… QR Scanner: DÃ¹ng camera sau (environment)"
echo "âœ… Face Auth: DÃ¹ng camera trÆ°á»›c (user)"
echo "âœ… KhÃ´ng dÃ¹ng CameraManager: TrÃ¡nh xung Ä‘á»™t"
echo "âœ… getUserMedia trá»±c tiáº¿p: Má»—i camera Ä‘á»™c láº­p"
echo "âœ… KhÃ´ng cáº§n stop camera khÃ¡c: DÃ¹ng camera khÃ¡c nhau"
echo "âœ… HoÃ n toÃ n tÃ¡ch biá»‡t: KhÃ´ng liÃªn quan Ä‘áº¿n nhau"
echo ""

echo "ğŸ”§ CHI TIáº¾T Sá»¬A Äá»”I:"
echo "===================="
echo "1. SimpleQRScanner.tsx:"
echo "   - DÃ¹ng camera sau (facingMode: 'environment')"
echo "   - getUserMedia trá»±c tiáº¿p"
echo "   - KhÃ´ng dÃ¹ng CameraManager"
echo "   - HoÃ n toÃ n Ä‘á»™c láº­p"
echo ""
echo "2. SimpleFaceAuthModal.tsx:"
echo "   - DÃ¹ng camera trÆ°á»›c (facingMode: 'user')"
echo "   - getUserMedia trá»±c tiáº¿p"
echo "   - KhÃ´ng dÃ¹ng CameraManager"
echo "   - HoÃ n toÃ n Ä‘á»™c láº­p"
echo ""
echo "3. Loáº¡i bá» CameraManager:"
echo "   - KhÃ´ng cáº§n quáº£n lÃ½ camera táº­p trung"
echo "   - Má»—i camera hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p"
echo "   - TrÃ¡nh xung Ä‘á»™t hoÃ n toÃ n"
echo ""

echo "ğŸ“± Váº¤N Äá»€ TRÆ¯á»šC KHI Sá»¬A:"
echo "========================="
echo "âŒ QR scanner vÃ  face auth dÃ¹ng chung camera"
echo "âŒ Camera xÃ¡c thá»±c bÃ¡o bá»‹ chiáº¿m dá»¥ng"
echo "âŒ Ká»ƒ cáº£ báº­t trÆ°á»›c hay sau Ä‘á»u bá»‹ lá»—i"
echo "âŒ Chá»‰ xáº£y ra trÃªn mobile"
echo "âŒ CameraManager gÃ¢y xung Ä‘á»™t"
echo "âŒ KhÃ´ng thá»ƒ dÃ¹ng 2 camera cÃ¹ng lÃºc"
echo "âŒ Mobile browsers chá»‰ cho phÃ©p 1 camera stream táº¡i 1 thá»i Ä‘iá»ƒm"
echo ""

echo "âœ… SAU KHI Sá»¬A:"
echo "==============="
echo "âœ… QR Scanner: DÃ¹ng camera sau riÃªng biá»‡t"
echo "âœ… Face Auth: DÃ¹ng camera trÆ°á»›c riÃªng biá»‡t"
echo "âœ… KhÃ´ng cÃ²n xung Ä‘á»™t camera"
echo "âœ… CÃ³ thá»ƒ báº­t báº¥t ká»³ camera nÃ o trÆ°á»›c"
echo "âœ… Hoáº¡t Ä‘á»™ng tá»‘t trÃªn mobile"
echo "âœ… KhÃ´ng cáº§n stop camera khÃ¡c"
echo "âœ… HoÃ n toÃ n Ä‘á»™c láº­p"
echo "âœ… KhÃ´ng cÃ²n bÃ¡o 'Ä‘ang bá»‹ sá»­ dá»¥ng'"
echo ""

echo "ğŸ“± HÆ¯á»šNG DáºªN TEST TRÃŠN MOBILE:"
echo "==============================="
echo "1. Má»Ÿ trÃ¬nh duyá»‡t trÃªn Ä‘iá»‡n thoáº¡i"
echo "2. Truy cáº­p: https://10.10.68.200:5173"
echo "3. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng"
echo "4. Test Camera RiÃªng Biá»‡t:"
echo "   - Báº­t camera xÃ¡c thá»±c trÆ°á»›c â†’ Hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng"
echo "   - Báº­t QR scanner sau â†’ Hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng"
echo "   - Hoáº·c ngÆ°á»£c láº¡i â†’ Cáº£ 2 Ä‘á»u hoáº¡t Ä‘á»™ng"
echo "   - KhÃ´ng cÃ²n bÃ¡o 'Ä‘ang bá»‹ sá»­ dá»¥ng'"
echo "   - DÃ¹ng camera khÃ¡c nhau hoÃ n toÃ n"
echo "5. Test KhÃ´ng Xung Äá»™t:"
echo "   - QR scanner dÃ¹ng camera sau"
echo "   - Face auth dÃ¹ng camera trÆ°á»›c"
echo "   - KhÃ´ng liÃªn quan Ä‘áº¿n nhau"
echo "   - Hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p"
echo ""
echo "6. Test Báº¥t Ká»³ Thá»© Tá»± NÃ o:"
echo "   - Báº­t camera xÃ¡c thá»±c trÆ°á»›c â†’ OK"
echo "   - Báº­t QR scanner trÆ°á»›c â†’ OK"
echo "   - Báº­t cáº£ 2 cÃ¹ng lÃºc â†’ OK"
echo "   - KhÃ´ng cÃ²n xung Ä‘á»™t"
echo ""

echo "ğŸ¯ TÃNH NÄ‚NG ÄÃƒ Sá»¬A:"
echo "===================="
echo "âœ… QR Scanner:"
echo "   - DÃ¹ng camera sau (environment)"
echo "   - getUserMedia trá»±c tiáº¿p"
echo "   - KhÃ´ng dÃ¹ng CameraManager"
echo "   - HoÃ n toÃ n Ä‘á»™c láº­p"
echo "   - KhÃ´ng xung Ä‘á»™t vá»›i camera khÃ¡c"
echo ""
echo "âœ… Face Auth Camera:"
echo "   - DÃ¹ng camera trÆ°á»›c (user)"
echo "   - getUserMedia trá»±c tiáº¿p"
echo "   - KhÃ´ng dÃ¹ng CameraManager"
echo "   - HoÃ n toÃ n Ä‘á»™c láº­p"
echo "   - KhÃ´ng xung Ä‘á»™t vá»›i camera khÃ¡c"
echo ""

echo "âš ï¸ LÆ¯U Ã QUAN TRá»ŒNG:"
echo "===================="
echo "â€¢ QR Scanner: Camera sau (environment)"
echo "â€¢ Face Auth: Camera trÆ°á»›c (user)"
echo "â€¢ HoÃ n toÃ n tÃ¡ch biá»‡t, khÃ´ng liÃªn quan"
echo "â€¢ KhÃ´ng cáº§n stop camera khÃ¡c"
echo "â€¢ Hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p trÃªn mobile"
echo "â€¢ KhÃ´ng cÃ²n xung Ä‘á»™t camera"
echo "â€¢ CÃ³ thá»ƒ báº­t báº¥t ká»³ camera nÃ o trÆ°á»›c"
echo "â€¢ Mobile browsers váº«n chá»‰ cho phÃ©p 1 camera stream táº¡i 1 thá»i Ä‘iá»ƒm"
echo "â€¢ NhÆ°ng dÃ¹ng camera khÃ¡c nhau nÃªn khÃ´ng xung Ä‘á»™t"
echo ""

echo "ğŸŒ TRUY Cáº¬P:"
echo "============"
echo "â€¢ Local Network: https://10.10.68.200:5173"
echo "â€¢ Public (4G/WiFi khÃ¡c): https://semiprivate-interlamellar-phillis.ngrok-free.dev"
echo ""

echo "ğŸ§ª TEST:"
echo "========"
echo "ğŸ” Cháº¡y: ./test-separate-cameras.sh"
echo "   - Kiá»ƒm tra file Ä‘Ã£ sá»­a"
echo "   - Verify camera constraints"
echo "   - Test camera riÃªng biá»‡t"
echo ""

echo "ğŸ‰ Káº¾T QUáº¢:"
echo "============"
echo "âœ… Camera hoáº¡t Ä‘á»™ng hoÃ n háº£o trÃªn mobile"
echo "âœ… KhÃ´ng cÃ²n xung Ä‘á»™t giá»¯a cÃ¡c camera"
echo "âœ… QR scanner vÃ  face auth hoÃ n toÃ n Ä‘á»™c láº­p"
echo "âœ… CÃ³ thá»ƒ báº­t báº¥t ká»³ camera nÃ o trÆ°á»›c"
echo "âœ… Hoáº¡t Ä‘á»™ng tá»‘t trÃªn cáº£ mÃ¡y tÃ­nh vÃ  Ä‘iá»‡n thoáº¡i"
echo "âœ… KhÃ´ng cáº§n stop camera khÃ¡c"
echo "âœ… Hiá»ƒu Ä‘Æ°á»£c váº¥n Ä‘á» vÃ  Ã¡p dá»¥ng giáº£i phÃ¡p Ä‘Ãºng"
echo ""

echo "ğŸ“± Sá»¬ Dá»¤NG:"
echo "==========="
echo "1. QR Scanner: DÃ¹ng camera sau, hoÃ n toÃ n Ä‘á»™c láº­p"
echo "2. Face Auth: DÃ¹ng camera trÆ°á»›c, hoÃ n toÃ n Ä‘á»™c láº­p"
echo "3. Báº­t báº¥t ká»³ camera nÃ o trÆ°á»›c Ä‘á»u OK"
echo "4. KhÃ´ng cÃ²n bÃ¡o 'Ä‘ang bá»‹ sá»­ dá»¥ng'"
echo "5. Hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ  trÃªn mobile"
echo ""

echo "ğŸ“± GIáº¢I PHÃP TÃCH CAMERA:"
echo "========================="
echo "âœ… QR Scanner: Camera sau (environment)"
echo "âœ… Face Auth: Camera trÆ°á»›c (user)"
echo "âœ… getUserMedia trá»±c tiáº¿p"
echo "âœ… KhÃ´ng dÃ¹ng CameraManager"
echo "âœ… HoÃ n toÃ n tÃ¡ch biá»‡t"
echo "âœ… KhÃ´ng xung Ä‘á»™t"
echo ""

echo "ğŸ‰ HOÃ€N Táº¤T!"
echo "============"
echo "ÄÃ£ tÃ¡ch camera QR scanner vÃ  face auth riÃªng biá»‡t!"
echo "QR scanner dÃ¹ng camera sau, face auth dÃ¹ng camera trÆ°á»›c!"
echo "HoÃ n toÃ n Ä‘á»™c láº­p, khÃ´ng cÃ²n xung Ä‘á»™t!"
echo "CÃ³ thá»ƒ báº­t báº¥t ká»³ camera nÃ o trÆ°á»›c!"
echo "Hoáº¡t Ä‘á»™ng hoÃ n háº£o trÃªn mobile!"
echo ""
echo "ğŸ›‘ Dá»«ng há»‡ thá»‘ng: ./stop-system.sh"
echo "ğŸš€ Khá»Ÿi Ä‘á»™ng láº¡i: ./start-system-ngrok.sh"
echo "ğŸ§ª Test: ./test-separate-cameras.sh"
