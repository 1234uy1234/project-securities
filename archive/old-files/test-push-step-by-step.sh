#!/bin/bash

# ğŸ“± TEST PUSH NOTIFICATION Tá»ªNG BÆ¯á»šC
# HÆ°á»›ng dáº«n test push notification chi tiáº¿t

echo "ğŸ“± TEST PUSH NOTIFICATION Tá»ªNG BÆ¯á»šC"
echo "===================================="
echo "HÆ°á»›ng dáº«n test push notification chi tiáº¿t..."
echo ""

FRONTEND_URL="https://10.10.68.200:5173"

echo "ğŸ“± HÆ¯á»šNG DáºªN TEST PUSH NOTIFICATION:"
echo "====================================="
echo "1. Má»Ÿ trÃ¬nh duyá»‡t trÃªn Ä‘iá»‡n thoáº¡i"
echo "2. Truy cáº­p: $FRONTEND_URL"
echo "3. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng"
echo "4. LÃ m theo cÃ¡c bÆ°á»›c sau:"
echo ""
echo "ğŸ” BÆ¯á»šC 1: CÃ€I Äáº¶T PWA (QUAN TRá»ŒNG!)"
echo "====================================="
echo "â€¢ TÃ¬m nÃºt 'CÃ i Ä‘áº·t App' hoáº·c 'Install App'"
echo "â€¢ Báº¥m cÃ i Ä‘áº·t PWA"
echo "â€¢ Hoáº·c menu â†’ 'Add to Home Screen'"
echo "â€¢ CÃ i Ä‘áº·t app nhÆ° app tháº­t"
echo "â€¢ âš ï¸ QUAN TRá»ŒNG: Pháº£i cÃ i Ä‘áº·t PWA trÆ°á»›c!"
echo ""
echo "ğŸ” BÆ¯á»šC 2: Báº¬T PUSH NOTIFICATION"
echo "================================="
echo "â€¢ VÃ o Settings â†’ Push Notifications"
echo "â€¢ Báº¥m 'Enable Notifications'"
echo "â€¢ Cho phÃ©p notification permission khi browser há»i"
echo "â€¢ Äá»£i thÃ´ng bÃ¡o 'ThÃ´ng bÃ¡o Ä‘Ã£ Ä‘Æ°á»£c báº­t!'"
echo "â€¢ âš ï¸ QUAN TRá»ŒNG: Pháº£i cho phÃ©p notification permission!"
echo ""
echo "ğŸ” BÆ¯á»šC 3: TEST THÃ”NG BÃO THá»¦ CÃ”NG"
echo "==================================="
echo "â€¢ Báº¥m nÃºt 'Test Notification'"
echo "â€¢ Kiá»ƒm tra xem cÃ³ thÃ´ng bÃ¡o hiá»‡n khÃ´ng"
echo "â€¢ Náº¿u cÃ³ thÃ´ng bÃ¡o â†’ OK"
echo "â€¢ Náº¿u khÃ´ng cÃ³ â†’ Kiá»ƒm tra console logs"
echo ""
echo "ğŸ” BÆ¯á»šC 4: TEST Táº O NHIá»†M Vá»¤"
echo "============================="
echo "â€¢ Admin táº¡o nhiá»‡m vá»¥ má»›i"
echo "â€¢ Giao cho employee"
echo "â€¢ Employee nháº­n thÃ´ng bÃ¡o"
echo "â€¢ ThÃ´ng bÃ¡o hiá»‡n trÃªn Ä‘iá»‡n thoáº¡i"
echo ""
echo "âš ï¸ Náº¾U KHÃ”NG CÃ“ THÃ”NG BÃO:"
echo "=========================="
echo "â€¢ Kiá»ƒm tra xem Ä‘Ã£ cÃ i Ä‘áº·t PWA chÆ°a"
echo "â€¢ Kiá»ƒm tra xem Ä‘Ã£ báº­t notification permission chÆ°a"
echo "â€¢ Kiá»ƒm tra console logs Ä‘á»ƒ xem lá»—i gÃ¬"
echo "â€¢ Thá»­ refresh trang vÃ  lÃ m láº¡i"
echo "â€¢ Äáº£m báº£o Ä‘ang dÃ¹ng HTTPS"
echo ""
echo "ğŸ” DEBUG CONSOLE LOGS:"
echo "======================"
echo "â€¢ Má»Ÿ Developer Tools (F12)"
echo "â€¢ VÃ o tab Console"
echo "â€¢ TÃ¬m cÃ¡c log sau:"
echo "  - 'Push notifications initialized successfully'"
echo "  - 'Subscription sent to server successfully'"
echo "  - 'Service Worker: Push notification received!'"
echo "  - 'REAL PUSH SENT'"
echo ""
echo "ğŸ” KIá»‚M TRA SERVICE WORKER:"
echo "==========================="
echo "â€¢ VÃ o Developer Tools â†’ Application â†’ Service Workers"
echo "â€¢ Kiá»ƒm tra xem service worker cÃ³ active khÃ´ng"
echo "â€¢ Náº¿u khÃ´ng, thá»­ refresh trang"
echo ""
echo "ğŸ” KIá»‚M TRA PUSH SUBSCRIPTION:"
echo "=============================="
echo "â€¢ VÃ o Developer Tools â†’ Application â†’ Storage"
echo "â€¢ Kiá»ƒm tra xem cÃ³ push subscription khÃ´ng"
echo "â€¢ Náº¿u khÃ´ng cÃ³, thá»­ báº­t láº¡i notification"
echo ""
echo "âš ï¸ CÃC Váº¤N Äá»€ THÆ¯á»œNG Gáº¶P:"
echo "========================"
echo "â€¢ ChÆ°a cÃ i Ä‘áº·t PWA â†’ CÃ i Ä‘áº·t PWA trÆ°á»›c"
echo "â€¢ ChÆ°a báº­t notification permission â†’ Báº­t permission"
echo "â€¢ Service worker chÆ°a active â†’ Refresh trang"
echo "â€¢ ChÆ°a Ä‘Äƒng kÃ½ push subscription â†’ Báº­t notification"
echo "â€¢ Browser khÃ´ng há»— trá»£ â†’ DÃ¹ng Chrome/Firefox"
echo "â€¢ Äang dÃ¹ng HTTP â†’ Cáº§n HTTPS cho push notification"
echo "â€¢ ChÆ°a Ä‘Äƒng nháº­p â†’ ÄÄƒng nháº­p trÆ°á»›c"
echo ""
echo "ğŸ”— LINKS TRUY Cáº¬P:"
echo "=================="
echo "â€¢ Local Network: $FRONTEND_URL"
echo "â€¢ Public (4G/WiFi khÃ¡c): https://semiprivate-interlamellar-phillis.ngrok-free.dev"
echo ""
echo "ğŸ›‘ Dá»«ng há»‡ thá»‘ng: ./stop-system.sh"
echo "ğŸš€ Khá»Ÿi Ä‘á»™ng láº¡i: ./start-system-ngrok.sh"
